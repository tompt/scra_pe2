!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t){"use strict";function n(e,t){return u=t,c=e,Promise.resolve()}function r(e){var t={version:e.version,cnsVersion:e.cnsVersion};return new Promise(function(n,r){e.controller.setup(c,e.config,t).then(function(){p[e.name]=e.controller.api,n(e.controller)})["catch"](r)})}function o(e){f[e]&&(l(f[e],function(t){d(t)&&t(p[e])}),f[e]=!1)}function i(e){f=e}function a(e,t){if(d(t)){if(p[e]&&(!f||!f[e]))return void t(p[e]);f[e]||(f[e]=[]),f[e].push(t)}}function s(){return u}var c,u,l=e("@condenast/atp-utl/loop"),d=e("@condenast/atp-utl/type/isFunction"),p={},f={};t.exports={setup:n,extend:r,queue:{set:i,play:o},async:a,about:s}},{"@condenast/atp-utl/loop":65,"@condenast/atp-utl/type/isFunction":83}],2:[function(e,t){function n(){window._4d=window._4d||{},window.SparrowCache=window.SparrowCache||{events:[],pixels:[]}}function r(e){return e.sort(function(e,t){return e.score<t.score}).map(function(e){return e.name}).slice(0,5)}function o(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].brand,o=e[n].channels,i=0;i<o.length;i++){var a=r+":"+o[i];t.push(a)}return t}function i(e){p({path:"window._4d.context.atmoprop",poll:{limit:1e4},onReady:function(){return Promise.all([a(e),s(e)]).then(function(){e.process.done()})["catch"](function(t){e.process.failed(t)})},onFailure:function(t){e.process.failed(t.message)}})}function a(e){var t=window._4d.context,n=window.SparrowCache.event;return t&&n?c(e):l({URL:f.content+window.location.href}).then(function(t){return window._4d.context=JSON.parse(t),c(e)})["catch"](function(e){return e.message})}function s(e){var t=d("CN_xid"),n=window._4d.user;return n?u(e):t?l({URL:f.user+t}).then(function(t){return window._4d.user=JSON.parse(t),window.SparrowCache.event=window.SparrowCache.event||{},u(e)})["catch"](function(e){return e.message}):l({URL:f.infinityid,withCredentials:!0}).then(function(t){return l({URL:f.user+t}).then(function(t){return window._4d.user=JSON.parse(t),u(e)})["catch"](function(e){return e.message})})["catch"](function(e){return e.message})}function c(e){var t=window._4d.context.topics&&r(window._4d.context.topics)||!1,n=window._4d.context.atmo===!0?"true":"false",o=window._4d.context.atmovisit||!1,i=window._4d.context.atmoprop||!1,a=window.SparrowCache&&window.SparrowCache.event&&window.SparrowCache.event.pID||d("pID")||!1;return e.addTargeting("ctx_topics",t),e.addTargeting("atmo",n),e.addTargeting("atmovisit",o),e.addTargeting("atmoprop",i),e.addTargeting("pid",a),Promise.resolve()}function u(e){var t=window._4d.user.topics,n=window._4d.user.acquisitionChannels,i=window._4d.user.xid,a=window.SparrowCache&&window.SparrowCache.event&&window.SparrowCache.event.sID||d("sID");return t&&e.addTargeting("usr_topics",r(t)),n&&e.addTargeting("usr_acq",o(n,[])),i&&e.addTargeting("xid",i),a&&e.addTargeting("sid",a),Promise.resolve()}var l=e("@condenast/atp-utl/ajax"),d=e("@condenast/atp-utl/cookies").get,p=e("@condenast/atp-utl/objects/ready"),f={content:"//4d.condenastdigital.com/content?url=",infinityid:"//infinityid.condenastdigital.com/?rand="+Date.now(),user:"//4d.condenastdigital.com/user?xid="};t.exports={code:"4d",setup:n,hooks:{onPageCreate:i}}},{"@condenast/atp-utl/ajax":50,"@condenast/atp-utl/cookies":56,"@condenast/atp-utl/objects/ready":71}],3:[function(e,t){function n(e){var t=[r()],n=o(),i=Object.keys(n);i.forEach(function(t){e.addTargeting(t,n[t])}),e.addTargeting("uuid",t),e.process.done()}function r(){var e=a("aam_uuid");return e?e.length<=c?e:i(e):null}function o(){var e=a("aamconde"),t=[],n={};return e?(t=e.split(";"),t.forEach(function(e){var t=e.split("="),r=t[0].toLowerCase(),o=t[1];n[r]?n[r].push(o):n[r]=[o]}),n):{conde:[null]}}function i(e){return("trunc|"+e).substr(0,c)}var a=e("@condenast/atp-utl/cookies/get"),s=e("@condenast/atp-utl/functions").noop,c=294;t.exports={code:"aam",setup:s,hooks:{onPageCreate:n}}},{"@condenast/atp-utl/cookies/get":55,"@condenast/atp-utl/functions":63}],4:[function(e,t){function n(e){function t(){function e(e,t){window.apstag._Q.push([e,t])}window.apstag||(window.apstag={init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},_Q:[]})}function n(){var e=document.createElement("script");e.async=!0,e.src=i,document.body.appendChild(e)}function r(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]}var i=e.endpoint,a=e.amazon_id,s="googletag",c=["vnd_amzn_amznbid","vnd_amzn_amzniid","vnd_amzn_size"];o=e.eligible_sizes||[],t(),n(),r(),window.apstag.init({pubID:a,adServer:s}),window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){for(var t=e.slot.getSlotElementId(),n=window.googletag.pubads().getSlots(),r=0;r<n.length;r++){var o=n[r],i=o.getSlotElementId();if(i===t){for(var a=0;a<c.length;a++)o.setTargeting(c[a],"");break}}})})}function r(e){var t=e.getMeta(),n=t.sizes||[],r=n.filter(function(e){return o.indexOf(e)>-1});if(r.length>0){var a=i(r),s=t.id;window.apstag.fetchBids({slots:[{slotID:s,sizes:a}]},function(t){var n=["amznbid","amzniid","size"];try{var r=t[0];if(r)for(var o=0;o<n.length;o++){var i=n[o];e.addTargeting(i,r[i])}e.process.done()}catch(a){e.process.failed(a)}})}}var o,i=e("../utilities/translate-sizes");t.exports={code:"amzn",setup:n,hooks:{onSlotRequest:r}}},{"../utilities/translate-sizes":5}],5:[function(e,t){function n(e){if(!Array.isArray(e))return[];var t=e.join(" ").split("x").join(",").split(" ");return t.map(function(e){return e.split(",").map(function(e){return parseInt(e,10)})})}t.exports=n},{}],6:[function(e,t){"use strict";function n(e){s=e}function r(e){var t,n,r,s=e.getMeta().templateType,c=document.createElement("script");return"article"!==s.toLowerCase()?void e.process.done():(n=o())?(t=i(n),"string"!=typeof t?void e.process.done():(r=a(t),window.arsData=function(t){console.log(t);var n=t.length?t:"null";e.addTargeting("data",n),e.process.done()},c.setAttribute("src",r),void document.body.appendChild(c))):void e.process.done()}function o(){var e=document.querySelectorAll('meta[name="parsely-page"]'),t=document.querySelectorAll('script[type="application/ld+json"]');if(!e.length&&!t.length)return!1;var n=e[0]?e[0].getAttribute("content"):t[0].innerHTML;return c(n)?JSON.parse(n):null}function i(e){var t=document.querySelectorAll('link[rel="canonical"]');return e.link||e.url||t.length?e.link||e.url||t[0].getAttribute("href"):!1}function a(e){var t=s.endpoint,n=t+s.top_ad_unit+"/"+encodeURIComponent(e)+"?callback=arsData";return n}var s,c=e("@condenast/atp-utl/type/isString");t.exports={code:"ars",setup:n,hooks:{onPageCreate:r}}},{"@condenast/atp-utl/type/isString":91}],7:[function(e,t){function n(){var e=document.createElement("script");e.async=!0,e.src="//js-sec.indexww.com/ht/htw-condenast.js",document.head.appendChild(e)}function r(e){o({path:"window.headertag",poll:{limit:1e3},onReady:function(t){t.condeFetchDemand(e)},onFailure:function(t){e.process.failed(t)}})}var o=e("@condenast/atp-utl/objects/").ready;t.exports={code:"INDX",setup:n,hooks:{onSlotRequest:r}}},{"@condenast/atp-utl/objects/":67}],8:[function(e,t){"use strict";function n(e){var t=r("atp_newsletter");if(!t.length)return e.process.done();var n=[];i(t.split(","),function(e){var t=e.trim();t.length&&-1===n.indexOf(t)&&n.push(t)}),e.addTargeting("ids",n),e.process.done()}var r=e("@condenast/atp-utl/cookies/get"),o=e("@condenast/atp-utl/functions").noop,i=e("@condenast/atp-utl/loop");t.exports={code:"nls",setup:o,hooks:{onPageCreate:n}}},{"@condenast/atp-utl/cookies/get":55,"@condenast/atp-utl/functions":63,"@condenast/atp-utl/loop":65}],9:[function(e,t){function n(){r(),o()}function r(){window.CN=window.CN||{},window.CN.ad={proximic:{}}}function o(){var e=document.createElement("script"),t="https:"===document.location.protocol?"https://":"http://",n=t+"segment-data.zqtk.net/conde-nast?url="+encodeURIComponent(window.location.href);e.async=!0,e.src=n,document.head.appendChild(e)}function i(e){a({path:"window.CN.ad.proximic.pxData.data",poll:{limit:800},onReady:function(t){e.addTargeting("segments",t),e.process.done()},onFailure:function(t){e.process.failed(t)}})}var a=e("@condenast/atp-utl/objects/ready");t.exports={setup:n,code:"prx",hooks:{onPageCreate:i}}},{"@condenast/atp-utl/objects/ready":71}],10:[function(e,t){"use strict";function n(){r()}function r(){var e=document.createElement("script");e.async=!0,e.src="//cdn.yldbt.com/js/yieldbot.intent.js",document.head.appendChild(e)}function o(e){l({path:"yieldbot.getPageCriteria",poll:{limit:1500},onReady:function(){window.ybotq=window.ybotq||[],window.ybotq.push(i),window.ybotq.push(u.bind(null,e))},onFailure:function(t){e.process.failed("[ cns plugin : ads : yieldbot.embed ] Yieldbot did not load: "+t.message)}})}function i(){a()>=600?(s(d.ybDsk),yieldbot.defineSlot("leaderboard"),yieldbot.defineSlot("medrec",{sizes:[[300,250],[300,600]]})):(s(d.ybMob),yieldbot.defineSlot("MLB"),yieldbot.defineSlot("mob_MR")),yieldbot.enableAsync(),yieldbot.go()}function a(){var e=document,t=e.documentElement,n=Math.max(t.scrollWidth,t.offsetWidth,t.clientWidth);return n}function s(e){var t=c();if(t in e){var n=e[t];yieldbot.pub(n)}else yieldbot.pub(p)}function c(){var e=document.location.host.split("."),t="";return e.length>1&&(t="www"===e[0]?e[1]:e[0]),t}function u(e){var t=yieldbot.getPageCriteria()||"n";e.addTargeting("data",t),e.process.done()}var l=e("@condenast/atp-utl/objects/ready"),d={ybDsk:{allure:"5f21",architecturaldigest:"45ce",arstechnica:"1473",bonappetit:"80a9",brides:"99b8",cntraveler:"68b4",details:"84f3",epicurious:"7caa",glamour:"6ba1",golfdigest:"16ce",gq:"2c20",newyorker:"20a1",self:"25ef",teenvogue:"e23d",vanityfair:"3a67",wired:"bc58",wmagazine:"fd2c"},ybMob:{allure:"3a8f",architecturaldigest:"b6b7",arstechnica:"ad37",bonappetit:"4528",brides:"b07f",cntraveler:"00f8",details:"78cb",epicurious:"3804",glamour:"0e83",golfdigest:"9071",gq:"26b1",newyorker:"71f3",self:"ff1c",teenvogue:"01c0",vanityfair:"2f33",wired:"de70",wmagazine:"a439"}},p="822c";t.exports={code:"ylbt",setup:n,hooks:{onSlotRequest:o}}},{"@condenast/atp-utl/objects/ready":71}],11:[function(e,t){function n(e){return i=e._default||{},s(e,function(e,t){"_default"!==t&&(a[t]={},r(e,t),o(e,t))}),Promise.resolve(a)}function r(e,t){var n=e._default||{};a[t].__default=c({mergeables:[i,n],merger:u})}function o(e,t){s(e,function(e,n){if("_default"!==n){var r=a[t].__default;a[t][n]=c({mergeables:[r,e],merger:u})}})}var i,a={},s=e("@condenast/atp-utl/loop"),c=e("@condenast/atp-utl/objects/merge"),u=e("./merge");t.exports=n},{"./merge":12,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/merge":69}],12:[function(require,module,exports){function merger(e,t,n){switch(isRunningOnClient="undefined"!=typeof window&&window.window,n){case"uris":if(isObj(e))return urisMerger(e,t);break;case"sets":if(isObj(e))return setsMerger(e,t);break;case"types":if(isObj(e))return slotTypeDefinitionsMerger(e,t);break;case"groups":if(!e)return t;if(isObj(e))return groupMerger(e,t);break;case"targeting":if(!e)return t;if(isObj(e))return targetingMerger(e,t);break;case"sizes":if(!e)return t;if(isObj(e))return sizeMerger(e,t);break;case"id":if(!e)return t;if(isObj(e))return idMerger(e,t);break;case"render":if(slotComplexRenderProcessor(e),slotComplexRenderProcessor(t),!e)return t;if(isObj(e))return renderMerger(e,t);break;case"request_vp_range":case"refresh_vp_range":if(!e)return getDeviceDefault(t);if(isObj(e))return vpRangeMerger(e,t);break;case"plugins":if(isObj(e))return pluginMerger(e,t);break;default:if(isArr(e)&&isArr(t))return t}}function urisMerger(e,t){var n=objMerge({mergeables:[e,t]});n.__default=n._default,n._default=null,delete n._default}function setsMerger(e,t){var n=objMerge({mergeables:[e,t]});n.__default=n._default,n._default=null,delete n._default}function groupMerger(e,t){return arrMerge([e,t],!0)}function targetingMerger(e,t){var n=[keys(e),keys(t)],r=arrMerge(n,!0),o={};return loop(r,function(n){if(!e[n])return void(o[n]=t[n]);var r=[e[n],t[n]];o[n]=arrMerge(r,!0)}),o}function idMerger(e,t){var n,r=keys(e),o=keys(t),i=arrMerge([r,o],!0);return r.length&&o.length?(n={},loop(i,function(r){n[r]=t[r]||e[r]})):n=t,n}function sizeMerger(e,t){var n={};return loop(e,function(r,o){if(n[o]=e[o]||[],t[o]){n[o]=arrMerge([n[o],t[o]],!0);var i=n[o].filter(function(e){return/\-/.test(e)}),a=i.map(function(e){return e.replace(/\-/g,"")});n[o]=n[o].filter(function(e){return-1===i.concat(a).indexOf(e)})}}),n}function renderMerger(e,t){var n={};return deviceMerger(n,e,t),t.constellation&&(n.constellation=t.constellation),t.slot&&(n.slot=t.slot),n}function vpRangeMerger(e,t){var n=getDeviceDefault(e),r=getDeviceDefault(t),o=optsMerge(n.__default,r.__default),i={};return loop(r,function(e,t){var n=e.desktop||o.desktop,r=e.tablet||o.tablet,a=e.mobile||o.mobile;i[t]={desktop:n,tablet:r,mobile:a}}),i}function getDeviceDefault(e){var t=clone(e,!0);return t.__default=t._default||{desktop:t.desktop,tablet:t.tablet,mobile:t.mobile},delete t._default,delete t.desktop,delete t.tablet,delete t.mobile,t}function deviceMerger(e,t,n){n.desktop&&(e.desktop=n.desktop||e.desktop),n.tablet&&(e.tablet=n.tablet||e.tablet),n.mobile&&(e.mobile=n.mobile||e.mobile)}function slotComplexRenderProcessor(e){return e?e.slot?void slotComplexRenderPreProcessor(e.slot):void loop(e,function(e){slotComplexRenderPreProcessor(e.slot)}):void 0}function slotComplexRenderPreProcessor(e){loop(e,function(e){isObj(e)&&e.every&&e.el&&(e.when&&(e.when=isRunningOnClient&&stringToFunction(e.when)||e.when.toString()),e["in"]&&e["in"].el&&e["in"].when&&(e["in"].when=isRunningOnClient&&stringToFunction(e["in"].when)||e["in"].when.toString()))})}function stringToFunction(string){var desiredFunction,codeAsString="desiredFunction = "+string+";";try{eval(codeAsString)}catch(e){report.compile({type:"error",name:"merge_string_to_function_error",error:{msg:e.message,obj:e}})}return desiredFunction}function pluginMerger(e,t){var n={};return loop(t,function(t,r){var o=e[r];n[r]=objMerge({mergeables:[o,t]})}),n}function slotTypeDefinitionsMerger(e,t){var n={};return loop(t,function(r,o){var i=r===!1;n[o]=i?!1:objMerge({mergeables:[e[o],t[o]],merger:merger})}),n}var isObj=require("@condenast/atp-utl/type/isObject"),isArr=require("@condenast/atp-utl/type/isArray"),objMerge=require("@condenast/atp-utl/objects/merge"),optsMerge=require("@condenast/atp-utl/objects/options"),arrMerge=require("@condenast/atp-utl/arrays/merge"),clone=require("@condenast/atp-utl/objects/clone"),loop=require("@condenast/atp-utl/loop"),keys=require("@condenast/atp-utl/objects/keys"),isRunningOnClient;module.exports=merger},{"@condenast/atp-utl/arrays/merge":53,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/clone":66,"@condenast/atp-utl/objects/keys":68,"@condenast/atp-utl/objects/merge":69,"@condenast/atp-utl/objects/options":70,"@condenast/atp-utl/type/isArray":75,"@condenast/atp-utl/type/isObject":89}],13:[function(e,t){function n(e,t){return l(e)&&l(t)?t.appendChild(e):!1}function r(e,t){return l(e)&&l(t)?t.insertBefore(e,t.children[0]):!1}function o(e,t){return l(e)&&l(t)?t.parentNode.insertBefore(e,t):!1}function i(e,t){return l(e)&&l(t)?t.parentNode.insertBefore(e,t.nextSibling):!1}function a(e,t){if(!d(e))return!1;var n=l(t)?t:document.querySelector(t);return t&&!n?!1:(n||document).querySelector(e)}function s(e,t){if(!d(e))return!1;var n=l(t)?t:document.querySelector(t);return t&&!n?!1:(n||document).querySelectorAll(e)}function c(e){if(e&&e.el){var t=e.el.className.split(" "),n=e.add&&t.concat(e.add)||t,r=[];e.drop&&p(e.drop,function(e){n.indexOf(e)>-1&&n.splice(n.indexOf(e),1)}),p(n,function(e){n.indexOf(e)>-1&&-1===r.indexOf(e)&&r.push(e)}),requestAnimationFrame(function(){e.el.className=r.join(" ")})}}function u(e){function t(e){var t="(\\s+|^)"+e+"\\:\\s?\\w+;";return new RegExp(t)}if(e&&e.el){var n=e.el.style.cssText.replace(/;/g,"; ");e.add&&p(e.add,function(e,r){var o=r+":"+e+"; ",i=t(r);n=i.test(n)?n.replace(i," "+o):n+o}),e.drop&&p(e.drop,function(e){var r=t(e);n=n.replace(r,"")}),requestAnimationFrame(function(){e.el.style.cssText=n})}}var l=e("@condenast/atp-utl/type/isElement"),d=e("@condenast/atp-utl/type/isString"),p=e("@condenast/atp-utl/loop");t.exports={get:a,getAll:s,prepend:r,append:n,top:r,bottom:n,before:o,after:i,classes:{update:c},styles:{update:u}}},{"@condenast/atp-utl/loop":65,"@condenast/atp-utl/type/isElement":82,"@condenast/atp-utl/type/isString":91}],14:[function(e,t){function n(){return ee(document.location.href)||ee(document.referrer)?(ie.compile({type:"error",name:"gpt_stopped_PII found",error:{msg:oe.haltPII()}}),void(H=!0)):void(B||(d(),p()))}function r(e){var t=[],r=[];B||n(),J(e,function(e){var n=e.id,o=le[n];o?(c(e),t.push(e)):r.push(a(e))}),o(r),i(t)}function o(e){Promise.all(e).then(i)["catch"](function(e){ie.compile({type:"error",name:"new_tag_creation_error",error:{msg:oe.newTagError(e.message),obj:e}})})}function i(e){try{q(e)}catch(t){ie.compile({type:"error",name:"gpt_slot_request_failed",error:{msg:oe.requestFailed(t.message),obj:t}})}}function a(e){return new Promise(function(t,n){h(function(){var r=s(e);return r?(r.addService(U.pubads()),P(e,r),c(e),void t(e)):void n(oe.cantCreateSlot())})})}function s(e){var t=A(e.sizes),n=e.adUnitPath,r=e.id,o=e.out_of_page;return o?U.defineOutOfPageSlot(n,r):e.companion?U.defineSlot(n,t,r).addService(U.companionAds()):U.defineSlot(n,t,r)}function c(e){var t=le[e.id],n=t.tag,r=e.pageTargeting,o=e.slotTargeting;u(r),l(n,o)}function u(e){J(e,function(e,t){var n=O(t,e);n&&h(function(){U.pubads().setTargeting(n.key,n.target)})})}function l(e,t){J(t,function(t,n){var r=O(n,t);r&&e.setTargeting(r.key,r.target)})}function d(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],U=window.googletag;var e=document.createElement("script");e.async=!0,e.src="//www.googletagservices.com/tag/js/gpt.js",e.id="gpt-script",document.head.appendChild(e),B=!0}function p(){f(),C(),E(),R()}function f(){g(),window.moatCondeListener=m,h(function(){U.pubads().addEventListener("slotRenderEnded",v),U.pubads().addEventListener("impressionViewable",S),U.pubads().addEventListener("slotVisibilityChanged",T)})}function g(){G({path:"googletag.apiReady",poll:{limit:1500},onReady:function(){ie.compile({type:"info",regex:"/tag/js/gpt.js",name:"library_gpt"})},onFailure:function(e){ie.compile({type:"error",name:"gpt_not_ready",error:{msg:oe.notReady(e.message),obj:e}})}})}function m(e){var t=e.adKeywords.zMoatPS;e.wasViewable&&J(le,function(e){e.name===t&&e.onMOATViewableEvent()})}function h(e){!H&&B&&U.cmd.push(e)}function v(e){var t,n=e.slot.getSlotElementId(),r=le[n],o=e.isEmpty,i='[id^="google_ads_iframe"]:not([id$="to_be_removed__"]):not([id$="hidden__"])',a=r.stage.querySelector("iframe"+i),s=r.stage.querySelector("div"+i),c=x(a);o?(c.isEmpty=!0,c.dimensions={string:null}):(t=_(e.size),c.dimensions=t,c.isEmpty=!1,c.isSized=w(t.string),c.advertiser=y(e.advertiserId),c.creative=y(e.creativeId),c.order=y(e.campaignId),c.lineItem=y(e.lineItemId),k(s,a,t)),r.isRefresh=!0,j(r,a),r.onRenderStart(c)}function y(e){return null===e||void 0===e?"programmatic":e.toString()}function b(e){for(var t=[],n=Object.keys(le),r="undefined"===e?void 0:e,o=0;o<n.length;o++){var i=le[n[o]];i.page===r&&t.push(i)}return t}function _(e){return{width:e[0],height:e[1],string:e[0]+"x"+e[1]}}function w(e){var t=["1x1"],n=Q(t,e)||K(e,"9x");return!n}function x(e){if(!X(e))return{};var t=e.contentWindow,n=t.cns_ads_meta||t.cns_ads&&t.cns_ads.meta||{};return n}function j(e,t){re(function(){if(X(t)){var n=t.contentWindow,r=n.document,o=!!r.querySelector('[src*="moatads.com"]');o&&e.onMOATPresent()}})}function k(e,t,n){var r,o;w(n.string)&&(r=n.width,o=n.height,window.requestAnimationFrame(function(){ae.styles.update({el:e,add:{"min-height":o+"px",width:r+"px"}}),ae.styles.update({el:t,add:{"min-height":o+"px",width:r+"px"}})}))}function S(e){var t=e.slot.getSlotElementId(),n=le[t];n&&$(n.onImpressionViewable)&&n.onImpressionViewable(e)}function T(e){var t=e.slot.getSlotElementId(),n=le[t];n&&$(n.onVisibilityChange)&&n.onVisibilityChange(e)}function C(){h(function(){U.pubads().enableSingleRequest(),U.pubads().disableInitialLoad(),U.disablePublisherConsole(),U.companionAds().setRefreshUnfilledSlots(!0),U.pubads().enableVideoAds(),U.enableServices()})}function E(){re(M),setInterval(M,ce)}function R(){var e=document.createElement("style"),t=document.createTextNode("");e.classList.add("cns-ads-iframe-styles"),e.appendChild(t),document.head.appendChild(e),e.sheet.insertRule('iframe[id^="google_ads_iframe"],div[id*="google_ads_iframe"] {margin: 0 auto;padding: 0;height: 0;width: 100%;min-width: 100%;}',e.sheet.cssRules.length)}function A(e){var t=[];return J(e,function(e){var n=e.split("x");n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),t.push(n)}),t}function P(e,t){le[e.id]={name:e.name,stage:e.stage,onIDCheck:e.onIDCheck,onRenderStart:e.onRenderStart,onRenderEnd:e.onRenderEnd,onImpressionViewable:e.onImpressionViewable,onVisibilityChange:e.onVisibilityChange,onMOATPresent:e.onMOATPresent,onMOATViewableEvent:e.onMOATViewableEvent,adUnitPath:e.adUnitPath,hasDefaultPath:e.hasDefaultPath,tag:t,out_of_page:e.out_of_page,id:e.id,forChildren:e.forChildren,page:e.page,isRefresh:!1,sizes:e.sizes}}function O(e,t){var n={};return t&&"null"!==t||0===t?(n.key=Y(e,"_"),n.target=I(t),n.key.length>20&&ie.compile({type:"error",name:"gpt_targeting_key_limit",error:{msg:oe.keyExceedsCharLimit(n.key)}}),n):!1}function I(e){return Z(e)?e:e.toString()}function q(e){J(e,function(e){var t=e.id,n=le[t],r=n,o=r.page;se[o]||(se[o]=[]),D(t,o)||se[o].push(r)})}function D(e,t){var n=!1,r=se[t];return J(r,function(t){t.id===e&&(n=!0)}),n}function M(){h(function(){var e=W(se);se={},J(e,function(e,t){var n=te(e),r=ue&&n;if(r){if(n){var o=e[0];if(o.out_of_page){var i=o.page;se[i]=se[i]||[],se[i].push(o)}}}else{ue=!1,N(t),z(e),L(e),V(e);var a=ne(t,e,de);U.pubads().refresh(a,{changeCorrelator:!1})}})})}function N(e){var t=[],n=[],r=[],o=b(e);J(o,function(e){var o=e.onIDCheck();o&&o.advertiserId&&!Q(t,o.advertiserId)&&t.push(o.advertiserId),o&&o.creativeId&&!Q(n,o.creativeId)&&n.push(o.creativeId),o&&o.lineItem&&!Q(r,o.lineItem)&&r.push(o.lineItem)}),U.pubads().setTargeting("ctx_advertisers",t),U.pubads().setTargeting("ctx_creatives",n),U.pubads().setTargeting("ctx_line_items",r)}function z(e){var t=0,n=e.map(function(e){return e.forChildren}).filter(Boolean);n.length&&(t=1),U.pubads().setTagForChildDirectedTreatment(t)}function L(e){J(e,function(e){e.isRefresh||U.display(e.id)})}function V(e){e.forEach(function(e){if(e.hasDefaultPath&&!de[e.page]){var t="cns-ads-placeholder-1x1-"+e.page,n=document.createElement("div");n.id=t,n.style.fontSize=0,n.style.lineHeight=0,n.style.width=0,n.style.height=0,n.style.overflow="hidden",document.body.appendChild(n);var r=U.defineSlot(e.adUnitPath,[[1,1]],t);r.addService(U.pubads()),U.display(t),de[e.page]=r}})}function F(e){return new Promise(function(t,n){h(function(){var r,o,i,a,s=le[e];return s?(r=s,o=r&&r.id,i=r&&r.tag,(a=U.destroySlots([i]))?(delete le[e],void t()):void n(oe.cantDestroySlot(o))):void t()})})}var U,B,H,G=e("@condenast/atp-utl/objects/ready"),W=e("@condenast/atp-utl/objects/clone"),$=e("@condenast/atp-utl/type/isFunction"),J=e("@condenast/atp-utl/loop"),Q=e("@condenast/atp-utl/arrays/has"),K=e("@condenast/atp-utl/strings/startsWith"),Y=e("@condenast/atp-utl/strings/slugify"),Z=e("@condenast/atp-utl/type/isArray"),X=e("@condenast/atp-utl/dom/iframe").isFriendly,ee=e("./helpers/has-pii.js"),te=e("./helpers/contains-single-1x1"),ne=e("./helpers/build-tag-list"),re=e("@condenast/atp-utl/functions").bump,oe=e("../lang").err.slots.gpt,ie=e("../reporting"),ae=e("../dom"),se={},ce=200,ue=!0,le={},de={};t.exports={setup:n,request:r,destroySlot:F}},{"../dom":13,"../lang":19,"../reporting":23,"./helpers/build-tag-list":15,"./helpers/contains-single-1x1":16,"./helpers/has-pii.js":17,"@condenast/atp-utl/arrays/has":52,"@condenast/atp-utl/dom/iframe":58,"@condenast/atp-utl/functions":63,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/clone":66,"@condenast/atp-utl/objects/ready":71,"@condenast/atp-utl/strings/slugify":73,"@condenast/atp-utl/strings/startsWith":74,"@condenast/atp-utl/type/isArray":75,"@condenast/atp-utl/type/isFunction":83}],15:[function(e,t){function n(e,t,n){for(var r,o=[],i=0;i<t.length;i++){var a=t[i];a.out_of_page?r=a.tag:o.push(a.tag)}return o.unshift(r?r:n[e]),o}t.exports=n},{}],16:[function(e,t){"use strict";function n(e){return 1===e.length&&(e[0].sizes&&"1x1"===e[0].sizes[0]||e[0].out_of_page===!0)}t.exports=n},{}],17:[function(e,t){function n(e){var t=new RegExp("([a-zA-Z0-9._+-]+(@|%40|%2540)[a-zA-Z0-9._-]+.[a-zA-Z0-9._-]+)","gi");return t.test(e)}function r(e){var t=e.match(/3(?:[47]\d([ -]?)\d{4}(?:\1\d{4}){2}|0[0-5]\d{11}|[68]\d{12})|4(?:\d\d\d)?([ -]?)\d{4}(?:\2\d{4}){2}$|^6011([ -]?)\d{4}(?:\3\d{4}){2}|5[1-5]\d\d([ -]?)\d{4}(?:\4\d{4}){2}|2014\d{11}$|^2149\d{11}|2131\d{11}$|^1800\d{11}$|^3\d{15}/);return null!==t&&t.length?!0:!1}function o(e){var t=e.match(/((\d|([a-f]|[A-F])){2}:){5}(\d|([a-f]|[A-F])){2}/);return null!==t&&t.length?!0:!1}function i(e){var t=e.match(/((0|1[0-9]{0,2}|2[0-9]?|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)\.){3}(0|1[0-9]{0,2}|2[0-9]?|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)/);return null!==t&&t.length?!0:!1}function a(e){return e&&(n(e)||r(e)||o(e)||i(e))?!0:!1}t.exports=a},{}],18:[function(e,t){function n(e,t){if(m=t,h=e,j.compile({type:"info",regex:"/services.*js",name:"library_service"}),window.addEventListener("beforeunload",function(){j.compile({type:"info",name:"user_bounce",meta:{time:x()}})}),r())return j.compile({type:"info",name:"ads_killed",meta:{cause:"ap_noads_param"}}),Promise.resolve();var n=["interactive","complete"];return T(n,document.readyState)?(P=S.check(),o()):new Promise(function(e,t){document.addEventListener("DOMContentLoaded",function(){P=S.check(),o().then(e)["catch"](t)})})}function r(){var e=w();return!!e.ap_noads}function o(){return b(m.slot.types).then(i)}function i(e){var t=[];return t.push(R.setup({timeout:m.timers.plugin_requests_max})),t.push(C.setup({sets:m.slot.sets,onCreate:R.api.runHook.bind(null,"onPageCreate"),uris:m.slot.uris,adBlockStatus:P})),h.identifiers.overwrite=m.slot.__auid_one,t.push(E.setup({definitions:e,identifiers:h.identifiers,network:m.network,refreshDelay:m.timers.refresh_delay||0,request_vp_range:m.request_vp_range,refresh_vp_range:m.refresh_vp_range,onCreate:R.api.runHook.bind(null,"onSlotCreate"),onImpressionViewable:R.api.runHook.bind(null,"onSlotImpressionViewable"),onRenderEnd:R.api.runHook.bind(null,"onSlotRenderEnd"),onRenderStart:R.api.runHook.bind(null,"onSlotRenderStart"),onRequest:R.api.runHook.bind(null,"onSlotRequest"),onVisibilityChange:R.api.runHook.bind(null,"onSlotVisibilityChange")})),t.push(A.setup()),Promise.all(t)}function a(e){return r()?Promise.resolve():(R.api.add(e.name,{hooks:e.controller.hooks,code:e.controller.code,api:e.controller.api,version:e.version}),e.controller.setup(e.config),Promise.resolve())}function s(e){return v({mergeables:[e.global,e.property],merger:y})}function c(e){return _(e)?(p("ads.slots.getTypeDefinition"),E.api.getTypeDefinition({type:e})):!1}function u(e){return j.compile({type:"flow",name:"api.environment",meta:e}),C.api.environment.apply(null,arguments)}function l(e){return j.compile({type:"flow",name:"api.pages.create",meta:e}),C.api.create.apply(null,arguments)}function d(){return j.compile({type:"flow",name:"api.pages.destroy",meta:name}),C.api.destroy.apply(null,arguments)}function p(e){j.compile({type:"error",name:"deprecated_method_call",error:{msg:k.api.methodDeprecated(e)}})}function f(){return void 0===P.installed&&(P.installed=P.check()),P.installed}function g(){return void 0===P.blocked&&(P.blocked=P.check()),P.blocked}var m,h,v=e("@condenast/atp-utl/objects/merge"),y=e("./configs/merge"),b=e("./configs/hydrate"),_=e("@condenast/atp-utl/type/isString"),w=e("@condenast/atp-utl/parse"),x=e("@condenast/atp-utl/feature").performance.now,j=e("./reporting"),k=e("./lang").err,S=e("./utilities/adBlock"),T=e("@condenast/atp-utl/arrays/has"),C=e("./pages/manager"),E=e("./slots/manager"),R=e("./plugins/manager"),A=e("./gpt/gpt.js"),P={};t.exports={setup:n,merge:s,extend:a,api:{environment:u,pages:{get:C.api.get,create:l,destroy:d},slots:{get:p.bind(null,"ads.slots.get"),create:p.bind(null,"ads.slots.create"),destroy:p.bind(null,"ads.slots.destroy"),getTypeDefinition:c},adBlock:{installed:f,blocked:g}}}},{"./configs/hydrate":11,"./configs/merge":12,"./gpt/gpt.js":14,"./lang":19,"./pages/manager":21,"./plugins/manager":22,"./reporting":23,"./slots/manager":26,"./utilities/adBlock":28,"@condenast/atp-utl/arrays/has":52,"@condenast/atp-utl/feature":60,"@condenast/atp-utl/objects/merge":69,"@condenast/atp-utl/parse":72,"@condenast/atp-utl/type/isString":91}],19:[function(e,t){t.exports={err:{api:{methodDeprecated:function(e){return"[ cns ads ] The method "+e+" has been deprecated and will be removed in a future release. Please use ads.pages.get().slots instead of ads.slots."},methodRemoved:function(e){return"[ cns ads ] The method "+e+" has been removed. Please use ads.pages.get().slots instead of ads.slots."}},page:{slot:{alreadyExists:function(e,t){return"The slot '"+e+"' already exists with the '"+t+"' page.\nPlease change the slot name to be unique per page"}}},pages:{setEnvironment:function(){return"[ cns ads page manager ] A device and server type is required for setting up an environment"},hasNoType:function(){return"[ cns ads page manager ] A slot type property is required to add a new slot to a page"},hasNoTemplateType:function(){return'[ cns ads page manager ] A "templateType" or "template_type" property is required to create a new page'},doesNotExist:function(e){return'[ cns ads page manager ] The requested page "'+e+'" was requested but does not exist.'},slotNotFound:function(e,t){return'[ cns ads Page instance ] The requested slot "'+e+'" was requested but does not exist on page "'+t+'".'}},slots:{definition:{doesNotExist:function(e){return'[ cns ads slot manager ] The definition for the "'+e+'" slot was not found'},hasBadEl:function(e,t,n){return'[ cns ads slot manager ] At the time of staging the "'+e+'" ad slot in page template "'+t+'" the slot\'s el path was not found in the page el "'+n+'"'},tooManyEls:function(e,t){return'[ cns ads slot manager ] The DOM path "'+e+'" for slot type "'+t+'" results in more than one element, to ad slot series use the "every" slot rendering method instead.'},tooManyAdsInEl:function(e){return'[ cns ads slot manager ] The DOM path for slot type "'+e+'" already has a slot staged,  please choose a new location for the "'+e+'" slot type.'},canNotRenderStage:function(e,t,n){return'[ cns ads slot manager ] The slot instance for "'+e+'" could not be appended, either the injection point "'+t+'" is not on the page or the "'+n+'" method is not valid.'},noAppropriateSizes:function(e,t){return'[ cns ads slot manager ] No sizes were given for slot instance "'+e+'" on '+t+". Therefore the ad cannot be rendered."},invalidSlotEl:function(e){return'[ cns ads slot manager ] The slot instance for "'+e+'" does not have a slot el append point or is trying to append to the <html> element'},hasNoRender:function(e,t){return'[ cns ads slot manager ] The slot-type "'+e+'" in the '+t+" template did not have a render block in its instance definition"},slotDestroyFailed:function(e){return"[ cns ads slot manager ] The slot could not be destroyed: "+e}},instance:{alreadyStaged:function(e,t){return'[ cns ads Slot instance ] The slot instance for "'+e+'" on page "'+t+'" could not be staged because it was already staged';

}},gpt:{cantCreateSlot:function(){return"[cns ads slots gpt] GPT was unable to create the slot!"},requestFailed:function(e){return"[ cns ads slots gpt ] The request to create or refresh a GPT slot failed: "+e},haltPII:function(){return"[cns ads slots gpt] Personally identifiable information (PII) has been found in the URL, GPT has been halted!"},notReady:function(e){return"[cns ads slots gpt] GPT was unable to load: "+e},cantDestroySlot:function(e){return"[cns ads slots gpt] GPT was unable to destroy the slot with container Id: "+e},newTagError:function(e){return"[cns ads slots gpt] GPT was unable to create a tag: "+e},keyExceedsCharLimit:function(e){return"[cns ads slots gpt] key will not be added to GPT call. Key exceeds 20 character limit: "+e}},destroyedNotExist:function(e){return'The slot instance for "'+e+'" has been destroyed due to its supporting HTML structure being removed from the DOM.'},cantRequestNotStaged:function(e,t){return'The slot instance for "'+e+'" on page "'+t+'" could not be requested because it has not been staged'},invalidProperty:function(e){return'The slot instance for "'+e+'" does not have a valid "property" property'},invalidNetwork:function(e){return'The slot instance for "'+e+'" does not have a valid "network" property'},invalidIdentifiers:function(e){return'The slot instance for "'+e+'" does not have a valid "identifiers" property'},missingProperty:function(e,t){return'The configuration object passed into slot instance "'+e+'" is missing the "'+t+'" property'},singleRequestFailed:function(e,t){var n=t.message||t;return'Request for Slot with name "'+e+'" failed: '+n},linkedRequestFailed:function(e,t){var n=t.message||t;return'Request for Slots with link name "'+e+'" failed: '+n},slotNotFound:function(e){return'[ cns ads slot manager ] The requested slot "'+e+'" does not exist.'}},adBlock:{detected:function(){return"[ cns ads ] adBlock detected on page."}}}}},{}],20:[function(e,t){function n(e){return this.validate(e)?void this.setup(e):!1}function r(e,t){if(!e)return[];var n=e.toString().split(",");return n.filter(function(e){var n=parseInt(e,10);return h(t,n)})}var o=e("@condenast/atp-utl/functions").callbackHandler,i=e("@condenast/atp-utl/loop"),a=e("@condenast/atp-utl/objects/options"),s=e("@condenast/atp-utl/objects/merge"),c=e("@condenast/atp-utl/arrays/has"),u=e("@condenast/atp-utl/parse"),l=e("@condenast/atp-utl/type/isArray"),d=e("@condenast/atp-utl/type/isFunction"),p=e("@condenast/atp-utl/type/isObject"),f=e("@condenast/atp-utl/objects/keys"),g=e("@condenast/atp-utl/feature"),m=e("@condenast/atp-utl/functions").timeTravel,h=e("@condenast/atp-utl/functions").checkDate,v=e("../lang").err.pages,y=e("../reporting"),b=e("../slots/manager").api,_={},w=g.isStorageEnabled();n.prototype.validate=function(e){return e},n.prototype.setup=function(e){this.state=a(_,e),this.cache={},this.targeting={},this.setReferrers(),this.parseForcedURLTargeting(),this.parseQueryStringSpecialCases(),this.processTargeting(),this.setVisitsTargeting(),this.setBucketTargeting(),this.setVideoTargeting(e),this.setAdBlockTargeting(e),this.reportMetrics(),this.onCreatePluginHookHandler().then(function(){return this.batchCreateSlots()}.bind(this)).then(this.cacheTheSlots.bind(this))["catch"](function(e){y.compile({type:"error",name:"page_setup_flow_error",error:{msg:e.message,obj:e}})})},n.prototype.setReferrers=function(){var e=document.referrer.split("://")[1]||null,t=null,n=w&&sessionStorage.getItem("ctx_ses_soc")||null,r={fb:"facebook.com",tw:"t.co",rd:"reddit.com",pn:"pinterest.com",ig:"instagram.com",glp:"plus.url.google.com",tbl:"t.umblr.com",qq:"qzone.qq.com",we:"weibo.com",hb:"habbo.com",vk:"vk.com",rr:"renren.com",or:"orkut.google.com",sn:"snapchat.com"};e&&i(r,function(r,o){var i="(^|\\.)"+r;null!==e.match(i)&&(t=o,n=n||w&&sessionStorage.setItem("ctx_ses_soc",o))}),this.state.referrers={social:t,url:e,sessionSocialNetwork:n}},n.prototype.parseForcedURLTargeting=function(){function e(e){var t={},n=e.slice(1).slice(0,-1).split("][");return i(n,function(e){var n=e.split("|");t[n[0]]=n[1].split(",")}),t}var t=u(),n={},r={};t.CNS_ADS_targeting&&(n=e(t.CNS_ADS_targeting)),t.ao_test&&(r.ao_test=t.ao_test),t.ap_test&&(r.ap_test=t.ap_test),this.targeting=s({mergeables:[this.targeting,n,r]})},n.prototype.setVisitsTargeting=function(){if(w){var e=(new Date).getTime(),t=m(e,1),n=m(e,30);sessionStorage.setItem("session-visits",parseInt(sessionStorage.getItem("session-visits"),10)+1||1);var o=sessionStorage.getItem("session-visits"),i=sessionStorage.getItem("new-session"),a=localStorage.getItem("session-visit-dates"),s=localStorage.getItem("total-visits");i||(sessionStorage.setItem("new-session",!0),a=a?a+","+e:e);var c=s?s+","+e:e,u=r(c,t),l=r(c,n),d=r(a,n);localStorage.setItem("total-visits",l.join(",")),localStorage.setItem("session-visit-dates",d.join(",")),this.targeting.sqt=o,this.targeting.sqt24hrs=u.length,this.targeting.usr_pvc_bs=o,this.targeting.usr_pvc_24hr=u.length,this.targeting.usr_pvc_30d=l.length,this.targeting.usr_svc_30d=d.length}},n.prototype.setBucketTargeting=function(){this.targeting.usr_bkt_eva=w&&localStorage.getItem("usr_bkt_eva")||null,this.targeting.usr_bkt_ses=w&&sessionStorage.getItem("usr_bkt_ses")||null,this.targeting.usr_bkt_pv=Math.floor(100*Math.random())+1},n.prototype.setVideoTargeting=function(e){this.targeting.ctx_video=e.video||!1},n.prototype.setAdBlockTargeting=function(e){e.adBlockStatus.blocked&&(this.targeting.ctx_adb_blocked=1),e.adBlockStatus.installed&&(this.targeting.ctx_adb_installed=1)},n.prototype.reportMetrics=function(){y.compile({type:"info",name:"page_created",meta:y.helpers.getReportingData(this.state)})},n.prototype.parseQueryStringSpecialCases=function(){var e=["mbid"];this.targeting=this.targeting||{},i(u(),function(t,n){c(e,n)&&(this.targeting[n]=t,this.targeting["url_"+n]=t)}.bind(this))},n.prototype.processTargeting=function(){var e="cnt",t={};i(this.state.targeting,function(n,r){t[e+"_"+r]=n}),this.targeting=s({mergeables:[this.targeting,t]})},n.prototype.onCreatePluginHookHandler=function(){var e=this.state,t={targeting:this.targeting,meta:{property:e.property,templateType:e.templateType,channel:e.channel,subChannel:e.subChannel,slug:e.slug}};return o({func:e.onCreate,payload:t})},n.prototype.batchCreateSlots=function(e,t){return b.batch.create({environment:this.state.environment,page:{slug:this.state.slug,templateType:this.state.templateType,forChildren:this.state.forChildren,channel:this.state.channel,subChannel:this.state.subChannel,targeting:this.targeting,referrers:this.state.referrers,el:this.state.el},onSlotRender:t||this.state.onSlotRender,contentURI:this.state.contentURI,slotList:e||this.state.slots})},n.prototype.addSlot=function(e,t){if(!e||p(e)&&!e.type)return void y.compile({type:"warn",name:"page_ad_slot_has_no_type_warning",error:{msg:v.hasNoType()}});var n=p(e)&&e.type,r=p(e)&&e.overwrites,o=b.modifySlotType({type:n?e.type:e,overwrites:r?e.overwrites:t,page:this.state.slug,slug:this.state.slug,channel:this.state.channel,subChannel:this.state.subChannel,template:this.state.templateType}),i=this.batchCreateSlots([o],this.onSlotRenderHandler.bind(this,o.onSlotRender));this.cacheTheSlots(i)},n.prototype.onSlotRenderHandler=function(e,t){this.state.onSlotRender&&this.state.onSlotRender(t),e&&e(t)},n.prototype.cacheTheSlots=function(e){var t=[];return i(e,function(e){t.push({id:e.state.id,type:e.state.type,name:e.state.name,groups:e.state.definition.groups,adUnitPath:e.state.adUnitPath});var n="_"+e.getId();this.cache[n]=e}.bind(this)),this.onPageSlotsAddedHandler(t),Promise.resolve()},n.prototype.onPageSlotsAddedHandler=function(e){d(this.state.onPageSlotsAdded)&&this.state.onPageSlotsAdded({slots:e})},n.prototype.filter=function(e,t){return e?void i(this.cache,function(n,r){var o=f(e)[0],a=e[o];l(a)&&("types"===o&&i(a,function(e){e===n.getType()&&t(n,r)}),"names"===o&&i(a,function(e){e===n.getName()&&t(n,r)}),"groups"===o&&i(a,function(e){l(n.getGroups())&&c(n.getGroups(),e)&&t(n,r)}))}):void i(this.cache,function(e,n){t(e,n)})},n.prototype.destroy=function(e){this.filter(e,function(e,t){e.destroy(),this.cache[t]=null,delete this.cache[t]}.bind(this))},n.prototype.refresh=function(e){this.filter(e,function(e){e.refresh()})},n.prototype.getSlot=function(e){var t,n=this,r=n.state;return i(n.cache,function(n){var r=n.state.name;r===e&&(t=n)}),t?{destroy:function(){y.compile({type:"flow",name:"api.pages.get(slug).slots.get(name).destroy",meta:e}),n.destroy({names:[e]})},refresh:function(){y.compile({type:"flow",name:"api.pages.get(slug).slots.get(name).refresh",meta:e}),n.refresh({names:[e]})}}:(y.compile({type:"error",name:"can_not_find_slot_on_page",error:{msg:v.slotNotFound(e,r.slug)}}),!1)},t.exports=n},{"../lang":19,"../reporting":23,"../slots/manager":26,"@condenast/atp-utl/arrays/has":52,"@condenast/atp-utl/feature":60,"@condenast/atp-utl/functions":63,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/keys":68,"@condenast/atp-utl/objects/merge":69,"@condenast/atp-utl/objects/options":70,"@condenast/atp-utl/parse":72,"@condenast/atp-utl/type/isArray":75,"@condenast/atp-utl/type/isFunction":83,"@condenast/atp-utl/type/isObject":89}],21:[function(e,t){function n(e){return f=h(k,e),g=!0,Promise.resolve()}function r(e){if(!g)return!1;var t=_(e,"-"),n=S[t];return n?u(n):(b.compile({type:"error",name:"can_not_find_page",error:{msg:m.doesNotExist(e)}}),!1)}function o(e){if(!g)return!1;if(!e.template_type&&!e.templateType)return b.compile({type:"error",name:"no_page_template_type",error:{msg:m.hasNoTemplateType()}}),!1;e.environment=T,e.property=f.property,e.onCreate=f.onCreate,e.adBlockStatus=f.adBlockStatus,i(),a(e),c(e),e.slots=w(f.sets,{overwrites:e.slots,slug:e.slug,channel:e.channel,subChannel:e.subChannel,templateType:e.templateType});var t=e.subChannel?e.channel+"/"+e.subChannel:e.channel;e.contentURI=e.contentURI||t;var n=new j(e);return n?(S[e.slug]=n,u(n)):Promise.reject()}function i(){var e=x&&localStorage.getItem("usr_bkt_eva")||null,t=sessionStorage.getItem("usr_bkt_ses")||null;x&&!e&&localStorage.setItem("usr_bkt_eva",Math.floor(100*Math.random())+1),x&&!t&&sessionStorage.setItem("usr_bkt_ses",Math.floor(100*Math.random())+1)}function a(e){s(e,"template_type","templateType"),s(e,"content_uri","contentURI"),s(e,"sub_channel","subChannel"),s(e,"for_children","forChildren")}function s(e,t,n){e[n]=e[t]||e[n],e[t]=null,delete e[t]}function c(e){y(e,function(t,n){"el"!==n&&(e[n]=_(t,"_"))}),e.slug=_(e.slug,"-")}function u(e){function t(t,n){return b.compile({type:"flow",name:"api.pages.get(slug).slots.add",meta:{slotType:t,overwrites:n}}),e.addSlot.apply(e,arguments)}function n(t){return b.compile({type:"flow",name:"api.pages.get(slug).slots.refresh",meta:t}),e.refresh.apply(e,arguments)}function r(t){return b.compile({type:"flow",name:"api.pages.get(slug).slots.destroy",meta:t}),e.destroy.apply(e,arguments)}function o(){return b.compile({type:"flow",name:"api.pages.get(slug).destroy",meta:"undefined"}),d.apply(e)}var i={slots:{add:t,get:e.getSlot.bind(e),refresh:n,destroy:r},addSlot:t,destroy:o};return i}function l(e){return g?e&&e.server&&e.device?(b.setup(e),T=e,Promise.resolve()):Promise.reject(m.setEnvironment()):!1}function d(){if(this.state){var e=this.state.slug;return this.destroy(),S[e]=null,void delete S[e]}}function p(){g&&y(S,function(e,t){e.destroy(),S[t]=null,delete S[t]})}var f,g,m=e("../lang").err.pages,h=e("@condenast/atp-utl/objects/options"),v=e("@condenast/atp-utl/feature"),y=e("@condenast/atp-utl/loop"),b=e("../reporting"),_=e("@condenast/atp-utl/strings/slugify"),w=e("../utilities/typeVariant").getVariantFromURI,x=v.isStorageEnabled(),j=e("./Page"),k={},S={},T={server:"staging",device:"desktop"};t.exports={setup:n,api:{get:r,create:o,destroy:p,environment:l}}},{"../lang":19,"../reporting":23,"../utilities/typeVariant":29,"./Page":20,"@condenast/atp-utl/feature":60,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/options":70,"@condenast/atp-utl/strings/slugify":73}],22:[function(e,t){function n(e){return d=e,p=!0,Promise.resolve()}function r(e,t){p&&(b[e]=t)}function o(e,t){if(!p)return!1;var n,r=s(t);return"onSlotRenderStart"===e&&c(t.dom,r),n=Object.keys(r).reduce(function(n,o){var s=r[o],c=g(t)&&s&&s.hooks[e];if(!c)return n;var p=u(t);l(s.code,t);var f=p(s.code),m=d.timeout?d.timeout:1e3,h=Promise.race([i(f,s,c,e),a(m,s,e)]);return n.push(h),n},[]),Promise.all(n)["catch"](function(e){h.compile({type:"warn",name:"plugin_manager_promise_flow_failed",error:{msg:e.message,obj:e}})}).then(function(){return null})}function i(e,t,n,r){return new Promise(function(o){function i(){h.compile({type:"info",name:"plugin_hook_complete",meta:{plugin_name:t.code,version:t.version,hook_name:r,time_to_complete:s?m()-s:null}}),o()}function a(e){h.compile({type:"warn",name:"plugin_hook_"+t.code+"_failed",error:{msg:e.message,obj:e}}),o()}var s=m();e.process={done:i,failed:a},n.call(null,e)})}function a(e,t,n){return new Promise(function(r){setTimeout(function(){h.compile({type:"info",name:"plugin_hook_timeout",meta:{plugin_name:t.code,version:t.version,hook_name:n}}),r()},e)})}function s(e){function t(e,t){return Object.keys(e).reduce(function(n,r){var o=e[r];return t(r,o)&&(n[r]=o),n},{})}if(!e.pluginRules)return b;var n=e.pluginRules;return n.blockAll===!0?{}:v(n.allow)&&n.allow.length?t(b,function(e,t){return y(n.allow,t.code.toLowerCase())||y(n.allow,e.toLowerCase())}):v(n.ignore)?t(b,function(e,t){return!y(n.ignore,t.code.toLowerCase())&&!y(n.ignore,e.toLowerCase())}):b}function c(e,t){function n(e,t){f(e.api,function(n,o){r[t][o]=function(){e.api[o].apply(null,arguments)}})}if(t){var r={};f(t,function(e,t){r[t]={},e.api&&n(e,t)}),e.window.cns_ads&&(e.window.cns_ads.plugins=r)}}function u(e){return function(t){var n={};return e.targeting&&(n.addTargeting=function(n,r){var o=_+"_"+t+"_"+n;"rub"===t&&(o=n),e.targeting[o]=r}),e.meta&&(n.getMeta=function(){return e.meta}),e.dom&&(n.getDOM=function(){return e.dom}),e.render&&(n.getRender=function(){return e.render}),n}}function l(e,t){"cst"!==e&&(t.render=null)}var d,p,f=e("@condenast/atp-utl/loop"),g=e("@condenast/atp-utl/type/isObject"),m=e("@condenast/atp-utl/feature").performance.now,h=e("../reporting"),v=e("@condenast/atp-utl/type/isArray"),y=e("@condenast/atp-utl/arrays/has"),b={},_="vnd";t.exports={setup:n,api:{add:r,runHook:o}}},{"../reporting":23,"@condenast/atp-utl/arrays/has":52,"@condenast/atp-utl/feature":60,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/type/isArray":75,"@condenast/atp-utl/type/isObject":89}],23:[function(e,t){function n(e){h=e.server,v=e.device,T=!0,r()}function r(){y(S,function(e){o(e)})}function o(e){T?(e.environment=h,e.meta.device=v,s(e),c(e.type)):S.push(e)}function i(e){var t=a(e),n=t.meta||{};n.ver_cns_ads=j;var r=t.regex?u(t.regex):n,i={campaign:k,error:t.error,meta:r,name:t.name,type:t.type};o(i)}function a(e){if(!e.meta||!e.meta.plugin_name||!e.meta.version)return e;var t="ver_"+e.meta.plugin_name.toLowerCase();return e.meta[t]=e.meta.version,delete e.meta.version,e}function s(e){cns.async("metrics",function(t){t.emit(e)})}function c(e){"error"!==e||C||(console.error("An error has occurred in CNS Ads, use \"cns.log.on('error');\" or \"cns.log.on('all');\" to see the log"),C=!0)}function u(e){if(!b())return!1;var t=window.performance.getEntries(),n=new RegExp(e),r=t.filter(l(n))[0];return r?{requestStart:r.startTime,requestEnd:r.responseEnd,init:_()}:!1}function l(e){return function(t){return e.test(t.name)}}function d(){var e=0;return y(document.images,function(t){var n=t.width*t.height;e+=n}),e}function p(e,t){var n=e.cns_ads?e.cns_ads.tracker:{};return w.getData(e,{getErrors:n.getErrors,cutoff:t})}function f(e){var t=!!e.page,n=d(),r={content_uri:e.contentURI,image_avg_surface:n&&n/document.images.length,image_count:document.images.length,image_surface:n,server:e.environment&&e.environment.server,usr_bkt_eva:x&&window.localStorage.getItem("usr_bkt_eva"),usr_bkt_ses:x&&window.sessionStorage.getItem("usr_bkt_ses"),vp_height:document.documentElement.clientHeight,vp_width:document.documentElement.clientWidth};return t&&m(e,r)||g(e,r)}function g(e,t){return t.channel=e.channel,t.referrers_social=e.referrers&&e.referrers.social,t.referrers_url=e.referrers&&e.referrers.url,t.slots_count=e.slots&&e.slots.length,t.sub_channel=e.subChannel,t.tags=e.targeting&&e.targeting.tags&&[].concat(e.targeting.tags).join(","),t.template=e.templateType,t}function m(e,t){return t.channel=e.page.channel,t.companion=e.definition.companion,t.ctx_template=e.page.templateType,t.id=e.id,t.instance=e.name.split("_").pop(),t.name=e.name,t.out_of_page=("_out_of_page"===e.definition.type).toString(),t.position_fold=t.vp_height-e.els.container.offsetTop>0?"atf":"btf",t.position_xy=e.els.container.offsetTop+"x"+e.els.container.offsetLeft,t.referrers_social=e.page.referrers.social,t.referrers_url=e.page.referrers.url,t.refreshed=e.report.isRefresh,t.request_number=e.context_targeting&&e.context_targeting.ctx_slot_rn||0,t.session_social_network=e.page.referrers.sessionSocialNetwork,t.sub_channel=e.page.subChannel,t.tags=e.page.targeting.cnt_tags&&[].concat(e.page.targeting.cnt_tags).join(","),t.template=e.page.templateType,t.type=e.type,t}var h,v,y=e("@condenast/atp-utl/loop"),b=e("@condenast/atp-utl/feature").isGetEntriesEnabled,_=e("@condenast/atp-utl/feature").performance.now,w=e("./tracker"),x=e("@condenast/atp-utl/feature").isStorageEnabled(),j=e("../../package.json").version,k="cns_ads",S=[],T=!1,C=!1;t.exports={setup:n,compile:i,helpers:{getImageArea:d,getTrackerData:p,getReportingData:f}}},{"../../package.json":30,"./tracker":24,"@condenast/atp-utl/feature":60,"@condenast/atp-utl/loop":65}],24:[function(e,t){function n(e){var t=e.match(/\.([^\.\/\?]+)(?:$|\?)/);return t?t[1].toLowerCase():null}function r(e,t,r){var o=e.name,i=r.threshold||.001;if(r.cutoff&&e.startTime<r.cutoff-i)return!1;if(t.initiator&&e.initiatorType===t.initiator)return!0;var a=n(o);return-1!==t.extensions.indexOf(a)}function o(e,t,n){var o={},i=e.performance.getEntries();return g(i,function(e){var i=e.name,a=r(e,t,n);a&&(o[i]=e)}),o}function i(e,t){var n=e[t.attr];return n?!0:!1}function a(e,t){var n={};if(!t.key)return n;var r=e.document[t.key];return g(r,function(e){var r=e[t.attr],o=i(e,t);o&&(n[r]=e)}),n}function s(e){var t={},n=e.document.getElementsByTagName("iframe");return g(n,function(e){var n=e.src;n&&(t[n]=e)}),t}function c(e){return m(e).length}function u(e,t,n){var r={frames:s(e)},i=t?a:o;return g(v,function(t){r[t.type]=i(e,t,n)}),r}function l(e){var t={js:0,resource:{js:0,css:0,image:0}};return g(e,function(e){if(e.target&&e.target.tagName){var n=e.target.tagName,r=y[n];r&&t.resource[r]++}else t.js++}),t}function d(e){var t={},n=e.performance.getEntries();if(n.length>0){var r=n[n.length-1];t.latestStart=r.startTime}return t}function p(e){var t=l(e.errors),n=t.resource,r=c(e.files.js),o=c(e.files.css),i=c(e.files.images),a=c(e.files.fonts),s=c(e.files.frames),u={fallback:e.fallback,files:{js:r,css:o,images:i,fonts:a,frames:s},raw:{errors:e.errors,files:e.files}};return e.fallback||(u.files.js+=n.js,u.files.css+=n.css,u.files.images+=n.image,u.files.latestStart=e.files.latestStart,u.performance=d(e.win)),u.errors=e.errors?t:{untracked:!0},u}function f(e,t){var n=t||{},r=n.fallback||!h(),o=u(e,r,n),i=n.getErrors?n.getErrors():null,a=p({win:e,files:o,errors:i,fallback:r});return a}var g=e("@condenast/atp-utl/loop"),m=e("@condenast/atp-utl/objects/keys"),h=e("@condenast/atp-utl/feature").isGetEntriesEnabled,v={js:{type:"js",initator:"script",extensions:["js"],key:"scripts",attr:"src"},css:{type:"css",extensions:["css"],key:"styleSheets",attr:"href"},images:{type:"images",initiator:"img",extensions:["jpg","jpeg","jpe","jif","jfif","jfi","gif","png","webp","tiff","tif","svg","svgz","bmp","dib","ico"],key:"images",attr:"src"},fonts:{type:"fonts",extensions:["ttf","otf","eot","woff","woff2"]}},y={img:"image",IMG:"image",link:"css",LINK:"css",script:"js",SCRIPT:"js"};t.exports={getData:f}},{"@condenast/atp-utl/feature":60,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/keys":68}],25:[function(e,t){function n(e){this.setup(e)}function r(e){var t=e.split("/");return s(t,function(e,n){t[n]=p(e)}),t.join("/")}var o=e("@condenast/atp-utl/objects/merge"),i=e("@condenast/atp-utl/functions").callbackHandler,a=e("@condenast/atp-utl/animations"),s=e("@condenast/atp-utl/loop"),c=e("@condenast/atp-utl/parse"),u=e("@condenast/atp-utl/type/isString"),l=e("@condenast/atp-utl/type/isNumber"),d=e("@condenast/atp-utl/arrays/has"),p=e("@condenast/atp-utl/strings/slugify"),f=e("@condenast/atp-utl/dom/iframe").isFriendly,g=e("@condenast/atp-utl/feature"),m=g.performance.now,h=e("@condenast/atp-utl/functions").bump,v=e("../dom"),y=e("../lang").err.slots,b=e("../reporting"),_=e("@condenast/atp-utl/visibility").isHidden,w=e("@condenast/atp-utl/functions").generateRandomID,x=e("../utilities/typeVariant").getVariantFromURI,j=1e3;n.prototype.setup=function(e){this.createStateObject(e),this.stage().then(this.addEventListeners.bind(this)).then(this.startRequestabilityLoop.bind(this))["catch"](function(e){b.compile({type:"error",name:"slot_setup_stage_flow",error:{msg:e.message,obj:e}})})},n.prototype.createStateObject=function(e){var t=this.state=e;this.setHighImpactState(),t.GET=c(),t.els={},t.report={created:m(),frameContext:{}},t.creative={isEmpty:!1,isRendered:!1,ids:{}},t.request={inProgress:!1,timestamp:!1},t.ui={hasBeenStaged:!1,isInVPRange:!1},t.viewability={hasBeenViewed:!1,hasBeenGPTViewed:!1,hasBeenMOATViewed:!1,isMOATPresent:!1,inViewPercentage:0},t.completedCheckInterval=t.completedCheckInterval||j,t.plugins={allow:e.definition.plugins,ignore:e.definition.ignore_plugins,blockAll:e.definition.ignore_all_plugins},this.setRefreshBehavior(t.definition.refresh),this.generateIds(),this.generateTargeting(),this.generateAttributes(),this.generateAdPath(e)},n.prototype.setHighImpactState=function(){var e=this.state,t=e.definition.highImpact&&e.definition.highImpact.interval||{},n=t.recurring,r=t.at;switch(n){case"static":e.canBeHighImpact=e.instanceNumber+1===r;break;case"leading":e.canBeHighImpact=e.instanceNumber%r===0;break;case void 0:e.canBeHighImpact=!0;break;default:e.canBeHighImpact=(e.instanceNumber+1)%r===0}},n.prototype.setRefreshBehavior=function(e){var t=this.state,n=t.refreshDelay;t.request.onlyOnce=e===!1,t.request.delay=l(e)?e:n},n.prototype.generateIds=function(){var e=this.state,t=e.definition.id,n=Date.now()+w(),r=t&&u(t)?t:null,o=t?t[e.environment.device]:null,i="cns_ads_"+n+"_"+e.name,a=r||o,s=v.get("#"+a);e.id=a||n,e.ids={dom_prefix:i,stage:i+"_stage",container:a&&!s?a:i+"_container"}},n.prototype.generateAttributes=function(){var e=this.state,t=e.definition.data,n=t&&t[e.environment.device]||t;e.data={},n&&s(n,function(t,n){e.data["data-"+n]=t})},n.prototype.generateTargeting=function(){this.setEnvTargeting(),this.setContextTargeting(),this.setReportingDataTargeting(),this.setPageTargeting(),this.setSlotTargeting()},n.prototype.generateAdPath=function(e){var t="dart",n=this.state,o=e.contentURI,i=e.definition.suffix,a=o?"/"+r(o):"",s=e.identifiers.overwrite,c=s+"."+p(i);n.adUnitPath=e.network+"/"+c+a,n.hasDefaultPath=i===t},n.prototype.setEnvTargeting=function(){var e=this.state;e.env_targeting={env_device_type:e.environment.device,env_server:e.environment.server}},n.prototype.setContextTargeting=function(){var e=this.state;e.context_targeting={ctx_referrer:e.page.referrers.url,ctx_ref_url:e.page.referrers.url,ctx_soc_net:e.page.referrers.social,ctx_ref_soc:e.page.referrers.social,ctx_ses_soc:e.page.referrers.sessionSocialNetwork,ctx_template:e.page.templateType,ctx_page_slug:e.page.slug,ctx_page_channel:e.page.channel,ctx_page_sub_channel:e.page.subChannel,ctx_slot_name:e.name,ctx_slot_instance:e.name,ctx_slot_type:e.type,ctx_slot_rn:0,ctx_slot_manual_rn:0,ctx_video:e.page.targeting.ctx_video}},n.prototype.setReportingDataTargeting=function(){var e=this.state,t=e.environment.device,n=e.page.templateType;e.reporting_data_targeting={rdt_device_template:t+"_"+n}},n.prototype.setSlotTargeting=function(){var e=this.state,t={ctx_slot_name:e.context_targeting.ctx_slot_name,ctx_slot_instance:e.context_targeting.ctx_slot_instance,ctx_slot_type:e.context_targeting.ctx_slot_type,ctx_slot_manual_rn:e.context_targeting.ctx_slot_manual_rn,ctx_slot_rn:e.context_targeting.ctx_slot_rn};e.slot_targeting=o({mergeables:[t,e.onRequest_targeting]})},n.prototype.setPageTargeting=function(){var e=this.state,t={ctx_referrer:e.context_targeting.ctx_referrer,ctx_ref_url:e.context_targeting.ctx_ref_url,ctx_soc_net:e.context_targeting.ctx_soc_net,ctx_ref_soc:e.context_targeting.ctx_ref_soc,ctx_ses_soc:e.context_targeting.ctx_ses_soc,ctx_template:e.context_targeting.ctx_template,ctx_page_slug:e.context_targeting.ctx_page_slug,ctx_page_channel:e.context_targeting.ctx_page_channel,ctx_page_sub_channel:e.context_targeting.ctx_page_sub_channel,ctx_video:e.context_targeting.ctx_video};e.page_targeting=o({mergeables:[e.env_targeting,e.reporting_data_targeting,e.page.targeting,t]})},n.prototype.stage=function(){var e=this.state,t=e.definition.render.slot.method,n=e.definition.render.slot.el;return this.validateStageability(n,t)?this.appendStage(n,t).then(this.onStaged.bind(this))["catch"](function(e){b.log.error({type:"error",name:"slot_stage_flow",error:{msg:e.message,obj:e}})}):Promise.reject(y.definition.canNotRenderStage(e.name,e.definition.render.slot.el,t))},n.prototype.validateStageability=function(e,t){var n=this.state;if(n.ui.hasBeenStaged)return b.compile({type:"error",name:"slot_validate_stageability",error:{msg:y.instance.alreadyStaged(n.name,n.page.slug)}}),!1;var r="function"==typeof v[t],o=document.body.contains(e),i=o&&r;return i?!0:!1},n.prototype.appendStage=function(e,t){return new Promise(function(n,r){var o=this.state;return this.createStageEl(),o.els.stage&&e&&t?(v[t](o.els.stage,e),o.ui.hasBeenStaged=!0,void h(n)):void r()}.bind(this))},n.prototype.createStageEl=function(){var e=this.state,t=p(e.name.toLowerCase(),"-"),n=p(e.type.toLowerCase(),"-"),r="cns-ads-slot-type-",o=document.createElement("div"),i="cns-ads-stage",a=r+n,s=r+t,c=this.createContainerEl();return o.setAttribute("data-name",e.name),o.setAttribute("data-slot-type",e.type),o.id=e.ids.stage,o.classList.add(i),o.classList.add(a),o.classList.add(s),this.setDefaultInlineStyles(o),"_out_of_page"===e.definition.type&&(this.state.isHidden=!0,o.style.height=0,o.style.width=0,o.style.padding=0,o.style.margin=0,o.classList.add("cns-ads-slot-type-out-of-page")),o.appendChild(c),e.els.stage=o,o},n.prototype.createContainerEl=function(){var e=this.state,t=document.createElement("div"),n="cns-ads-container";return t.classList.add(n),t.id=e.ids.container,this.setContainerDataAttrs(t),this.setDefaultInlineStyles(t),t.style.margin="0 auto",t.style.boxSizing="content-box",e.els.container=t,t},n.prototype.setContainerDataAttrs=function(e){var t=this.state.data;Object.keys(t)&&s(t,function(t,n){e.setAttribute(n,t)})},n.prototype.setDefaultInlineStyles=function(e){e.style.fontSize=0,e.style.lineHeight=0,e.style.overflow="hidden"},n.prototype.onStaged=function(){var e=this.state,t={targeting:e.slot_targeting,pluginRules:e.plugins};return e.report.staged=m(),b.compile({type:"info",name:"slot_staged",meta:b.helpers.getReportingData(this.state)}),i({func:e.onStaged,payload:t})},n.prototype.isInDom=function(){return document.documentElement.contains(this.state.els.container)},n.prototype.checkRequestability=function(e){var t=this.state,n=t.request,r=t.viewability;if(!this.isInDom())return b.compile({type:"error",name:"destroy_called_slot_not_in_dom",error:{msg:y.destroyedNotExist(t.name)}}),this.destroy(),!1;var o=_(t.els.container)&&!t.canBeHidden,i=this.isFirstRequest(),a=!!e,s=t.isUserInteracting&&!a,c=5e3,u=n.timestamp&&Date.now()>n.timestamp+c,l=n.timestamp&&Date.now()>n.timestamp+n.delay,d=a||r.hasBeenViewed||!r.hasBeenViewed&&u,p=n.inProgress,f=!i&&this.requestOnlyOnce()||o,g=!f&&d&&(l||a)||i&&!o,m=!p&&g&&this.isInVPRange()&&!s;return m&&(l&&window.googletag.cmd.push(function(){window.googletag.pubads().updateCorrelator()}),this.setPageTargeting(),this.request()),m},n.prototype.isInVPRange=function(){var e=this.state,t=e.request.timestamp?e.refresh_vp_range:e.request_vp_range,n=x(t,e.page)[e.environment.device];if(e.els.container){var r=-n,o=document.documentElement.clientHeight+n,i=-n,a=document.documentElement.clientWidth+n,s=e.els.container.getBoundingClientRect();return e.isInViewportRange=s.top<o&&s.bottom>r&&s.left<a&&s.right>i||!e.definition.request_in_vp_only,e.isInViewportRange&&!e.report.inViewport&&(e.report.inViewport=m()),e.isInViewportRange}return!1},n.prototype.request=function(){var e=this.state,t=e.id;return e.ui.hasBeenStaged?void e.onRequest(t):(b.compile({type:"error",name:"slot_request_not_staged",error:{msg:y.cantRequestNotStaged(e.name,e.page.slug)}}),void(e.request.inProgress=!1))},n.prototype.prepareForRequest=function(){var e=this.state,t=e.identifiers.human_slug,n=e.identifiers.overwrite,r=n||t,o=e.context_targeting.ctx_slot_rn+e.context_targeting.ctx_slot_manual_rn;this.setPreRequestSlotState(),this.reportTrackerData(),this.reportRequestData();var i=e.onPluginHook.bind(null,{targeting:e.onRequest_targeting,meta:{type:e.definition.type,sizes:e.definition.sizes&&e.definition.sizes[e.environment.device],id:e.ids.container,network:e.network,baseUA:r,requestNumber:o},pluginRules:e.plugins});return Promise.resolve(i()).then(this.setSlotTargeting.bind(this))},n.prototype.getRequestData=function(){function e(){return r&&!t.canBeHighImpact?r.filter(function(e){return-1===o.indexOf(e)}):r}var t=this.state,n=!!t.definition.sizes,r=n?t.definition.sizes[t.environment.device]:void 0,o=t.definition.highImpact&&t.definition.highImpact.sizes||[],i=e();return{name:t.name,out_of_page:"_out_of_page"===t.type,id:t.ids.container,forChildren:t.page.forChildren,companion:t.definition.companion,stage:t.els.stage,page:t.page.slug,sizes:i,slotTargeting:t.slot_targeting,pageTargeting:t.page_targeting,adUnitPath:t.adUnitPath,hasDefaultPath:t.hasDefaultPath,onRenderStart:this.onRenderStart.bind(this),onImpressionViewable:this.onImpressionViewable.bind(this),onVisibilityChange:this.onVisibilityChange.bind(this),onMOATViewableEvent:this.onMOATViewable.bind(this),onMOATPresent:this.onMOATPresent.bind(this),onIDCheck:this.onIDCheck.bind(this)}},n.prototype.reportTrackerData=function(){var e=this.state;if(e.report.rendered){var t=this.getTrackerData(),n=this.getCreativeMetrics();n.pageLoad_to_requested=e.report.requested,n.pageLoad_to_in_viewport=e.report.inViewport,b.compile({type:"info",name:"slot_collected",meta:o({mergeables:[n,t]})})}},n.prototype.getTrackerData=function(){var e=this.state,t={};if(null===m())return t;var n=e.els.iframe;if(n&&f(n)){var r=n.contentWindow,o=e.report.frameRequested||0,i=b.helpers.getTrackerData(r,o),a=i.errors.untracked;t.errors_untracked=a,a||(t.errors_js=i.errors.js,t.errors_resource_js=i.errors.resource.js,t.errors_resource_css=i.errors.resource.css,t.errors_resource_image=i.errors.resource.image),t.files_js=i.files.js,t.files_css=i.files.css,t.files_images=i.files.images,t.files_fonts=i.files.fonts,t.files_frames=i.files.frames,t.files_fallback=i.fallback}return t},n.prototype.setPreRequestSlotState=function(){var e=this.state,t=e.els.iframe;e.onRequest_targeting={},e.report.isRefresh=!0,e.request.inProgress=!0,e.creative.isRendered=!1,e.viewability.hasBeenGPTViewed=!1,e.viewability.hasBeenMOATViewed=!1,e.request.timestamp=Date.now(),e.report.requested=m(),t&&f(t)&&(e.report.frameRequested=m(t.contentWindow))},n.prototype.reportRequestData=function(){var e=this.state,t=b.helpers.getReportingData(this.state);t.pageLoad_to_requested=e.report.requested,t.pageLoad_to_in_viewport=e.report.inViewport,b.compile({type:"info",name:"slot_requested",meta:t})},n.prototype.onImpressionViewable=function(){var e=this.state;e.viewability.hasBeenGPTViewed=!0,e.viewability.hasBeenViewed=!0,
e.report.impressionViewable=m()},n.prototype.onVisibilityChange=function(e){var t=this.state,n=t.viewability.isViewable||!1,r=!!e.inViewPercentage;if(r!==n){var o=b.helpers.getReportingData(this.state);if(t.report.now=m(),null!==t.report.now&&(t.report.in_viewport_to_visible_change=m()-t.report.inViewport,t.report.impression_viewable_to_visible_change=m()-t.report.impressionViewable||"impression not viewable"),o.visible_percentage=e.inViewPercentage.toString(),o.visible=r.toString(),t.viewability.inViewPercentage=e.inViewPercentage,t.viewability.isViewable=!!e.inViewPercentage,o.in_viewport_to_visible_change=t.report.in_viewport_to_visible_change,o.impression_viewable_to_visible_change=t.report.impression_viewable_to_visible_change,window.data=o,t.creative.ids&&t.creative.ids.advertiserId){var i=this.getCreativeMetrics();s(Object.keys(i),function(e){o[e]=i[e]})}b.compile({type:"info",name:"slot_visibility_change",meta:o})}},n.prototype.onMOATViewable=function(){var e=this.state;e.viewability.hasBeenMOATViewed=!0,e.viewability.hasBeenViewed=!0},n.prototype.onMOATPresent=function(){var e=this.state;e.viewability.isMOATPresent=!0},n.prototype.onIDCheck=function(){var e=this.state;return e.creative.ids},n.prototype.startRequestabilityLoop=function(){var e=5;return this.checkRequestability(),this.state.fpsLoop=a(this.checkRequestability.bind(this),e),Promise.resolve()},n.prototype.addEventListeners=function(){var e,t=this.state.els.container;return this.userOffAd=function(){this.state.isUserInteracting=!1,clearTimeout(e)}.bind(this),this.userHoverContainer=function(t){this.state.isUserInteracting=!0,e=setTimeout(function(){if("mouseenter"===t.type&&!this.state.report.hoverReported){var e=this.getCreativeMetrics();b.compile({type:"info",name:"slot_hovered",meta:e}),this.state.report.hoverReported=!0}}.bind(this),500)}.bind(this),this.onVisibilityChange=function(){var e=this.state.fpsLoop;e&&(document.hidden?e.pause():e.resume())}.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange,!0),t.addEventListener("mouseout",this.userOffAd,!0),t.addEventListener("mouseenter",this.userHoverContainer,!1),Promise.resolve()},n.prototype.onRenderStart=function(e){var t=this.state,n='iframe[id^="google_ads_iframe"]:not([id$="to_be_removed__"]):not([id$="hidden__"])',r=t.els.container.querySelector(n);t.els.iframe=r;var o=!1,a=!1;this.setPostRenderSlotState(e),window.requestAnimationFrame(function(){this.setPostRenderStageElState(e),this.setPostRenderContainerElState(e)}.bind(this)),this.addiFrameEventListeners();var s=this.getCreativeMetrics();return b.compile({type:"info",name:"slot_rendered",meta:s}),f(r)?(o=t.els.iframe.contentWindow,a=o.document):b.compile({type:"info",name:"unfriendly_iframe",meta:s}),i({func:t.onRenderStart,payload:{meta:{renderedSize:e.dimensions.string,domID:e.domID,slotType:t.definition.type,isHidden:t.isHidden,container:t.els.container},dom:{window:o,document:a},render:t.definition.render[t.environment.device],pluginRules:t.plugins}})},n.prototype.setPostRenderSlotState=function(e){var t=this.state,n=!this.isFirstRequest()&&!t.isForcedRequest;t.report.rendered=m(),t.request.inProgress=!1,t.creative.isRendered=!0,t.report.hoverReported=!1,t.meta=e,t.meta.domID=t.ids.container,t.creative.renderedSize=e.dimensions.string,t.creative.isEmpty=e.isEmpty,t.creative.ids.advertiserId=e.advertiser,t.creative.ids.creativeId=e.creative,t.creative.ids.lineItem=e.lineItem,t.creative.ids.order=e.order,t.creative.ids.topUnit=e.top_unit,t.creative.ids.unit=e.unit,n&&t.context_targeting.ctx_slot_rn++,t.isForcedRequest&&t.context_targeting.ctx_slot_manual_rn++,t.isForcedRequest=!1,this.setPostRenderMods()},n.prototype.setPostRenderMods=function(){function e(e,t){var n=r.creative,o=i[e],a=n[o]||n.ids[o];return d(t,a)}function t(t,n){var r=n.split("|"),i=r[0],a=r[1].split(","),c=e(i,a);c&&s(t,function(e,t){o[t]["with"](e)})}function n(e){s(Object.keys(e),function(e){o[e].withDefaults()})}var r=this.state,o={refresh:{"with":this.setRefreshBehavior.bind(this),withDefaults:this.setRefreshBehavior.bind(this,r.definition.refresh)}},i={sizes:"renderedSize","creative-ids":"creativeId","advertiser-ids":"advertiserId"};s(r.definition.mods,n),s(r.definition.mods,t)},n.prototype.setPostRenderStageElState=function(e){var t=this.state,n=t.creative.isEmpty,r=t.els.stage,o=e.dimensions.string,i=[],a=[],s="1x1"===o;t.lastAdSize&&o&&a.push("cns-ads-slot-size-"+t.lastAdSize),o&&(i.push("cns-ads-slot-size-"+o),t.lastAdSize=o),n?(a.push("cns-ads-slot-state-filled"),i.push("cns-ads-slot-state-empty"),this.state.isHidden=!0):(a.push("cns-ads-slot-state-empty"),i.push("cns-ads-slot-state-filled"),this.state.isHidden=!1,v.styles.update({el:r,drop:["height","width","padding","margin"]})),v.classes.update({el:r,add:i,drop:a}),(n||s)&&v.styles.update({el:r,add:{height:0,width:0,padding:0,margin:0}})},n.prototype.setPostRenderContainerElState=function(e){var t=this.state,n=t.els.container,r=e.dimensions;v.styles.update(e&&e.isSized?{el:n,add:{"min-height":r.height+"px",width:r.width+"px"}}:{el:n,drop:["height","width"]}),"10x1"===r.string&&v.styles.update({el:n,add:{"max-width":"1030px"}})},n.prototype.addiFrameEventListeners=function(){var e=this.getCreativeMetrics();if(f(this.state.els.iframe)){var t=this.state.els.iframe.contentDocument.body;this.userClickedAd=function(){b.compile({type:"info",name:"slot_clicked",meta:e})},t.addEventListener("click",this.userClickedAd,!0),t.addEventListener("touchstart",this.userClickedAd,!0)}},n.prototype.getCreativeMetrics=function(){var e=this.state,t=b.helpers.getReportingData(this.state);return t.advertiser_id=e.creative.ids.advertiserId,t.creative_id=e.creative.ids.creativeId,t.creative_type="sized",t.is_empty=e.creative.isEmpty,t.line_item_id=e.creative.ids.lineItem,t.order_id=e.creative.ids.order,t.pageLoad_to_in_viewport=e.report.inViewport,t.pageLoad_to_requested=e.report.requested,t.pageLoad_to_rendered=e.report.rendered,t.rendered_size=e.creative.renderedSize,t.request_to_rendered=e.report.rendered-e.report.requested,t.top_unit_id=e.creative.ids.topUnit,t.unit_id=e.creative.ids.unit,t},n.prototype.getId=function(){return this.state.id},n.prototype.getSuffix=function(){return this.state.definition.suffix},n.prototype.getMeta=function(){return this.state.meta},n.prototype.destroy=function(){var e=this.state,t=e.id;return this.removeStageEl(),this.removeEventListeners(),this.removeRequestabilityLoop(),e.onDestroy(t)},n.prototype.removeStageEl=function(){var e=this.state.els.stage,t=e.parentNode;document.documentElement.contains(e)&&document.documentElement.contains(t)&&t.removeChild(e)},n.prototype.removeEventListeners=function(){var e=this.state.els.container;document.removeEventListener("visibilitychange",this.onVisibilityChange,!0),e.removeEventListener("mouseout",this.userOffAd,!0),e.removeEventListener("mouseenter",this.userHoverContainer,!1)},n.prototype.removeRequestabilityLoop=function(){this.state.fpsLoop&&(this.state.fpsLoop.kill(),this.state.fpsLoop=null,delete this.state.fpsLoop)},n.prototype.refresh=function(){this.state.isForcedRequest=!0,this.checkRequestability(!0)},n.prototype.getType=function(){return this.state.type},n.prototype.getName=function(){return this.state.name},n.prototype.getGroups=function(){return this.state.definition.groups},n.prototype.getAdUnitPath=function(){return this.state.adUnitPath},n.prototype.isFirstRequest=function(){return!this.state.request.timestamp},n.prototype.requestOnlyOnce=function(){return!!this.state.request.onlyOnce},t.exports=n},{"../dom":13,"../lang":19,"../reporting":23,"../utilities/typeVariant":29,"@condenast/atp-utl/animations":51,"@condenast/atp-utl/arrays/has":52,"@condenast/atp-utl/dom/iframe":58,"@condenast/atp-utl/feature":60,"@condenast/atp-utl/functions":63,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/merge":69,"@condenast/atp-utl/parse":72,"@condenast/atp-utl/strings/slugify":73,"@condenast/atp-utl/type/isNumber":88,"@condenast/atp-utl/type/isString":91,"@condenast/atp-utl/visibility":93}],26:[function(e,t){function n(e){R=P(Z,e),A=!0,r()}function r(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet.insertRule(".cns-ads-stage {margin: 0 auto;padding: 0;width: 100%;}",0)}function o(e){var t=[];return A?(I(e.slotList,function(n){var r=i({NoD:n,page:e.page,environment:e.environment,onSlotRender:e.onSlotRender,contentURI:e.contentURI});t=t.concat(r)}),t):!1}function i(e){var t=a({NoD:e.NoD,page:e.page,environment:e.environment});if(!t.instances)return!1;var n=[];return I(t.instances,function(r){X[t.type]="undefined"!=typeof X[t.type]?X[t.type]+1:0;var o=v({instanceNumber:X[t.type],name:t.type+"_"+X[t.type],type:t.type,environment:e.environment,sizes:r.sizes&&r.sizes[e.environment.device],page:e.page,definition:r,contentURI:e.contentURI,onRenderStart:e.onSlotRender});o&&n.push(o)}),n}function a(e){var t=s({type:e.NoD,page:e.page.slug,slug:e.page.slug,channel:e.page.channel,subChannel:e.page.subChannel,template:e.page.templateType}),n=c(t,e.page,e.environment);return{type:t.type,instances:n}}function s(e){if(!A)return!1;var t=q(e.type),n=t?e.type:R.definitions[e.type];if(!n)return J.compile({type:"warn",name:"slot_manager_type_does_not_exist",error:{msg:H.definition.doesNotExist(e.type)}}),!1;var r=t?n:K(n,{slug:e.slug,channel:e.channel,subChannel:e.subChannel,templateType:e.template,overwrites:e.overwrites}),o=O(r,!0);return o.type=o.type||e.type,o.customized=t,o}function c(e,t,n){var r=t.el||"html",o=r instanceof HTMLElement?r:document.querySelector(r),i=e.render,a=[];if(!i)return J.compile({type:"warn",name:"slot_manager_no_renderer",error:{msg:H.definition.hasNoRender(e.type,t.templateType)}}),a;var s=u(e,n.device);return I(s,function(n,i){if(!z(n)&&!V(n)){var s=q(n)&&!N(n)&&!L(n),c=s?f:l,u=c({definition:e,pageEl:o,type:i,rules:n});u&&u.length||J.compile({type:"warn",name:"slot_manager_bad_el",error:{msg:H.definition.hasBadEl(e.type,t.templateType,r)}}),I(u,function(e){a.push(e)})}}),a}function u(e,t){var n=e.render.slot,r=e.render[t]&&e.render[t].slot;return n||r}function l(e){var t=M(e.rules)?d(e):[].concat(e.rules),n=t.length,r=h.bind(null,e.definition,ee[e.type]),o=[];return t&&(M(e.rules)||N(e.rules)||L(e.rules))?(n>1&&J.compile({type:"warn",name:"multiple_render_points",error:{msg:H.definition.tooManyEls(e.rules,e.definition.type)}}),I(t,function(t){p(t,ee[e.type])?J.compile({type:"error",name:"multiple_slots_in_el",error:{msg:H.definition.tooManyAdsInEl(e.definition.type)}}):o.push(r(t))}),o):!1}function d(e){function t(e,t){var r=n.contains(t);return r?e.concat([t]):e}var n=e.pageEl,r=document.querySelectorAll(e.rules),o=Array.prototype.reduce.call(r,t,[]);return o}function p(e,t){var n;switch(t){case"before":case"above":n=e.previousSibling;break;case"after":case"below":n=e.nextSibling;break;case"prepend":case"top":n=e.firstChild;break;default:n=e.lastChild}return n&&n.classList&&n.classList.contains("cns-ads-stage")}function f(e){var t=B.get(e.rules["in"].el,e.pageEl),n=B.getAll(e.rules.el,t),r=h.bind(null,e.definition,ee[e.type]),o=e.rules&&e.rules.when&&D(e.rules.when),i=!!e.rules["in"]&&!!e.rules["in"].when&&D(e.rules["in"].when),a=!i&&t||i&&t&&e.rules["in"].when(t),s=0,c=0;if(!a)return[];var u=1,l=[],d=!1;return I(n,function(t,i){var a=g(n.length,i),p=m(t);a.wordCount=p.split(" ").length,a.characterCount=p.split("").length,s+=a.wordCount,a.accumulatedWordCount=s,c+=a.characterCount,a.accumulatedCharacterCount=c;var f=!o||o&&e.rules.when(t,a),h=u>=e.rules.every;return h&&f||!h&&d?(l.push(r(t)),u=1,void(d=!1)):(h&&!f&&(d=!0),void(u+=1))}),l}function g(e,t){return{index:t,isOdd:!!(t%2),isEven:!(t%2),isFirst:0===t?!0:!1,isLast:t===e-1?!0:!1}}function m(e){var t="";return I(e.childNodes,function(e){8!==e.nodeType&&(t+=1!==e.nodeType?e.nodeValue:m(e))}),t}function h(e,t,n){var r=O(e,!0);return r.render.slot={el:n,method:t},r}function v(e){if(!A)return!1;var t,n=P(e,{linkByInstance:e.definition.link_by_instance,canBeHidden:e.definition.can_be_hidden,refreshDelay:R.refreshDelay,network:R.network,identifiers:R.identifiers,request_vp_range:R.request_vp_range,refresh_vp_range:R.refresh_vp_range,onStaged:R.onCreate,onDestroy:k,onRequest:b,onPluginHook:R.onRequest,onRenderStart:y.bind(null,e.onRenderStart),onRenderEnd:R.onRenderEnd,onImpressionViewable:R.onImpressionViewable,onVisibilityChange:R.onVisibilityChange});return W(n)?(t=new G(n),Y[t.state.id]=t,t):!1}function y(e,t){var n=t.meta.renderedSize,r=t.meta.domID,o=!!t.meta.isHidden,i=t.meta.container,a=t.meta.slotType,s={getCreativeType:function(){return"sized"},getContainerEl:function(){return i},getContainerId:function(){return r},getServerSize:function(){return n},getSlotType:function(){return a},isHidden:function(){return o}};R.onRenderStart(t),e(s)}function b(e){var t=Y[e],n=t.state,r=n.definition.link,o=n.instanceNumber,i=n.request.inProgress,a=n.linkByInstance;r?_({linkName:r,instanceGroup:o,requestByInstance:a}):i||t.prepareForRequest().then(function(){$.request([t.getRequestData()])})["catch"](function(e){J.compile({type:"error",name:"slot_manager_slot_request_flow",error:{msg:H.singleRequestFailed(n.name,e),obj:e}})})}function _(e){var t=w(e.linkName),n=x(t),r=[];n||(I(t,function(t){var n=t.state,o=j(n,e);t.isInDom()||(J.compile({type:"error",name:"destroy_called_slot_not_in_dom",error:{msg:H.destroyedNotExist(n.name)}}),t.destroy(),o=!1),o&&r.push(t.prepareForRequest().then(function(){return t.getRequestData()}))}),Promise.all(r).then(function(e){$.request(e)})["catch"](function(t){J.compile({type:"error",name:"slot_manager_linked_slot_request_flow",error:{msg:H.linkedRequestFailed(e.linkName,t),obj:t}})}))}function w(e){var t=[];return I(Y,function(n){n.state.definition.link===e&&t.push(n)}),t}function x(e){var t=!1;return I(e,function(e){var n=e.requestOnlyOnce(),r=!e.isFirstRequest();n&&r&&(t=!0)}),t}function j(e,t){var n=e.instanceNumber,r=!e.linkByInstance||!t.requestByInstance,o=n===t.instanceGroup||r;return o&&!Q(e.els.container)}function k(e){var t,n=Y[e];return n?(t=n.state.ids.container,$.destroySlot(t).then(function(){S(e)})["catch"](function(e){J.compile({type:"error",name:"slot_manager_destroy_flow",error:{msg:H.definition.slotDestroyFailed(e),obj:e}})})):Promise.resolve()}function S(e){Y[e]=null,delete Y[e]}function T(e){var t;return A?(t=Y[e],t?{destroy:function(){J.compile({type:"flow",name:"api.slots.get(name).destroy",meta:e}),t.destroy()},refresh:function(){J.compile({type:"flow",name:"api.slots.get(name).refresh",meta:e}),t.refresh()}}:(J.compile({type:"error",name:"can_not_find_slot",error:{msg:H.slotNotFound(e)}}),!1)):!1}function C(){var e=[];return A?(I(Y,function(t,n){e.push(t.destroy().then(function(){Y[n]=null,delete Y[n]}))}),Promise.all(e)):Promise.resolve()}function E(e){if(!A)return!1;var t=s({type:e.type,page:e.page,template:e.template});return F({mergeables:[t,e.overwrites],merger:U})}var R,A,P=e("@condenast/atp-utl/objects/options"),O=e("@condenast/atp-utl/objects/clone"),I=e("@condenast/atp-utl/loop"),q=e("@condenast/atp-utl/type/isObject"),D=e("@condenast/atp-utl/type/isFunction"),M=e("@condenast/atp-utl/type/isString"),N=e("@condenast/atp-utl/type/isElement"),z=e("@condenast/atp-utl/type/isWindowObject"),L=e("@condenast/atp-utl/type/isDOMElementCollection"),V=e("@condenast/atp-utl/type/isDocumentObject"),F=e("@condenast/atp-utl/objects/merge"),U=e("../configs/merge"),B=e("../dom"),H=e("../lang").err.slots,G=e("./Slot"),W=e("./validateSlot.js"),$=e("../gpt/gpt.js"),J=e("../reporting"),Q=e("@condenast/atp-utl/visibility").isHidden,K=e("../utilities/typeVariant").getVariantFromURI,Y={},Z={},X={},ee={top:"prepend",bottom:"append",below:"after",after:"after",before:"before",above:"before"};t.exports={setup:n,api:{get:T,getTypeDefinition:s,create:v,modifySlotType:E,destroy:C,batch:{create:o}}}},{"../configs/merge":12,"../dom":13,"../gpt/gpt.js":14,"../lang":19,"../reporting":23,"../utilities/typeVariant":29,"./Slot":25,"./validateSlot.js":27,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/clone":66,"@condenast/atp-utl/objects/merge":69,"@condenast/atp-utl/objects/options":70,"@condenast/atp-utl/type/isDOMElementCollection":78,"@condenast/atp-utl/type/isDocumentObject":81,"@condenast/atp-utl/type/isElement":82,"@condenast/atp-utl/type/isFunction":83,"@condenast/atp-utl/type/isObject":89,"@condenast/atp-utl/type/isString":91,"@condenast/atp-utl/type/isWindowObject":92,"@condenast/atp-utl/visibility":93}],27:[function(e,t){function n(e){return r(e)&&o(e)&&i(e)&&a(e)&&s(e)}function r(e){var t,n;return e.name?(t=e.name,e.environment?e.environment.device?e.definition?e.definition.sizes||"_out_of_page"===e.type?e.identifiers?e.network?e.definition.render&&e.definition.render.slot&&e.definition.render.slot.el?!0:(t="slot_validate_missing_render_slot_el",n=u.missingProperty("undefined","render.slot.el"),c(t,n),!1):(t="slot_validate_missing_network",n=u.missingProperty("undefined","network"),c(t,n),!1):(t="slot_validate_missing_identifiers",n=u.missingProperty("undefined","identifiers"),c(t,n),!1):(t="slot_validate_missing_sizes",n=u.missingProperty("undefined","sizes"),c(t,n),!1):(t="slot_validate_missing_definition",n=u.missingProperty("undefined","environment.definition"),c(t,n),!1):(t="slot_validate_missing_device",n=u.missingProperty("undefined","environment.device"),c(t,n),!1):(t="slot_validate_missing_environment",n=u.missingProperty(t,"environment"),c(t,n),!1)):(t="slot_validate_missing_name",n=u.missingProperty("undefined","name"),c(t,n),!1)}function o(e){if("_out_of_page"===e.type)return!0;var t=e.environment.device,n=e.definition.sizes&&e.definition.sizes[t];if(!n||!n.length){var r="slot_validation_no_appropriate_sizes",o=u.definition.noAppropriateSizes(e.name,t);return c(r,o),!1}return!0}function i(e){if(!l(e.identifiers)){var t="slot_validation_invalid_identifier",n=u.invalidIdentifiers(e.name);return c(t,n),!1}return!0}function a(e){if(!d(e.network)){var t="slot_validation_invalid_network",n=u.invalidNetwork(e.name);return c(t,n),!1}return!0}function s(e){var t=e.definition.render.slot.el;if(!t.tagName||"HTML"===t.tagName){var n="slot_validation_invalid_slot_el",r=u.definition.invalidSlotEl(e.name);return c(n,r),!1}return!0}function c(e,t){p.compile({type:"warn",name:e,error:{msg:t}})}var u=e("../lang").err.slots,l=e("@condenast/atp-utl/type/isObject"),d=e("@condenast/atp-utl/type/isNumber"),p=e("../reporting");t.exports=n},{"../lang":19,"../reporting":23,"@condenast/atp-utl/type/isNumber":88,"@condenast/atp-utl/type/isObject":89}],28:[function(e,t){function n(e){var t=e||i(),n=a(t);return u(t),n?r():o()}function r(){var e={blocked:!0,installed:!0};return d.set("AdbBlocked",1,{expires:8760}),l(e),e}function o(){var e={blocked:!1};return d.get("AdbBlocked")?(d.get("AdbInstalled")||d.set("AdbInstalled",1,{expires:8760}),e.installed=!0):e.installed=!1,l(e),e}function i(){var e=document.createElement("div");return e.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links"),e.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"),document.body.appendChild(e)}function a(e){var t=c(e),n=s(e);return!!document.body.getAttribute("abp")||t||n}function s(e){return null===e.offsetParent||0===e.offsetHeight||0===e.offsetWidth||0===e.clientHeight||0===e.clientWidth}function c(e){var t=window.getComputedStyle(e);return"none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility")}function u(e){return e.parentNode.removeChild(e)}function l(e){var t=e.blocked,n=e.installed,r={ctx_abk_blocked:t,ctx_abk_installed:n},o={type:"info",name:"adBlock"};e.blocked&&(o.type="error",r.msg=f()),o.meta=r,(t||n)&&p.compile(o)}var d=e("@condenast/atp-utl/cookies"),p=e("../reporting"),f=e("../lang").err.adBlock.detected;t.exports={check:n}},{"../lang":19,"../reporting":23,"@condenast/atp-utl/cookies":56}],29:[function(e,t){function n(e,t){var n=t||{};if(n.overwrites)return n.overwrites;var o={slug:n.slug,variantUriHigh:n.channel+"_"+n.subChannel+"_"+n.templateType,variantUriMed:n.channel+"_"+n.templateType,variantUriLow:n.templateType};return r(e,o)}function r(e,t){return e[t.slug]||e[t.variantUriHigh]||e[t.variantUriMed]||e[t.variantUriLow]||e.__default||e._default}t.exports={getVariantFromURI:n}},{}],30:[function(e,t){t.exports={_args:[[{raw:"@condenast/atp-cns-service-ads@https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",scope:"@condenast",escapedName:"@condenast%2fatp-cns-service-ads",name:"@condenast/atp-cns-service-ads",rawSpec:"https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",spec:"https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",type:"remote"},"/Users/xou/Desktop/Conde/atp-cns"]],_from:"@condenast/atp-cns-service-ads@2.4.0",_id:"@condenast/atp-cns-service-ads@2.4.0",_inCache:!0,_location:"/@condenast/atp-cns-service-ads",_phantomChildren:{},_requested:{raw:"@condenast/atp-cns-service-ads@https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",scope:"@condenast",escapedName:"@condenast%2fatp-cns-service-ads",name:"@condenast/atp-cns-service-ads",rawSpec:"https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",spec:"https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",type:"remote"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",_shasum:"f21096444faf99fc3a6f072f8e7b490d020ed041",_shrinkwrap:null,_spec:"@condenast/atp-cns-service-ads@https://registry.npmjs.org/@condenast/atp-cns-service-ads/-/atp-cns-service-ads-2.4.0.tgz",_where:"/Users/xou/Desktop/Conde/atp-cns",author:{name:"Condé Nast - ATP",email:"ATP-Engineering@condenast.com",url:"https://github.com/orgs/CondeNast/teams/atp-tech-team"},bugs:{url:"https://github.com/CondeNast/atp-cns-service-ads/issues"},dependencies:{"@condenast/atp-utl":"^1.3.4"},description:"CNS Ads Service",devDependencies:{"@condenast/cn-js-styleguide":"^1.0.5","browserify-istanbul":"^2.0.0",chai:"^3.5.0","chai-as-promised":"^6.0.0",istanbul:"^0.4.5","jsdoc-to-markdown":"^1.3.6",karma:"^1.3.0","karma-browserify":"^5.1.0","karma-chai":"^0.1.0","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-fixture":"^0.2.6","karma-html2js-preprocessor":"^1.1.0","karma-mocha":"^1.2.0","karma-mocha-reporter":"^2.2.0","karma-source-map-support":"^1.2.0",mocha:"^3.0.2","mocha-sinon":"^1.1.6",rewireify:"^0.2.5",sinon:"^1.17.3",tape:"^4.5.1",zuul:"^3.11.0"},engines:{node:"^4.2.2"},homepage:"https://github.com/CondeNast/atp-cns-service-ads/blob/master/README.md",keywords:["Condé Nast","Conde Nast","scripts","script services","Ads"],license:"UNLICENSED",main:"./lib/index.js",name:"@condenast/atp-cns-service-ads",optionalDependencies:{},readme:"[![GPA](https://codeclimate.com/repos/577fc31332073a634e0027eb/badges/0ab3d466696942e9db61/gpa.svg)](https://codeclimate.com/repos/577fc31332073a634e0027eb/feed)\n[![Test Coverage](https://codeclimate.com/repos/577fc31332073a634e0027eb/badges/0ab3d466696942e9db61/coverage.svg)](https://codeclimate.com/repos/577fc31332073a634e0027eb/coverage)\n[![Issue Count](https://codeclimate.com/repos/577fc31332073a634e0027eb/badges/0ab3d466696942e9db61/issue_count.svg)](https://codeclimate.com/repos/577fc31332073a634e0027eb/feed)\n\n\n# The Cond&egrave; Nast Ads Service\n\nThe Ads Service is the official client-side API for ad life-cycle management across all Cond&egrave; Nast publishers.\n\n## Brand Engineer Usage\n - [Overview & Vision](https://cnissues.atlassian.net/wiki/display/ATP/The+Ads+Service)\n - [Implementation Guide](https://cnissues.atlassian.net/wiki/display/ATP/Implementing+CNS+Ads)\n - [API Documentation](https://cnissues.atlassian.net/wiki/display/ATP/The+CNS+Ads+API)\n\n## Contributors Usage\n\n### For local development\n```\ngit clone https://github.com/CondeNast/atp-cns-ads.git\n\nnpm install\n\nnpm link\n```\n\nThis repository does not function as a stand alone module, it works in conjunction with atp-cns.\n\nSee the [CNS documentation](https://github.com/CondeNast/atp-cns) for setup and usage\n\nYou may also require some of these optional plug-ins depending on your configuration.\n\n - [atp-cns-service-ads-plugin-adblock](https://github.com/CondeNast/atp-cns-service-ads-plugin-adblock)\n - [atp-cns-service-ads-plugin-adobe-audience-manager](https://github.com/CondeNast/atp-cns-service-ads-plugin-adobe-audience-manager)\n - [atp-cns-service-ads-plugin-amazon-match-buy](https://github.com/CondeNast/atp-cns-service-ads-plugin-amazon-match-buy)\n - [atp-cns-service-ads-plugin-ars-accelerator](https://github.com/CondeNast/atp-cns-service-ads-plugin-ars-accelerator)\n - [atp-cns-service-ads-plugin-cnds](https://github.com/CondeNast/atp-cns-service-ads-plugin-cnds)\n - [atp-cns-service-ads-plugin-constellation](https://github.com/CondeNast/atp-cns-service-ads-plugin-constellation)\n - [atp-cns-service-ads-plugin-newsletter](https://github.com/CondeNast/atp-cns-service-ads-plugin-newsletter)\n - [atp-cns-service-ads-plugin-polar](https://github.com/CondeNast/atp-cns-service-ads-plugin-polar)\n - [atp-cns-service-ads-plugin-rubicon](https://github.com/CondeNast/atp-cns-service-ads-plugin-rubicon)\n - [atp-cns-service-ads-plugin-yieldbot](https://github.com/CondeNast/atp-cns-service-ads-plugin-yieldbot)\n\n### Developer API Documentation\n\n[API Documentation](https://github.com/CondeNast/atp-cns-service-ads/blob/master/doc/api.md)\n\n\n### Testing\n\n#### Tests\nRun `npm test` and a browser will open showing both tests and coverage.\n",readmeFilename:"README.md",repository:{type:"git",url:"git+https://github.com/CondeNast/atp-cns-service-ads.git"},scripts:{docs:"mkdir -p doc && jsdoc2md 'lib/**/*.js' -P  > ./doc/api.md",lint:"eslint ./lib/**/*.js",prepublish:"bash ./docs.sh",pretest:"npm run lint && karma start",test:"open http://localhost:8080/__zuul && zuul --local 8080 ./test/*.js",watch:"WATCH=true karma start"},version:"2.4.0",warnings:[{code:"ENOTSUP",required:{node:"^4.2.2"},pkgid:"@condenast/atp-cns-service-ads@2.4.0"}]}},{}],31:[function(e,t){function n(e){return new Promise(function(t){p=e,document.querySelector(_)||a(),g({path:"window.Sparrow",poll:{limit:e&&e.timeout||15e3},onReady:function(){r(),t(f)},onFailure:function(e){console.warn(e.message),t(e.message)}})})}function r(){f=new window.Sparrow(p),o(y()),i()}function o(e){if(b())var t=window.performance.getEntries(),n=t.filter(function(e){return/sparrow.min.js/.test(e.name)})[0];var r={campaign:"cns_ads",name:"library_sparrow",type:"info",meta:{requestStart:n&&n.startTime||y(),requestEnd:n&&n.responseEnd||y(),init:e}};s(r)}function i(){w.length&&(w.shift().call(),w.length&&i())}function a(){var e=document.createElement("script");e.className="cns-metrics-sparrow",e.async=!0,e.src="//pixel.condenastdigital.com/sparrow.min.js",document.head.appendChild(e)}function s(e){var t,n=d(e);return c(e)?(t=u(n),f?l(t):w.push(l.bind(null,t)),!0):!1}function c(e){var t=e.campaign&&e.name&&e.type;return!!t}function u(e){return e.meta=e.meta||{},e.meta._logType=e.type,e}function l(e){f.track(e.campaign,e.name,e.meta)}function d(e){return v(e,function(t,n){h(t)?d(t):e[n]=m(t,"_")}),e}var p,f,g=e("@condenast/atp-utl/objects/ready"),m=e("@condenast/atp-utl/strings/slugify"),h=e("@condenast/atp-utl/type/isObject"),v=e("@condenast/atp-utl/loop"),y=e("@condenast/atp-utl/feature").performance.now,b=e("@condenast/atp-utl/feature").isGetEntriesEnabled,_="script[src$='sparrow.min.js']",w=[];t.exports={code:"sprw",setup:n,emit:s}},{"@condenast/atp-utl/feature":32,"@condenast/atp-utl/loop":33,"@condenast/atp-utl/objects/ready":34,"@condenast/atp-utl/strings/slugify":35,"@condenast/atp-utl/type/isObject":36}],32:[function(e,t){function n(){try{return window.localStorage.setItem("testKey","1"),window.localStorage.removeItem("testKey"),!0}catch(e){return!1}}function r(){return!!(window&&window.performance&&window.performance.getEntries)}function o(e){var t=e||window,n=t.performance,r=n&&n.now&&n.now(),o=!r&&n&&t.performance.timing,i=o&&t.performance.timing.navigationStart,a=i&&Date.now()-i;return r||i&&a||null}t.exports={isStorageEnabled:n,isGetEntriesEnabled:r,performance:{now:o}}},{}],33:[function(e,t){function n(e,t){function n(){for(var n=0;e>n;n++)t(n)}var o="object"==typeof e,i="number"==typeof e&&e%1===0,a="function"==typeof t;if(!o&&!i)return!1;if(!a)throw new Error("Loop() must be passed a callback function as a second argument");return i?n():r(e,t)}var r=e("lodash.map");t.exports=n},{"lodash.map":47}],34:[function(e,t){function n(e){function t(i){var a;return r>=u?(clearTimeout(n),void c(i,e)):Date.now()-l>d?(clearTimeout(n),void s(e)):(a=o[r],i[a]?(clearTimeout(n),r++,void t(i[a])):void(n=setTimeout(function(){t(i)},e.poll.every)))}i(e),a(e);var n,r=0,o=e.path.split("."),u=o.length,l=Date.now(),d=e.poll.limit,p=e.obj||window;t(p)}function r(e,t){return t?typeof e===t:!0}function o(e,t,n){var o=e[t]||!1;return o&&r(o,n)}function i(e){function t(e,t,n){if(!o(e,t,n))throw new Error("[ cns utilities: obj.ready ] the '"+t+"' options property must be of type '"+n+"'")}t(e,"path","string"),t(e,"poll","object"),t(e.poll,"limit","number"),t(e,"onReady","function")}function a(e){function t(e,t,n){o(e,t,n)||(e[t]=u[t])}t(e,"onFailure","function"),t(e.poll,"every","number")}function s(e){e.onFailure(new Error("[ cns utilities: obj.ready ] "+e.path+" was not found before time limit of "+e.poll.limit+" milliseconds expired."))}function c(e,t){return r(e,t.type)?void t.onReady(e):void t.onFailure(new Error("[ cns utilities: obj.ready ] path is ready but not of type '"+t.type+"'."))}var u={every:100,onFailure:function(e){console.error(e.message)}};t.exports=n},{}],35:[function(e,t){function n(e,t){if(!e)return void 0;if("string"!=typeof e)return e;var n="string"==typeof t?t:"-",r=new RegExp("[^a-z0-9]+","g"),o=e.toLowerCase(),i=o.replace(r,n);return i}t.exports=n},{}],36:[function(e,t){function n(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}t.exports=n},{}],37:[function(e,t){function n(e,t){for(var n=-1,r=e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}t.exports=n},{}],38:[function(e,t){function n(e){return null==e?"":e+""}function r(e,t,n){var r=typeof e;return"function"==r?void 0===t?e:w(e,t,n):null==e?y:"object"==r?a(e):void 0===t?b(e):s(e,t)}function o(e,t,n){if(null!=e){void 0!==n&&n in g(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e,t,n){var r=t.length,o=r,i=!n;if(null==e)return!o;for(e=g(e);r--;){var a=t[r];if(i&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){a=t[r];var s=a[0],c=e[s],u=a[1];if(i&&a[2]){if(void 0===c&&!(s in e))return!1}else{var l=n?n(c,u,s):void 0;if(!(void 0===l?_(u,c,n,!0):l))return!1}}return!0}function a(e){var t=d(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(void 0!==r||n in g(e))}}return function(e){return i(e,t)}}function s(e,t){var n=x(e),r=p(e)&&f(t),i=e+"";return e=m(e),function(a){if(null==a)return!1;var s=i;if(a=g(a),!(!n&&r||s in a)){if(a=1==e.length?a:o(a,l(e,0,-1)),null==a)return!1;s=h(e),a=g(a)}return a[s]===t?void 0!==t||s in a:_(t,a[s],void 0,!0)}}function c(e){return function(t){return null==t?void 0:t[e]}}function u(e){var t=e+"";return e=m(e),function(n){return o(n,e,t)}}function l(e,t,n){var r=-1,o=e.length;t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),n=void 0===n||n>o?o:+n||0,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}function d(e){for(var t=j(e),n=t.length;n--;)t[n][2]=f(t[n][1]);return t}function p(e,t){var n=typeof e;if("string"==n&&S.test(e)||"number"==n)return!0;if(x(e))return!1;var r=!k.test(e);return r||null!=t&&e in g(t)}function f(e){return e===e&&!v(e);

}function g(e){return v(e)?e:Object(e)}function m(e){if(x(e))return e;var t=[];return n(e).replace(T,function(e,n,r,o){t.push(r?o.replace(C,"$1"):n||e)}),t}function h(e){var t=e?e.length:0;return t?e[t-1]:void 0}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return e}function b(e){return p(e)?c(e):u(e)}var _=e("lodash._baseisequal"),w=e("lodash._bindcallback"),x=e("lodash.isarray"),j=e("lodash.pairs"),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,S=/^\w*$/,T=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,C=/\\(\\)?/g;t.exports=r},{"lodash._baseisequal":40,"lodash._bindcallback":41,"lodash.isarray":44,"lodash.pairs":48}],39:[function(e,t){function n(e,t){return p(e,t,u)}function r(e){return function(t){return null==t?void 0:t[e]}}function o(e,t){return function(n,r){var o=n?f(n):0;if(!a(o))return e(n,r);for(var i=t?o:-1,c=s(n);(t?i--:++i<o)&&r(c[i],i,c)!==!1;);return n}}function i(e){return function(t,n,r){for(var o=s(t),i=r(t),a=i.length,c=e?a:-1;e?c--:++c<a;){var u=i[c];if(n(o[u],u,o)===!1)break}return t}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function s(e){return c(e)?e:Object(e)}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=e("lodash.keys"),l=9007199254740991,d=o(n),p=i(),f=r("length");t.exports=d},{"lodash.keys":46}],40:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function o(e,t,r,a,s,c){return e===t?!0:null==e||null==t||!u(e)&&!n(t)?e!==e&&t!==t:i(e,t,o,r,a,s,c)}function i(e,t,n,r,o,i,u){var p=l(e),m=l(t),h=g,v=g;p||(h=k.call(e),h==f?h=b:h!=b&&(p=d(e))),m||(v=k.call(t),v==f?v=b:v!=b&&(m=d(t)));var y=h==b,_=v==b,w=h==v;if(w&&!p&&!y)return s(e,t,h);if(!o){var x=y&&j.call(e,"__wrapped__"),S=_&&j.call(t,"__wrapped__");if(x||S)return n(x?e.value():e,S?t.value():t,r,o,i,u)}if(!w)return!1;i||(i=[]),u||(u=[]);for(var T=i.length;T--;)if(i[T]==e)return u[T]==t;i.push(e),u.push(t);var C=(p?a:c)(e,t,n,r,o,i,u);return i.pop(),u.pop(),C}function a(e,t,n,o,i,a,s){var c=-1,u=e.length,l=t.length;if(u!=l&&!(i&&l>u))return!1;for(;++c<u;){var d=e[c],p=t[c],f=o?o(i?p:d,i?d:p,c):void 0;if(void 0!==f){if(f)continue;return!1}if(i){if(!r(t,function(e){return d===e||n(d,e,o,i,a,s)}))return!1}else if(d!==p&&!n(d,p,o,i,a,s))return!1}return!0}function s(e,t,n){switch(n){case m:case h:return+e==+t;case v:return e.name==t.name&&e.message==t.message;case y:return e!=+e?t!=+t:e==+t;case _:case w:return e==t+""}return!1}function c(e,t,n,r,o,i,a){var s=p(e),c=s.length,u=p(t),l=u.length;if(c!=l&&!o)return!1;for(var d=c;d--;){var f=s[d];if(!(o?f in t:j.call(t,f)))return!1}for(var g=o;++d<c;){f=s[d];var m=e[f],h=t[f],v=r?r(o?h:m,o?m:h,f):void 0;if(!(void 0===v?n(m,h,r,o,i,a):v))return!1;g||(g="constructor"==f)}if(!g){var y=e.constructor,b=t.constructor;if(y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b))return!1}return!0}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=e("lodash.isarray"),d=e("lodash.istypedarray"),p=e("lodash.keys"),f="[object Arguments]",g="[object Array]",m="[object Boolean]",h="[object Date]",v="[object Error]",y="[object Number]",b="[object Object]",_="[object RegExp]",w="[object String]",x=Object.prototype,j=x.hasOwnProperty,k=x.toString;t.exports=o},{"lodash.isarray":44,"lodash.istypedarray":45,"lodash.keys":46}],41:[function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function r(e){return e}t.exports=n},{}],42:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function o(e){return i(e)&&p.call(e)==s}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?f.test(l.call(e)):n(e)&&c.test(e)}var s="[object Function]",c=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,d=u.hasOwnProperty,p=u.toString,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{}],43:[function(e,t){function n(e){return o(e)&&g.call(e,"callee")&&(!h.call(e,"callee")||m.call(e)==l)}function r(e){return null!=e&&a(e.length)&&!i(e)}function o(e){return c(e)&&r(e)}function i(e){var t=s(e)?m.call(e):"";return t==d||t==p}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return!!e&&"object"==typeof e}var u=9007199254740991,l="[object Arguments]",d="[object Function]",p="[object GeneratorFunction]",f=Object.prototype,g=f.hasOwnProperty,m=f.toString,h=f.propertyIsEnumerable;t.exports=n},{}],44:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&v>=e}function i(e){return a(e)&&g.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:i(e)?m.test(p.call(e)):n(e)&&l.test(e)}var c="[object Array]",u="[object Function]",l=/^\[object .+?Constructor\]$/,d=Object.prototype,p=Function.prototype.toString,f=d.hasOwnProperty,g=d.toString,m=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=r(Array,"isArray"),v=9007199254740991,y=h||function(e){return n(e)&&o(e.length)&&g.call(e)==c};t.exports=y},{}],45:[function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}function r(e){return!!e&&"object"==typeof e}function o(e){return r(e)&&n(e.length)&&!!A[O.call(e)]}var i=9007199254740991,a="[object Arguments]",s="[object Array]",c="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",g="[object Object]",m="[object RegExp]",h="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",j="[object Int8Array]",k="[object Int16Array]",S="[object Int32Array]",T="[object Uint8Array]",C="[object Uint8ClampedArray]",E="[object Uint16Array]",R="[object Uint32Array]",A={};A[w]=A[x]=A[j]=A[k]=A[S]=A[T]=A[C]=A[E]=A[R]=!0,A[a]=A[s]=A[b]=A[c]=A[_]=A[u]=A[l]=A[d]=A[p]=A[f]=A[g]=A[m]=A[h]=A[v]=A[y]=!1;var P=Object.prototype,O=P.toString;t.exports=o},{}],46:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&i(v(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&t>e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function a(e){for(var t=c(e),n=t.length,r=n&&e.length,a=!!r&&i(r)&&(d(e)||l(e)),s=-1,u=[];++s<n;){var p=t[s];(a&&o(p,r)||g.call(e,p))&&u.push(p)}return u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(d(e)||l(e))&&t||0;for(var n=e.constructor,r=-1,a="function"==typeof n&&n.prototype===e,c=Array(t),u=t>0;++r<t;)c[r]=r+"";for(var p in e)u&&o(p,t)||"constructor"==p&&(a||!g.call(e,p))||c.push(p);return c}var u=e("lodash._getnative"),l=e("lodash.isarguments"),d=e("lodash.isarray"),p=/^\d+$/,f=Object.prototype,g=f.hasOwnProperty,m=u(Object,"keys"),h=9007199254740991,v=n("length"),y=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):s(e)?m(e):[]}:a;t.exports=y},{"lodash._getnative":42,"lodash.isarguments":43,"lodash.isarray":44}],47:[function(e,t){function n(e,t){var n=-1,r=o(e)?Array(e.length):[];return u(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function r(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&i(p(e))}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function a(e,t,r){var o=l(e)?s:n;return t=c(t,r,3),o(e,t)}var s=e("lodash._arraymap"),c=e("lodash._basecallback"),u=e("lodash._baseeach"),l=e("lodash.isarray"),d=9007199254740991,p=r("length");t.exports=a},{"lodash._arraymap":37,"lodash._basecallback":38,"lodash._baseeach":39,"lodash.isarray":44}],48:[function(e,t){function n(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){e=n(e);for(var t=-1,r=i(e),o=r.length,a=Array(o);++t<o;){var s=r[t];a[t]=[s,e[s]]}return a}var i=e("lodash.keys");t.exports=o},{"lodash.keys":46}],49:[function(e,t){function n(e,t,n){return m=n&&n.cnsVersion,f.setup(window.cns),Promise.resolve(t)}function r(e){function t(e,t,n){if("plugins"===n&&d(e)){var r={};return p(t,function(t,n){var o=e[n];r[n]=l({mergeables:[o,t]})}),r}}return l({mergeables:[e.global,e.property],merger:t})}function o(e){return e.controller.setup(e.config,e.version),g[e.name]=e,e}function i(e){var t,n,r,o;a(e)&&(e.type=e.type||"info",t="production"===e.environment,n="warn"===e.type,r="flow"===e.type,o=/CNS_TRACK/.test(document.location.search),e.meta&&m&&(e.meta.cns=m),!t&&!o||n||r||u(e),f[e.type](e.campaign,{event:e.name,data:e.error||e.meta}))}function a(e){var t=["campaign","environment","name"],n=!0;return p(t,function(t){e[t]||(s(t,e),n=!1)}),n}function s(e,t){f.error("cns_metrics",{message:c(e),event:t})}function c(e){return'[ cns metrics ] An event was emitted with an invalid "'+e+'" property. See "event" property for more details.'}function u(e){p(g,function(t){t.controller.emit(e)})}var l=e("@condenast/atp-utl/objects/merge"),d=e("@condenast/atp-utl/type/isObject"),p=e("@condenast/atp-utl/loop"),f=e("@condenast/atp-utl/logger"),g={},m=null;t.exports={setup:n,merge:r,extend:o,api:{emit:i}}},{"@condenast/atp-utl/logger":64,"@condenast/atp-utl/loop":65,"@condenast/atp-utl/objects/merge":69,"@condenast/atp-utl/type/isObject":89}],50:[function(e,t){function n(e){return new Promise(function(t,n){var s,c=r(e);return c.result?(s=i(e),o(s.dataType)?(l(s),void t()):void a(s).then(t)["catch"](n)):void n(new Error(c.error))})}function r(e){return e&&e.URL&&e.URL.length?e.jsonpCallback&&!p(e.jsonpCallback)?{result:!1,error:g.badJSONPCallback}:{result:!0}:{result:!1,error:g.noURL}}function o(e){var t=e?e.toLowerCase():!1;return"jsonp"===t}function i(e){var t=f(e,!0);return t.method=t.method&&t.method.toUpperCase()||"GET",t.dataType=t.dataType&&t.dataType.toUpperCase()||"JSON",t}function a(e){return new Promise(function(t,n){var r,o=new XMLHttpRequest;o.open(e.method,e.URL),o.withCredentials=e.cors||!1,o.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<300?t(this.responseText):n(s(this)))},c(e.method,o),r=u(e.method,e.data),o.send(r)})}function s(e){var t=e.status;return new Error(e.statusText?g.requestError(e.statusText.hostname,t,e.statusText.code):g.undefinedError(t,e.responseText))}function c(e,t){return"POST"===e?t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"PATCH"===e||"PUT"===e?t.setRequestHeader("Content-Type","application/json"):null}function u(e,t){return"POST"===e?encodeURI(t):"DELETE"===e?null:t}function l(e){var t="cnsJSONPCallback"+Math.round(1e3*Math.random()),n=d(e.data),r=document.createElement("script");window[t]=e.jsonpCallback,r.src=e.URL+"?callback="+t+n,document.body.appendChild(r)}function d(e){var t=[],n="";for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.length&&(n="&"+t.join("&")),n}var p=e("../type/isFunction"),f=e("../objects/clone"),g={noURL:"[ atp utl ajax ] The parameter object contained an invalid URL.",badJSONPCallback:"[ atp utl ajax ] The parameter object contained a jsonpCallback that was not a function.",requestError:function(e,t,n){return"[ atp utl ajax ] Ajax request to "+e+" failed with status "+t+" and code "+n+"."},undefinedError:function(e){return"[ atp utl ajax ] Ajax request failed with a code of "+e+" and has no error object."}};t.exports=n},{"../objects/clone":66,"../type/isFunction":83}],51:[function(e,t){function n(e,t){function n(){if(!l){var t,r=Date.now(),o=r-s;o>u&&(t=o%u,s=r-t,e())}d||(a=window.requestAnimationFrame(n))}function r(){d=!0,window.cancelAnimationFrame(a)}function o(){l=!0}function i(){l=!1}var a,s=Date.now(),c=t||60,u=1e3/c,l=!1,d=!1;return n(),{kill:r,pause:o,resume:i}}t.exports=n},{}],52:[function(e,t){function n(e,t){if(!Array.isArray(e))throw new Error("Array.has() can only accept an array as a first argument.");return-1!==e.indexOf(t)?!0:!1}t.exports=n},{}],53:[function(e,t){function n(e,t){var n="Array.merge() can only accept an array of arrays as a first argument";if(!i(e))throw new Error(n);return o(e,function(t,n){void 0!==t&&i(t)||(e[n]=[])}),t?r.apply(null,e):Array.prototype.concat.apply([],e)}var r=e("lodash.union"),o=e("../../loop"),i=e("../../type/isArray");t.exports=n},{"../../loop":65,"../../type/isArray":75,"lodash.union":126}],54:[function(e,t){function n(e){r(e,"",{expires:-1})}var r=e("../set");t.exports=n},{"../set":57}],55:[function(e,t){function n(e){for(var t=document.cookie.split("; "),n=[],r=0;r<t.length;r++)if(n=t[r].split("="),n[0]===e)return decodeURIComponent(n[1]);return!1}t.exports=n},{}],56:[function(e,t){var n=e("./get"),r=e("./set"),o=e("./del");t.exports={get:n,set:r,del:o}},{"./del":54,"./get":55,"./set":57}],57:[function(e,t){function n(e,t,n){if(!e)return void 0;var i=n||{},a=t||!0,s=!!i.encode||!0,c=s?encodeURIComponent(a):a,u=e+"="+c,l=[u];return i.path=i.path||"/",i.expires=r(i.expires)||0,l=o(l,i),document.cookie=l.join("; "),u}function r(e){var t=a(e)?new Date(+new Date+36e5*e):e;return t=i(t)?t.toUTCString():""}function o(e,t){var n=e;return n.push("expires="+t.expires),n.push("path="+t.path),n=t.domain?n.push("domain="+t.domain)&&n:n,n=t.secure?n.push("secure")&&n:n}var i=e("../../type/isDate"),a=e("../../type/isNumber");t.exports=n},{"../../type/isDate":80,"../../type/isNumber":88}],58:[function(e,t){function n(e){var t=null;try{var n=e.contentDocument||e.contentWindow.document;t=n.body.innerHTML}catch(r){}return null!==t}t.exports={isFriendly:n}},{}],59:[function(e,t){function n(){return!!(window&&window.performance&&window.performance.getEntries)}t.exports={isGetEntriesEnabled:n}},{}],60:[function(e,t){var n=e("./performance"),r=e("./getEntries").isGetEntriesEnabled,o=e("./localStorage").isStorageEnabled;t.exports={isStorageEnabled:o,isGetEntriesEnabled:r,performance:{now:n}}},{"./getEntries":59,"./localStorage":61,"./performance":62}],61:[function(e,t){function n(){try{return window.localStorage.setItem("testKey","1"),window.localStorage.removeItem("testKey"),!0}catch(e){return!1}}t.exports={isStorageEnabled:n}},{}],62:[function(e,t){function n(e){var t=e||window,n=t.performance,r=n&&n.now&&n.now(),o=!r&&n&&t.performance.timing,i=o&&t.performance.timing.navigationStart,a=i&&Date.now()-i;return r||i&&a||null}t.exports=n},{}],63:[function(e,t){function n(e){throw new Error(e)}function r(e){var t=c(e.func);if(!t)return e.func;var n=e.func(e.payload),r=n instanceof Promise;if(r&&!e.timeout)return n;if(r&&e.timeout){var o=new Promise(function(t){setTimeout(t,e.timeout,{timedOut:!0})});return Promise.race([n,o]).then(function(t){return t&&t.timedOut&&c(e.onTimeout)?e.onTimeout():t})}return Promise.resolve(n)}function o(e){setTimeout(e,0)}function i(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=30,n="";t--;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function a(e,t){var n=new Date(e).getDate()-t,r=new Date(e).setDate(n);return r}function s(e,t){return t>e?!0:!1}var c=e("../type/isFunction");t.exports={error:n,noop:function(){},callbackHandler:r,bump:o,generateRandomID:i,timeTravel:a,checkDate:s}},{"../type/isFunction":83}],64:[function(e,t){function n(e){f=l().CNS_LOG||!1;var t=window;e&&d(e)&&(t=e),t.log={on:c,off:u}}function r(e,t,n){return p.length>=100&&p.shift(),p.push([e,new Date,"["+t+"]",n]),o()}function o(){if(f&&p.length){p.sort(i);for(var e=p.length;e--;)(p[e][0]===f||"all"===f)&&(a(p[e]),p.splice(e,1))}}function i(e,t){return e[1]===t[1]?0:e[1]>t[1]?-1:1}function a(e){var t="flow"===e[0]?"info":e[0];return window.console[t](s(e[1]),e[2],e[3])}function s(e){var t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getMilliseconds(),i=t+":"+n+":"+r+":"+o;return i}function c(e){f=e||"all",o()}function u(){f=!1}var l=e("../parse"),d=e("../type/isPlainObject"),p=[],f=!1;t.exports={setup:n,warn:r.bind(null,"warn"),error:r.bind(null,"error"),info:r.bind(null,"info"),flow:r.bind(null,"flow"),on:c,off:u}},{"../parse":72,"../type/isPlainObject":90}],65:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{dup:33,"lodash.map":121}],66:[function(e,t){function n(e,t,n,i){if(!o(e))throw new Error("Objects.Clone: The first parameter to clone must be an object");return r(e,t,n,i)}var r=e("lodash.clone"),o=e("../../type/isPlainObject/");t.exports=n},{"../../type/isPlainObject/":90,"lodash.clone":114}],67:[function(e,t){var n=e("../loop"),r=e("./keys"),o=e("./clone"),i=e("./merge"),a=e("./options"),s=e("./ready");t.exports={loop:n,keys:r,clone:o,merge:i,options:a,ready:s}},{"../loop":65,"./clone":66,"./keys":68,"./merge":69,"./options":70,"./ready":71}],68:[function(e,t){function n(e){return!e||i(e)||o(e)?!1:r(e)}var r=e("lodash.keys"),o=e("../../type/isArray"),i=e("../../type/isString");t.exports=n},{"../../type/isArray":75,"../../type/isString":91,"lodash.keys":119}],69:[function(e,t){function n(e){var t=[{}];return r(e.mergeables,function(e){t.push(e)}),e.merger&&t.push(e.merger),o.apply(null,t)}var r=e("lodash.map"),o=e("lodash.merge");t.exports=n},{"lodash.map":121,"lodash.merge":122}],70:[function(e,t){function n(e,t){function n(e,t){return null===t?e:e?typeof e!=typeof t?t:i(t)?t:o(t)?r({},e,t,n):void 0:t}return r({},e,t,n)}var r=e("lodash.merge"),o=e("../../type/isPlainObject"),i=e("../../type/isArray");t.exports=n},{"../../type/isArray":75,"../../type/isPlainObject":90,"lodash.merge":122}],71:[function(e,t,n){arguments[4][34][0].apply(n,arguments)},{dup:34}],72:[function(e,t){function n(e){var t,n=e?e:document.location.search,o=n.slice(1,n.length),i=o.split("&"),a={};return r(i,function(e){t=e.split("="),a[t[0]]=t[1]}),a}var r=e("../loop");t.exports=n},{"../loop":65}],73:[function(e,t,n){arguments[4][35][0].apply(n,arguments)},{dup:35}],74:[function(e,t){function n(e,t){return e&&t?e.substring(0,t.length)===t:!1}t.exports=n},{}],75:[function(e,t){function n(e){return!!e&&Array.isArray(e)}t.exports=n},{}],76:[function(e,t){function n(e){return!(!e||9!==e.nodeType)}t.exports=n},{}],77:[function(e,t){function n(e){return!(!e||1!==e.nodeType)}t.exports=n},{}],78:[function(e,t){function n(e){return!(!e||"undefined"==typeof e.item)}t.exports=n},{}],79:[function(e,t){function n(e){return!!(e&&e.document&&r(e.document))}var r=e("../isDOMDocumentObject");t.exports=n},{"../isDOMDocumentObject":76}],80:[function(e,t){function n(e){return!!e&&e instanceof Date&&!isNaN(e.valueOf())}t.exports=n},{}],81:[function(e,t){function n(e){return o(e)||r(e)}var r=e("../isDOMDocumentObject"),o=e("../isJQDocumentObject");t.exports=n},{"../isDOMDocumentObject":76,"../isJQDocumentObject":84}],82:[function(e,t){function n(e){return o(e)||r(e)}var r=e("../isDOMElement"),o=e("../isJQElement");t.exports=n},{"../isDOMElement":77,"../isJQElement":85}],83:[function(e,t){function n(e){return!!e&&"function"==typeof e}t.exports=n},{}],84:[function(e,t){function n(e){return!!(e&&r(e)&&o(e[0]))}var r=e("../isJQObject"),o=e("../isDOMDocumentObject");t.exports=n},{"../isDOMDocumentObject":76,"../isJQObject":86}],85:[function(e,t){function n(e){return!(!e||!r(e)||1!==e[0].nodeType)}var r=e("../isJQObject");t.exports=n},{"../isJQObject":86}],86:[function(e,t){function n(e){return!(!e||!e.jquery)}t.exports=n},{}],87:[function(e,t){function n(e){return!!(e&&r(e)&&o(e[0]))}var r=e("../isJQObject"),o=e("../isDOMWindowObject");t.exports=n},{"../isDOMWindowObject":79,"../isJQObject":86}],88:[function(e,t){function n(e){return"number"==typeof e}t.exports=n},{}],89:[function(e,t,n){arguments[4][36][0].apply(n,arguments)},{dup:36}],90:[function(e,t){function n(e){return!!e&&e.constructor===Object}t.exports=n},{}],91:[function(e,t){function n(e){return"string"==typeof e}t.exports=n},{}],92:[function(e,t){function n(e){return o(e)||r(e)}var r=e("../isDOMWindowObject"),o=e("../isJQWindowObject");t.exports=n},{"../isDOMWindowObject":79,"../isJQWindowObject":87}],93:[function(e,t){function n(e){var t=e.parentNode;return s(e)&&s(e.parentNode)?a(e)?!1:o(e)?!0:a(t)?!1:o(t)?!0:i(t)&&c(e)?!0:n(t,e.getBoundingClientRect()):!0}function r(e,t){return document.defaultView.getComputedStyle(e,null)[t]}function o(e){return!!["opacity","display","visibility"].filter(function(t){return/(0|none|hidden)/.test(r(e,t))}).length}function i(e){return/(hidden|scroll)/.test(window.getComputedStyle(e,null).getPropertyValue("overflow"))}function a(e){return"BODY"===e.nodeName}function s(e){return document.documentElement.contains(e)}function c(e){var t=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect();return t.top>n.bottom||t.bottom<n.top||t.left>n.right||t.right<n.left}t.exports={isHidden:n}},{}],94:[function(e,t){(function(n,r){(function(){"use strict";function o(e){return"function"==typeof e||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){G=e}function c(e){Q=e}function u(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){e(g)}}function l(){return function(){H(g)}}function d(){var e=0,t=new Z(g),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=g,function(){e.port2.postMessage(0)}}function f(){return function(){setTimeout(g,1)}}function g(){for(var e=0;J>e;e+=2){var t=te[e],n=te[e+1];t(n),te[e]=void 0,te[e+1]=void 0}J=0}function m(){try{var t=e,n=t("vertx");return H=n.runOnLoop||n.runOnContext,l()}catch(r){return f()}}function h(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ie.error=t,ie}}function _(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function w(e,t,n){Q(function(e){var r=!1,o=_(n,t,function(n){r||(r=!0,t!==n?k(e,n):T(e,n))},function(t){r||(r=!0,C(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,C(e,o))},e)}function x(e,t){t._state===re?T(e,t._result):t._state===oe?C(e,t._result):E(t,void 0,function(t){k(e,t)},function(t){C(e,t)})}function j(e,t){if(t.constructor===e.constructor)x(e,t);else{var n=b(t);n===ie?C(e,ie.error):void 0===n?T(e,t):i(n)?w(e,t,n):T(e,t)}}function k(e,t){e===t?C(e,v()):o(t)?j(e,t):T(e,t)}function S(e){e._onerror&&e._onerror(e._result),R(e)}function T(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&Q(R,e))}function C(e,t){e._state===ne&&(e._state=oe,e._result=t,Q(S,e))}function E(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+re]=n,o[i+oe]=r,0===i&&e._state&&Q(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,o,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?O(n,r,o,i):o(i);e._subscribers.length=0}}function A(){this.error=null}function P(e,t){try{return e(t)}catch(n){return ae.error=n,ae}}function O(e,t,n,r){var o,a,s,c,u=i(n);if(u){if(o=P(n,r),o===ae?(c=!0,a=o.error,o=null):s=!0,t===o)return void C(t,y())}else o=r,s=!0;t._state!==ne||(u&&s?k(t,o):c?C(t,a):e===re?T(t,o):e===oe&&C(t,o))}function I(e,t){try{t(function(t){k(e,t)},function(t){C(e,t)})}catch(n){C(e,n)}}function q(e,t){var n=this;n._instanceConstructor=e,n.promise=new e(h),n._validateInput(t)?(n._input=t,n.length=t.length,n._remaining=t.length,n._init(),0===n.length?T(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&T(n.promise,n._result))):C(n.promise,n._validationError())}function D(e){return new se(this,e).promise}function M(e){function t(e){k(o,e)}function n(e){C(o,e)}var r=this,o=new r(h);if(!$(e))return C(o,new TypeError("You must pass an array to race.")),o;for(var i=e.length,a=0;o._state===ne&&i>a;a++)E(r.resolve(e[a]),void 0,t,n);return o}function N(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return k(n,e),n}function z(e){var t=this,n=new t(h);return C(n,e),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this._id=pe++,this._state=void 0,this._result=void 0,this._subscribers=[],h!==e&&(i(e)||L(),this instanceof F||V(),I(this,e))}function U(){var e;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(e.Promise=fe)}var B;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,G,W,$=B,J=0,Q=({}.toString,function(e,t){te[J]=e,te[J+1]=t,J+=2,2===J&&(G?G(g):W())}),K="undefined"!=typeof window?window:void 0,Y=K||{},Z=Y.MutationObserver||Y.WebKitMutationObserver,X="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),ee="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,te=new Array(1e3);W=X?u():Z?d():ee?p():void 0===K&&"function"==typeof e?m():f();var ne=void 0,re=1,oe=2,ie=new A,ae=new A;q.prototype._validateInput=function(e){return $(e)},q.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},q.prototype._init=function(){this._result=new Array(this.length)};var se=q;q.prototype._enumerate=function(){for(var e=this,t=e.length,n=e.promise,r=e._input,o=0;n._state===ne&&t>o;o++)e._eachEntry(r[o],o)},q.prototype._eachEntry=function(e,t){var n=this,r=n._instanceConstructor;a(e)?e.constructor===r&&e._state!==ne?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(r.resolve(e),t):(n._remaining--,n._result[t]=e)},q.prototype._settledAt=function(e,t,n){var r=this,o=r.promise;o._state===ne&&(r._remaining--,e===oe?C(o,n):r._result[t]=n),0===r._remaining&&T(o,r._result)},q.prototype._willSettleAt=function(e,t){var n=this;E(e,void 0,function(e){n._settledAt(re,t,e)},function(e){n._settledAt(oe,t,e)})};var ce=D,ue=M,le=N,de=z,pe=0,fe=F;F.all=ce,F.race=ue,F.resolve=le,F.reject=de,F._setScheduler=s,F._setAsap=c,F._asap=Q,F.prototype={constructor:F,then:function(e,t){var n=this,r=n._state;if(r===re&&!e||r===oe&&!t)return this;var o=new this.constructor(h),i=n._result;if(r){var a=arguments[r-1];Q(function(){O(r,o,a,i)})}else E(n,o,e,t);return o},"catch":function(e){return this.then(null,e)}};var ge=U,me={Promise:fe,polyfill:ge};"function"==typeof define&&define.amd?define(function(){return me}):"undefined"!=typeof t&&t.exports?t.exports=me:"undefined"!=typeof this&&(this.ES6Promise=me),ge()}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:127}],95:[function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=n},{}],96:[function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],97:[function(e,t,n){arguments[4][37][0].apply(n,arguments)},{dup:37}],98:[function(e,t){function n(e,t){return null==t?e:r(t,o(t),e)}var r=e("lodash._basecopy"),o=e("lodash.keys");t.exports=n},{"lodash._basecopy":101,"lodash.keys":119}],99:[function(e,t,n){arguments[4][38][0].apply(n,arguments)},{dup:38,"lodash._baseisequal":106,"lodash._bindcallback":108,"lodash.isarray":116,"lodash.pairs":123}],100:[function(e,t){(function(n){function r(e,t,n,i,f,m,v){var y;if(n&&(y=f?n(e,i,f):n(e)),void 0!==y)return y;if(!u(e))return e;var b=g(e);if(b){if(y=a(e),!t)return l(e,y)}else{var _=B.call(e),x=_==w;if(_!=k&&_!=h&&(!x||f))return V[_]?c(e,_,t):f?e:{};if(y=s(x?{}:e),!t)return p(y,e)}m||(m=[]),v||(v=[]);for(var j=m.length;j--;)if(m[j]==e)return v[j];return m.push(e),v.push(y),(b?d:o)(e,function(o,i){y[i]=r(o,t,n,i,e,m,v)}),y}function o(e,t){return f(e,t,m)}function i(e){var t=new H(e.byteLength),n=new G(t);return n.set(new G(e)),t}function a(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&U.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function s(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function c(e,t,n){var r=e.constructor;switch(t){case R:return i(e);case y:case b:return new r(+e);case A:case P:case O:case I:case q:case D:case M:case N:case z:var o=e.buffer;return new r(n?i(o):o,e.byteOffset,e.length);case j:case C:return new r(e);case S:var a=new r(e.source,L.exec(e));a.lastIndex=e.lastIndex}return a}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=e("lodash._arraycopy"),d=e("lodash._arrayeach"),p=e("lodash._baseassign"),f=e("lodash._basefor"),g=e("lodash.isarray"),m=e("lodash.keys"),h="[object Arguments]",v="[object Array]",y="[object Boolean]",b="[object Date]",_="[object Error]",w="[object Function]",x="[object Map]",j="[object Number]",k="[object Object]",S="[object RegExp]",T="[object Set]",C="[object String]",E="[object WeakMap]",R="[object ArrayBuffer]",A="[object Float32Array]",P="[object Float64Array]",O="[object Int8Array]",I="[object Int16Array]",q="[object Int32Array]",D="[object Uint8Array]",M="[object Uint8ClampedArray]",N="[object Uint16Array]",z="[object Uint32Array]",L=/\w*$/,V={};V[h]=V[v]=V[R]=V[y]=V[b]=V[A]=V[P]=V[O]=V[I]=V[q]=V[j]=V[k]=V[S]=V[C]=V[D]=V[M]=V[N]=V[z]=!0,V[_]=V[w]=V[x]=V[T]=V[E]=!1;var F=Object.prototype,U=F.hasOwnProperty,B=F.toString,H=n.ArrayBuffer,G=n.Uint8Array;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":95,"lodash._arrayeach":96,"lodash._baseassign":98,"lodash._basefor":104,"lodash.isarray":116,"lodash.keys":119}],101:[function(e,t){function n(e,t,n){n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r];n[i]=e[i]}return n}t.exports=n},{}],102:[function(e,t,n){arguments[4][39][0].apply(n,arguments)},{dup:39,"lodash.keys":119}],103:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function o(e,t,i,s){s||(s=[]);for(var l=-1,d=e.length;++l<d;){var p=e[l];n(p)&&a(p)&&(i||u(p)||c(p))?t?o(p,t,i,s):r(s,p):i||(s[s.length]=p)}return s}function i(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&s(d(e))}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}var c=e("lodash.isarguments"),u=e("lodash.isarray"),l=9007199254740991,d=i("length");t.exports=o},{"lodash.isarguments":115,"lodash.isarray":116}],104:[function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(n(i[c],c,i)===!1)break}return t}}var r=n();t.exports=r},{}],105:[function(e,t){function n(e,t,n){if(t!==t)return r(e,n);for(var o=n-1,i=e.length;++o<i;)if(e[o]===t)return o;return-1}function r(e,t,n){for(var r=e.length,o=t+(n?0:-1);n?o--:++o<r;){var i=e[o];if(i!==i)return o}return-1}t.exports=n},{}],106:[function(e,t,n){arguments[4][40][0].apply(n,arguments)},{dup:40,"lodash.isarray":116,
"lodash.istypedarray":118,"lodash.keys":119}],107:[function(e,t){function n(e,t){var n=-1,s=r,c=e.length,u=!0,l=u&&c>=a,d=l?i():null,p=[];d?(s=o,u=!1):(l=!1,d=t?[]:p);e:for(;++n<c;){var f=e[n],g=t?t(f,n,e):f;if(u&&f===f){for(var m=d.length;m--;)if(d[m]===g)continue e;t&&d.push(g),p.push(f)}else s(d,g,0)<0&&((t||l)&&d.push(g),p.push(f))}return p}var r=e("lodash._baseindexof"),o=e("lodash._cacheindexof"),i=e("lodash._createcache"),a=200;t.exports=n},{"lodash._baseindexof":105,"lodash._cacheindexof":109,"lodash._createcache":111}],108:[function(e,t,n){arguments[4][41][0].apply(n,arguments)},{dup:41}],109:[function(e,t){function n(e,t){var n=e.data,o="string"==typeof t||r(t)?n.set.has(t):n.hash[t];return o?0:-1}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],110:[function(e,t){function n(e){return i(function(t,n){var i=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,c=a>2?n[2]:void 0,u=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),c&&o(n[0],n[1],c)&&(s=3>a?void 0:s,a=1);++i<a;){var l=n[i];l&&e(t,l,s)}return t})}var r=e("lodash._bindcallback"),o=e("lodash._isiterateecall"),i=e("lodash.restparam");t.exports=n},{"lodash._bindcallback":108,"lodash._isiterateecall":113,"lodash.restparam":124}],111:[function(e,t){(function(n){function r(e){var t=e?e.length:0;for(this.data={hash:u(null),set:new c};t--;)this.push(e[t])}function o(e){var t=this.data;"string"==typeof e||a(e)?t.set.add(e):t.hash[e]=!0}function i(e){return u&&c?new r(e):null}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var s=e("lodash._getnative"),c=s(n,"Set"),u=s(Object,"create");r.prototype.push=o,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._getnative":112}],112:[function(e,t,n){arguments[4][42][0].apply(n,arguments)},{dup:42}],113:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&a(l(e))}function o(e,t){return e="number"==typeof e||c.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function i(e,t,n){if(!s(n))return!1;var i=typeof t;if("number"==i?r(n)&&o(t,n.length):"string"==i&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=/^\d+$/,u=9007199254740991,l=n("length");t.exports=i},{}],114:[function(e,t){function n(e,t,n,a){return t&&"boolean"!=typeof t&&i(e,t,n)?t=!1:"function"==typeof t&&(a=n,n=t,t=!1),"function"==typeof n?r(e,t,o(n,a,3)):r(e,t)}var r=e("lodash._baseclone"),o=e("lodash._bindcallback"),i=e("lodash._isiterateecall");t.exports=n},{"lodash._baseclone":100,"lodash._bindcallback":108,"lodash._isiterateecall":113}],115:[function(e,t,n){arguments[4][43][0].apply(n,arguments)},{dup:43}],116:[function(e,t,n){arguments[4][44][0].apply(n,arguments)},{dup:44}],117:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){return i(e,t,s)}function o(e){var t;if(!n(e)||d.call(e)!=c||a(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var o;return r(e,function(e,t){o=t}),void 0===o||l.call(e,o)}var i=e("lodash._basefor"),a=e("lodash.isarguments"),s=e("lodash.keysin"),c="[object Object]",u=Object.prototype,l=u.hasOwnProperty,d=u.toString;t.exports=o},{"lodash._basefor":104,"lodash.isarguments":115,"lodash.keysin":120}],118:[function(e,t,n){arguments[4][45][0].apply(n,arguments)},{dup:45}],119:[function(e,t,n){arguments[4][46][0].apply(n,arguments)},{dup:46,"lodash._getnative":112,"lodash.isarguments":115,"lodash.isarray":116}],120:[function(e,t){function n(e,t){return e="number"==typeof e||c.test(e)?+e:-1,t=null==t?d:t,e>-1&&e%1==0&&t>e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&r(t)&&(s(e)||a(e))&&t||0;for(var i=e.constructor,c=-1,u="function"==typeof i&&i.prototype===e,d=Array(t),p=t>0;++c<t;)d[c]=c+"";for(var f in e)p&&n(f,t)||"constructor"==f&&(u||!l.call(e,f))||d.push(f);return d}var a=e("lodash.isarguments"),s=e("lodash.isarray"),c=/^\d+$/,u=Object.prototype,l=u.hasOwnProperty,d=9007199254740991;t.exports=i},{"lodash.isarguments":115,"lodash.isarray":116}],121:[function(e,t,n){arguments[4][47][0].apply(n,arguments)},{dup:47,"lodash._arraymap":97,"lodash._basecallback":99,"lodash._baseeach":102,"lodash.isarray":116}],122:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t,i,s,u){if(!c(e))return e;var d=a(t)&&(f(t)||m(t)),p=d?void 0:h(t);return l(p||t,function(a,c){if(p&&(c=a,a=t[c]),n(a))s||(s=[]),u||(u=[]),o(e,t,c,r,i,s,u);else{var l=e[c],f=i?i(l,a,c,e,t):void 0,g=void 0===f;g&&(f=a),void 0===f&&(!d||c in e)||!g&&(f===f?f===l:l!==l)||(e[c]=f)}}),e}function o(e,t,n,r,o,i,s){for(var c=i.length,l=t[n];c--;)if(i[c]==l)return void(e[n]=s[c]);var d=e[n],h=o?o(d,l,n,e,t):void 0,y=void 0===h;y&&(h=l,a(l)&&(f(l)||m(l))?h=f(d)?d:a(d)?u(d):[]:g(l)||p(l)?h=p(d)?v(d):g(d)?d:{}:y=!1),i.push(l),s.push(h),y?e[n]=r(h,l,o,i,s):(h===h?h!==d:d===d)&&(e[n]=h)}function i(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&s(b(e))}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&y>=e}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=e("lodash._arraycopy"),l=e("lodash._arrayeach"),d=e("lodash._createassigner"),p=e("lodash.isarguments"),f=e("lodash.isarray"),g=e("lodash.isplainobject"),m=e("lodash.istypedarray"),h=e("lodash.keys"),v=e("lodash.toplainobject"),y=9007199254740991,b=i("length"),_=d(r);t.exports=_},{"lodash._arraycopy":95,"lodash._arrayeach":96,"lodash._createassigner":110,"lodash.isarguments":115,"lodash.isarray":116,"lodash.isplainobject":117,"lodash.istypedarray":118,"lodash.keys":119,"lodash.toplainobject":125}],123:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{dup:48,"lodash.keys":119}],124:[function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(r);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-t,0),a=Array(i);++r<i;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}var r="Expected a function",o=Math.max;t.exports=n},{}],125:[function(e,t){function n(e){return r(e,o(e))}var r=e("lodash._basecopy"),o=e("lodash.keysin");t.exports=n},{"lodash._basecopy":101,"lodash.keysin":120}],126:[function(e,t){var n=e("lodash._baseflatten"),r=e("lodash._baseuniq"),o=e("lodash.restparam"),i=o(function(e){return r(n(e,!1,!0))});t.exports=i},{"lodash._baseflatten":103,"lodash._baseuniq":107,"lodash.restparam":124}],127:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?g=f.concat(g):h=-1,g.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=g.length;t;){for(f=g,g=[];++h<t;)f&&f[h].run();h=-1,t=g.length}f=null,m=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,g=[],m=!1,h=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new c(e,t)),1!==g.length||m||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],128:[function(e){!function(t){e("es6-promise").polyfill();var n=e("@condenast/atp-utl/feature"),r=t.cns.queue,o=t.cns=e("../../assets/"),i={campaign:"cns",name:"loaded",type:"info",environment:"production",meta:{cns:"2.6.0",feature_storage:n.isStorageEnabled(),feature_get_entries:n.isGetEntriesEnabled(),feature_performance_now:null!==n.performance.now()}},a=i.meta;o.queue.set(r),o.setup({identifiers:{human:"arstechnica",human_slug:"arstechnica",human_var:"arstechnica"}},{services:{ads:{version:"2.4.0",plugins:{ars_accelerator:{version:"0.1.4"},amazon_match_buy:{version:"1.0.1"},yieldbot:{version:"0.1.6"},adobe_audience_manager:{version:"0.1.4"},index_exchange:{version:"1.1.1"},newsletter:{version:"0.1.3"},proximic:{version:"0.1.2"},"4d":{version:"0.2.0"}}},metrics:{version:"1.0.0",plugins:{sparrow:{version:"0.1.11"}}}},built:"Thu Apr 20 2017 14:50:00 GMT-0400 (EDT)"}).then(function(){o.extend({name:"ads",controller:e("@condenast/atp-cns-service-ads"),version:"2.4.0",cnsVersion:"2.6.0",config:{request_vp_range:{__default:{desktop:400,tablet:400,mobile:200}},refresh_vp_range:{__default:{desktop:100,tablet:100,mobile:100}},network:3379,timers:{plugin_requests_max:1e3,ad_request_queuer:100,refresh_delay:3e4},slot:{types:{_default:{suffix:"dart",link_by_instance:!0,request_in_vp_only:!0,style:{background:"#000000"},render:{slot:{top:"body"}},mods:{"advertiser-ids|1446519415":{refresh:!1}}},_out_of_page:{_default:{refresh:!1,request_in_vp_only:!1,can_be_hidden:!0}},inline_index:{_default:{sizes:{desktop:["728x91","970x251","970x401","930x401","932x373","970x126","1440x521","9x2","10x1"],tablet:["728x91","970x251","970x401","930x401","970x126","1440x521","9x2","10x1"],mobile:["300x51","320x51","320x151","320x251","300x251","9x2","10x1"]},render:{slot:{top:".ad.ad_fullwidth"}}}},post_nav_liveblog:{_default:{refresh:!1,sizes:{desktop:["728x90","970x66","970x250","970x90"],tablet:["728x90"],mobile:["300x50","320x50","300x150","320x150"]},render:{slot:{top:"#liveblog_crown_top"}}}},post_nav:{_default:{sizes:{desktop:["728x90","970x66","970x250","930x400","932x372","970x90","970x418","9x1","9x3"],tablet:["728x90","970x66","970x250","930x400","970x90","970x418","9x1"],mobile:["300x50","320x50","300x150","320x150","9x1"]},refresh:!1,data:{"jivox-ad-id":"constellation-crown"},render:{desktop:{slot:{top:".ad.ad_crown"}},tablet:{slot:{top:".ad.ad_crown"}},mobile:{slot:{top:"#ad-top"}}}}},article_in_text:{_default:{sizes:{desktop:!1,tablet:!1,mobile:["300x51","300x251","320x51","300x151","320x151","9x2","9x3","10x1"]},render:{slot:{top:"#inline300x250_frame"}}}},native_xrail:{_default:{id:"native-xrail300x140_frame",refresh:!1,sizes:{desktop:["300x140"],tablet:["300x140"],mobile:["300x140"]},render:{slot:{top:"aside#ad_xrail_native"}}}},siderail:{_default:{sizes:{desktop:["300x250","300x600","300x1050"],tablet:!1,mobile:!1},render:{desktop:{slot:{top:".ad.ad_xrail"}}}}},siderail_btf:{_default:{sizes:{desktop:["300x251","300x601","300x1051"],tablet:!1,mobile:!1},render:{desktop:{slot:{top:".ad.ad_xrail"}}}}},footer:{_default:{sizes:{desktop:["728x91","970x251","9x2","10x1"],tablet:["728x91","9x2","10x1"],mobile:["300x58","300x258","9x2","10x1"]},render:{mobile:{slot:{top:"#page-footer"}}}}}},__auid_one:"ars",sets:{_default:["post_nav","siderail","inline_index","_out_of_page","native_xrail","footer"],article:["post_nav","siderail","native_xrail","article_in_text","_out_of_page","footer"],liveblog:["post_nav_liveblog","siderail"]}}}}).then(function(t){var n="cns_ads";a[n]="2.4.0";var r=[];return r.push(t.extend({name:"ars_accelerator",controller:e("@condenast/atp-cns-service-ads-plugin-ars-accelerator"),version:"0.1.4",config:{endpoint:"//cdn.accelerator.arsdev.net/hot/"}})),a[n+"_ars_accelerator"]="0.1.4",r.push(t.extend({name:"amazon_match_buy",controller:e("@condenast/atp-cns-service-ads-plugin-amazon-match-buy"),version:"1.0.1",config:{amazon_id:"3035",endpoint:"//c.amazon-adsystem.com/aax2/apstag.js",eligible_sizes:["300x250","300x600","320x50","728x90","970x250"]}})),a[n+"_amazon_match_buy"]="1.0.1",r.push(t.extend({name:"yieldbot",controller:e("@condenast/atp-cns-service-ads-plugin-yieldbot"),version:"0.1.6",config:{endpoint:"//cdn.yldbt.com/js/yieldbot.intent.js"}})),a[n+"_yieldbot"]="0.1.6",r.push(t.extend({name:"adobe_audience_manager",controller:e("@condenast/atp-cns-service-ads-plugin-adobe-audience-manager"),version:"0.1.4",config:{}})),a[n+"_adobe_audience_manager"]="0.1.4",r.push(t.extend({name:"index_exchange",controller:e("@condenast/atp-cns-service-ads-plugin-index-exchange"),version:"1.1.1",config:{}})),a[n+"_index_exchange"]="1.1.1",r.push(t.extend({name:"newsletter",controller:e("@condenast/atp-cns-service-ads-plugin-newsletter"),version:"0.1.3",config:{}})),a[n+"_newsletter"]="0.1.3",r.push(t.extend({name:"proximic",controller:e("@condenast/atp-cns-service-ads-plugin-proximic"),version:"0.1.2",config:{}})),a[n+"_proximic"]="0.1.2",r.push(t.extend({name:"4d",controller:e("@condenast/atp-cns-service-ads-plugin-4d"),version:"0.2.0",config:{}})),a[n+"_4d"]="0.2.0",Promise.all(r)}).then(function(){o.queue.play("ads")}),o.extend({name:"metrics",controller:e("@condenast/atp-cns-service-metrics"),version:"1.0.0",cnsVersion:"2.6.0",config:{}}).then(function(t){var n="cns_metrics";a[n]="1.0.0";var r=[];return r.push(t.extend({name:"sparrow",controller:e("@condenast/atp-cns-service-metrics-plugin-sparrow"),version:"0.1.11",config:{preinit:["infinityid","4d"],meta:{cPd:"function () { if (window._4d && window._4d.context && window._4d.context.pubdate) { return window._4d.context.pubdate; } else { return undefined; }}",cKh:'function (d) { var fds = window._4d.context; var keywords = ""; if (fds.keywords && fds.keywords.list) { var temp = fds.keywords.list.filter(function (d) { return d.score > .6 ? true : false; }); temp = temp.map(function (d) { return d.keyword.toLowerCase(); }); keywords = temp.join(",");} return keywords;}',dim1:"v1.0.25_iframe_query"},events:[{type:["click"],options:[{_t:"share"}],selector:".vertical-social-share a,.horizontal-social-share a,.social-share a"},{type:["pageview"],options:[],selector:"window"},{type:["scroll"],options:[],selector:"window"},{type:["timespent"],options:[],selector:"window"}],origin:"ars-technica",title:"Ars Technica",environment:"prod",version:"1.2"}})),a[n+"_sparrow"]="0.1.11",Promise.all(r)}).then(function(){o.queue.play("metrics")}).then(function(){o.async("metrics",function(e){e.emit(i)})})})}(window)},{"../../assets/":1,"@condenast/atp-cns-service-ads":18,"@condenast/atp-cns-service-ads-plugin-4d":2,"@condenast/atp-cns-service-ads-plugin-adobe-audience-manager":3,"@condenast/atp-cns-service-ads-plugin-amazon-match-buy":4,"@condenast/atp-cns-service-ads-plugin-ars-accelerator":6,"@condenast/atp-cns-service-ads-plugin-index-exchange":7,"@condenast/atp-cns-service-ads-plugin-newsletter":8,"@condenast/atp-cns-service-ads-plugin-proximic":9,"@condenast/atp-cns-service-ads-plugin-yieldbot":10,"@condenast/atp-cns-service-metrics":49,"@condenast/atp-cns-service-metrics-plugin-sparrow":31,"@condenast/atp-utl/feature":60,"es6-promise":94}]},{},[128]);