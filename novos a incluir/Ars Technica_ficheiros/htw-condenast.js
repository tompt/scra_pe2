window.headertag=window.headertag||{},window.headertag.headertagconfig={siteId:175689,timeout:1e3,enableSingleRequest:!0,networkCallBuffer:800,partners:{INDX:{targetingType:"slot",timeout:1e3,contextualTargeting:{confidence:.3,queryKeyword:"HALctx",segmentKeyword:"HALSeg",paddingSize:3},prefetch:{enabled:!0,info:{"default":{requiredIndexSlots:[]},allure:{requiredIndexSlots:["1","2","3","4","10","11","19","20","22","23","24","25","26","27"]},arstechnica:{requiredIndexSlots:["1","2","3","4","5","10","11","12","19","20","22","23","24","25","26","27"]},glamour:{requiredIndexSlots:["1","2","3","4","5","10","11","12","13","14","15","19","20","25","26","27"]},pitchfork:{requiredIndexSlots:["1","2","3","4","5","10","11","19","20","22","23","24"]},vanityfair:{requiredIndexSlots:["1","2","3","4","5","6","10","11","13","14","19","20","22","23","24","25","26","27"]},wired:{requiredIndexSlots:["1","2","3","4","5","6","10","11","13","14","19","20","22","23","24","25","26","27","30"]},wmagazine:{requiredIndexSlots:["1","2","3","4","5","10","11","13","14","19","20","22","23","24"]}}}},AOL:{targetingType:"slot",timeout:1e3,region:"na",networkId:"10920.1",apiVersion:"3.0",targetingKey:"aolbid",roundingBuckets:{type:1,buckets:[{range:[0,20],granularity:.05},{range:[20,50],granularity:1}]},placements:{4430533:["728x90","728x91","728x92"],4430531:["970x250","970x251","970x252"],4430532:["300x250","300x251","300x252"],4430530:["300x600","300x601","300x602"],4430536:["320x50","320x51","320x58","320x59","300x50","300x51","300x58","300x59"]}},APNX:{targetingType:"slot",timeout:1e3,disabled:!1,roundingBuckets:{type:1,buckets:[{range:[0,20],granularity:.05},{range:[20,50],granularity:1}]},adUnits:[]},FB:{disabled:!1,timeout:1e3,debug:!1,appId:"101358874221",targetingType:"slot",roundingBuckets:{type:1,buckets:[{range:[0,20],granularity:.05},{range:[20,50],granularity:1}]},adUnits:{mobile:[],desktop:[]},prefetch:{enabled:!0,info:{newyorker:["300x250","300x251"],glamour:["300x250","300x251"],vanityfair:["300x250","300x251"]}}}}},/.*vogue.com.*/.test(location.href)?window.headertag.headertagconfig.partners.APNX.disabled=!0:/.*allure.com.*/.test(location.href)?(window.headertag.pagetype="allure",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10561928"}}]},{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10561925"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10561927"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10561926"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10561929"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10561930"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10561932"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10561933"}}]}]):/.*arstechnica.com.*/.test(location.href)?(window.headertag.pagetype="arstechnica",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10561954"}}]},{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10561951"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10561953"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10561952"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10561957"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10561958"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10561959"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10561960"}}]}]):/.*glamour.com.*/.test(location.href)?(window.headertag.pagetype="glamour",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562020"}}]},{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10562017"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562019"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562018"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562021"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562023"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562024"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562025"}}]}],window.headertag.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x251",sizes:[[300,250]],placementId:"101358874221_10155116099164222"},{code:"300x252",sizes:[[300,250]],placementId:"101358874221_10155116102349222"}]):/.*pitchfork.com.*/.test(location.href)?(window.headertag.pagetype="pitchfork",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10562080"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562081"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562082"}}]},{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562083"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562085"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562086"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562088"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562089"}}]}]):/.*vanityfair.com.*/.test(location.href)?(window.headertag.pagetype="vanityfair",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10562121"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562122"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562123"}}]},{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562124"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562125"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562126"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562127"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562128"}}]}],window.headertag.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x251",sizes:[[300,250]],placementId:"101358874221_10155118570399222"},{code:"300x259",sizes:[[300,250]],placementId:"101358874221_10155118570914222"}]):/.*wired.com.*/.test(location.href)?(window.headertag.pagetype="wired",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10562146"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562147"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562148"}}]},{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562149"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562150"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562151"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562153"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562154"}}]}]):/.*wmagazine.com.*/.test(location.href)?(window.headertag.pagetype="wmagazine",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10562159"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562160"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562161"}}]},{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562162"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562163"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562164"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562165"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562166"}}]}]):/.*newyorker.com.*/.test(location.href)?(window.headertag.pagetype="newyorker",window.headertag.headertagconfig.partners.FB.adUnits.mobile=[{code:"300x250",sizes:[[300,250]],placementId:"101358874221_10155118574934222"},{code:"300x251",sizes:[[300,250]],placementId:"101358874221_10155118575229222"}]):(window.headertag.pagetype="default",window.headertag.headertagconfig.partners.APNX.adUnits=[{code:"300x250",sizes:[[300,250],[300,600]],bids:[{bidder:"appnexus",params:{placementId:"10562094"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562096"}}]},{code:"728x91",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562097"}}]},{code:"728x90",sizes:[[728,90],[970,250]],bids:[{bidder:"appnexus",params:{placementId:"10562098"}}]},{code:"300x251",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562099"}}]},{code:"300x250",sizes:[[300,250]],bids:[{bidder:"appnexus",params:{placementId:"10562100"}}]},{code:"320x51",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562101"}}]},{code:"320x50",sizes:[[320,50],[300,50]],bids:[{bidder:"appnexus",params:{placementId:"10562102"}}]}]),window.headertag.isMobile=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))},function(){"use strict";window.headertag.Q=function(){function e(e){return function(){return H.apply(e,arguments)}}function t(e){return e===Object(e)}function r(e){return"[object StopIteration]"===re(e)||e instanceof X}function n(e,t){if(L&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ne)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var i=r.join("\n"+ne+"\n");e.stack=a(i)}}function a(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var a=t[n];s(a)||i(a)||!a||r.push(a)}return r.join("\n")}function i(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function o(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function s(e){var t=o(e);if(!t)return!1;var r=t[0],n=t[1];return r===K&&n>=F&&de>=n}function d(){if(L)try{throw new Error}catch(e){var t=e.stack.split("\n"),r=t[0].indexOf("@")>0?t[1]:t[2],n=o(r);if(!n)return;return K=n[0],n[1]}}function p(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function l(e){return e instanceof h?e:v(e)?P(e):O(e)}function u(){function e(e){t=e,i.source=e,Q(r,function(t,r){l.nextTick(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,n=void 0}var t,r=[],n=[],a=Z(u.prototype),i=Z(h.prototype);if(i.promiseDispatch=function(e,a,i){var o=V(arguments);r?(r.push(o),"when"===a&&i[1]&&n.push(i[1])):l.nextTick(function(){t.promiseDispatch.apply(t,o)})},i.valueOf=function(){if(r)return i;var e=m(t);return y(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},l.longStackSupport&&L)try{throw new Error}catch(o){i.stack=o.stack.substring(o.stack.indexOf("\n")+1)}return a.promise=i,a.resolve=function(r){t||e(l(r))},a.fulfill=function(r){t||e(O(r))},a.reject=function(r){t||e(D(r))},a.notify=function(e){t||Q(n,function(t,r){l.nextTick(function(){r(e)})},void 0)},a}function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=u();try{e(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}return t.promise}function f(e){return c(function(t,r){for(var n=0,a=e.length;a>n;n++)l(e[n]).then(t,r)})}function h(e,t,r){void 0===t&&(t=function(e){return D(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=Z(h.prototype);if(n.promiseDispatch=function(r,a,i){var o;try{o=e[a]?e[a].apply(n,i):t.call(n,a,i)}catch(s){o=D(s)}r&&r(o)},n.inspect=r,r){var a=r();"rejected"===a.state&&(n.exception=a.reason),n.valueOf=function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value}}return n}function g(e,t,r,n){return l(e).then(t,r,n)}function m(e){if(y(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function y(e){return e instanceof h}function v(e){return t(e)&&"function"==typeof e.then}function w(e){return y(e)&&"pending"===e.inspect().state}function b(e){return!y(e)||"fulfilled"===e.inspect().state}function x(e){return y(e)&&"rejected"===e.inspect().state}function I(){ae.length=0,ie.length=0,se||(se=!0)}function T(e,t){se&&("object"==typeof process&&"function"==typeof process.emit&&l.nextTick.runAfter(function(){-1!==$(ie,e)&&(process.emit("unhandledRejection",t,e),oe.push(e))}),ie.push(e),t&&"undefined"!=typeof t.stack?ae.push(t.stack):ae.push("(no stack) "+t))}function S(e){if(se){var t=$(ie,e);-1!==t&&("object"==typeof process&&"function"==typeof process.emit&&l.nextTick.runAfter(function(){var r=$(oe,e);-1!==r&&(process.emit("rejectionHandled",ae[t],e),oe.splice(r,1))}),ie.splice(t,1),ae.splice(t,1))}}function D(e){var t=h({when:function(t){return t&&S(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return T(t,e),t}function O(e){return h({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},"delete":function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return te(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function P(e){var t=u();return l.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(r){t.reject(r)}}),t.promise}function R(e){return h({isDef:function(){}},function(t,r){return _(e,t,r)},function(){return l(e).inspect()})}function k(e,t,r){return l(e).spread(t,r)}function E(e){return function(){function t(e,t){var o;if("undefined"==typeof StopIteration){try{o=n[e](t)}catch(s){return D(s)}return o.done?l(o.value):g(o.value,a,i)}try{o=n[e](t)}catch(s){return r(s)?l(s.value):D(s)}return g(o,a,i)}var n=e.apply(this,arguments),a=t.bind(t,"next"),i=t.bind(t,"throw");return a()}}function q(e){l.done(l.async(e)())}function A(e){throw new X(e)}function N(e){return function(){return k([this,j(arguments)],function(t,r){return e.apply(t,r)})}}function _(e,t,r){return l(e).dispatch(t,r)}function j(e){return g(e,function(e){var t=0,r=u();return Q(e,function(n,a,i){var o;y(a)&&"fulfilled"===(o=a.inspect()).state?e[i]=o.value:(++t,g(a,function(n){e[i]=n,0===--t&&r.resolve(e)},r.reject,function(e){r.notify({index:i,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function z(e){if(0===e.length)return l.resolve();var t=l.defer(),r=0;return Q(e,function(n,a,i){function o(e){t.resolve(e)}function s(){r--,0===r&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function d(e){t.notify({index:i,value:e})}var p=e[i];r++,g(p,o,s,d)},void 0),t.promise}function U(e){return g(e,function(e){return e=J(e,l),g(j(J(e,function(e){return g(e,W,W)})),function(){return e})})}function M(e){return l(e).allSettled()}function B(e,t){return l(e).then(void 0,void 0,t)}function C(e,t){return l(e).nodeify(t)}var L=!1;try{throw new Error}catch(G){L=!!G.stack}var K,X,F=d(),W=function(){},Y=function(){function e(){for(var e,n;r.next;)r=r.next,e=r.task,r.task=void 0,n=r.domain,n&&(r.domain=void 0,n.enter()),t(e,n);for(;s.length;)e=s.pop(),t(e);a=!1}function t(t,r){try{t()}catch(n){if(o)throw r&&r.exit(),setTimeout(e,0),r&&r.enter(),n;setTimeout(function(){throw n},0)}r&&r.exit()}var r={task:void 0,next:null},n=r,a=!1,i=void 0,o=!1,s=[];if(Y=function(e){n=n.next={task:e,domain:o&&process.domain,next:null},a||(a=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)o=!0,i=function(){process.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var d=new MessageChannel;d.port1.onmessage=function(){i=p,d.port1.onmessage=e,e()};var p=function(){d.port2.postMessage(0)};i=function(){setTimeout(e,0),p()}}else i=function(){setTimeout(e,0)};return Y.runAfter=function(e){s.push(e),a||(a=!0,i())},Y}(),H=Function.call,V=e(Array.prototype.slice),Q=e(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;n>r;r++)r in this&&(t=e(t,this[r],r));return t}),$=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),J=e(Array.prototype.map||function(e,t){var r=this,n=[];return Q(r,function(a,i,o){n.push(e.call(t,i,o,r))},void 0),n}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},ee=e(Object.prototype.hasOwnProperty),te=Object.keys||function(e){var t=[];for(var r in e)ee(e,r)&&t.push(r);return t},re=e(Object.prototype.toString);X="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ne="From previous event:";l.resolve=l,l.nextTick=Y,l.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=u,u.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(V(arguments,1)):e.resolve(r)}},l.Promise=c,l.promise=c,c.race=f,c.all=j,c.reject=D,c.resolve=l,l.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},l.join=function(e,t){return l(e).join(t)},h.prototype.join=function(e){return l([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},l.race=f,h.prototype.race=function(){return this.then(l.race)},l.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,t,r){function a(t){try{return"function"==typeof e?e(t):t}catch(r){return D(r)}}function i(e){if("function"==typeof t){n(e,s);try{return t(e)}catch(r){return D(r)}}return D(e)}function o(e){return"function"==typeof r?r(e):e}var s=this,d=u(),p=!1;return l.nextTick(function(){s.promiseDispatch(function(e){p||(p=!0,d.resolve(a(e)))},"when",[function(e){p||(p=!0,d.resolve(i(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=o(e)}catch(n){if(r=!0,!l.onerror)throw n;l.onerror(n)}r||d.notify(t)}]),d.promise},l.tap=function(e,t){return l(e).tap(t)},h.prototype.tap=function(e){return e=l(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},l.when=g,h.prototype.thenResolve=function(e){return this.then(function(){return e})},l.thenResolve=function(e,t){return l(e).thenResolve(t)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},l.thenReject=function(e,t){return l(e).thenReject(t)},l.nearer=m,l.isPromise=y,l.isPromiseAlike=v,l.isPending=w,h.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=b,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=x,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ae=[],ie=[],oe=[],se=!0;l.resetUnhandledRejections=I,l.getUnhandledReasons=function(){return ae.slice()},l.stopUnhandledRejectionTracking=function(){I(),se=!1},I(),l.reject=D,l.fulfill=O,l.master=R,l.spread=k,h.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},l.async=E,l.spawn=q,l["return"]=A,l.promised=N,l.dispatch=_,h.prototype.dispatch=function(e,t){var r=this,n=u();return l.nextTick(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},l.get=function(e,t){return l(e).dispatch("get",[t])},h.prototype.get=function(e){return this.dispatch("get",[e])},l.set=function(e,t,r){return l(e).dispatch("set",[t,r])},h.prototype.set=function(e,t){return this.dispatch("set",[e,t])},l.del=l["delete"]=function(e,t){return l(e).dispatch("delete",[t])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},l.mapply=l.post=function(e,t,r){return l(e).dispatch("post",[t,r])},h.prototype.mapply=h.prototype.post=function(e,t){return this.dispatch("post",[e,t])},l.send=l.mcall=l.invoke=function(e,t){return l(e).dispatch("post",[t,V(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,V(arguments,1)])},l.fapply=function(e,t){return l(e).dispatch("apply",[void 0,t])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},l["try"]=l.fcall=function(e){return l(e).dispatch("apply",[void 0,V(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,V(arguments)])},l.fbind=function(e){var t=l(e),r=V(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(V(arguments))])}},h.prototype.fbind=function(){var e=this,t=V(arguments);return function(){return e.dispatch("apply",[this,t.concat(V(arguments))])}},l.keys=function(e){return l(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},l.all=j,h.prototype.all=function(){return j(this)},l.any=z,h.prototype.any=function(){return z(this)},l.allResolved=p(U,"allResolved","allSettled"),h.prototype.allResolved=function(){return U(this)},l.allSettled=M,h.prototype.allSettled=function(){return this.then(function(e){return j(J(e,function(e){function t(){return e.inspect()}return e=l(e),e.then(t,t)}))})},l.fail=l["catch"]=function(e,t){return l(e).then(void 0,t)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},l.progress=B,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},l.fin=l["finally"]=function(e,t){return l(e)["finally"](t)},h.prototype.fin=h.prototype["finally"]=function(e){return e=l(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},l.done=function(e,t,r,n){return l(e).done(t,r,n)},h.prototype.done=function(e,t,r){var a=function(e){l.nextTick(function(){if(n(e,i),!l.onerror)throw e;l.onerror(e)})},i=e||t||r?this.then(e,t,r):this;"object"==typeof process&&process&&process.domain&&(a=process.domain.bind(a)),i.then(void 0,a)},l.timeout=function(e,t,r){return l(e).timeout(t,r)},h.prototype.timeout=function(e,t){var r=u(),n=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),r.reject(t)},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},l.delay=function(e,t){return void 0===t&&(t=e,e=void 0),l(e).delay(t)},h.prototype.delay=function(e){return this.then(function(t){var r=u();return setTimeout(function(){r.resolve(t)},e),r.promise})},l.nfapply=function(e,t){return l(e).nfapply(t)},h.prototype.nfapply=function(e){var t=u(),r=V(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},l.nfcall=function(e){var t=V(arguments,1);return l(e).nfapply(t)},h.prototype.nfcall=function(){var e=V(arguments),t=u();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},l.nfbind=l.denodeify=function(e){var t=V(arguments,1);return function(){var r=t.concat(V(arguments)),n=u();return r.push(n.makeNodeResolver()),l(e).fapply(r).fail(n.reject),n.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=V(arguments);return e.unshift(this),l.denodeify.apply(void 0,e)},l.nbind=function(e,t){var r=V(arguments,2);return function(){function n(){return e.apply(t,arguments)}var a=r.concat(V(arguments)),i=u();return a.push(i.makeNodeResolver()),l(n).fapply(a).fail(i.reject),i.promise}},h.prototype.nbind=function(){var e=V(arguments,0);return e.unshift(this),l.nbind.apply(void 0,e)},l.nmapply=l.npost=function(e,t,r){return l(e).npost(t,r)},h.prototype.nmapply=h.prototype.npost=function(e,t){var r=V(t||[]),n=u();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},l.nsend=l.nmcall=l.ninvoke=function(e,t){var r=V(arguments,2),n=u();return r.push(n.makeNodeResolver()),l(e).dispatch("post",[t,r]).fail(n.reject),n.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var t=V(arguments,1),r=u();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},l.nodeify=C,h.prototype.nodeify=function(e){return e?void this.then(function(t){l.nextTick(function(){e(null,t)})},function(t){l.nextTick(function(){e(t)})}):this},l.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var de=d();return l}()}(),function(){"use strict";var e={};e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.divIdToSlot=function(t){for(var r=e.getSlots(),n=0,a=r.length;a>n;n++)if(r[n].getSlotElementId()===t)return r[n];return null},e.getDivIdToSlotMap=function(t){t||(t=e.getSlots());for(var r={},n=0,a=t.length;a>n;n++)r[t[n].getSlotElementId()]=t[n];return r},e.getDivIds=function(t){t||(t=e.getSlots());for(var r=[],n=0,a=t.length;a>n;n++)r.push(t[n].getSlotElementId());return r},e.objToQueryString=function(e){var t="?";for(var r in e)e.hasOwnProperty(r)&&(t+=r+"="+e[r]+"&");return t.slice(0,-1)},e.generateCorrelator=function(){return"_"+String((new Date).getTime()%2592e6)+String(Math.floor(16384*Math.random()))},e.getSlots=function(){return window.googletag&&window.googletag.apiReady?googletag.pubads().getSlots().slice():null},e.isInteger=function(e){return"number"==typeof e&&e%1===0},e.validateNonEmptyString=function(e,t){return!!(t&&!e||e&&"string"==typeof e)},e.validateFunction=function(e,t){return!!(t&&!e||e&&"function"==typeof e)},e.validateNonEmptyArray=function(t,r){return!!(r&&!t||t&&e.isArray(t)&&t.length)},e.validateNonEmptyObject=function(t,r){return!!(r&&!t||t&&"object"==typeof t&&!e.isEmpty(t))},e.validateInteger=function(t,r,n,a){return!!(a&&"number"!=typeof t||"number"==typeof t&&e.isInteger(t)&&("number"==typeof r?t>=r:!0)&&("number"==typeof n?n>=t:!0))},e.validateBoolean=function(e,t){return!!(t&&"boolean"!=typeof e||"boolean"==typeof e)},e.isMobile=function(){return-1!==navigator.userAgent.indexOf("Mobi")},e.now=function(){return(new Date).getTime()},e.addScriptTag=function(e,t,r){var n=document.createElement("script");n.type="text/javascript",n.async=t,n.src=("https:"===document.location.protocol?"https:":"http:")+e,n.onload=r,n.readyState&&(n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,r())});var a=document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(n,a),n},e.localStorageSupported=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}},e.getProtocol=function(){return"https:"===document.location.protocol?"https:":"http:"},e.getPageUrl=function(){try{return window.top.location.href}catch(e){return window.location.href}},window.headertag.Utils=e}(),function(){"use strict";function e(e){function t(e){d[e]=d[e]||{},d[e].startTime=n.now()}function r(e){d.hasOwnProperty(e)&&(d[e].stopTime=n.now())}function a(e,t,r){d[e].partners=d[e].partners||{},d[e].partners[t]=d[e].partners[t]||{},d[e].partners[t].timeout=r,d[e].partners[t].startTime=n.now()}function i(e,t){d.hasOwnProperty(e)&&(d[e].partners[t].stopTime=n.now())}function o(e,t,r,n){d.hasOwnProperty(e)&&(d[e].partners[t].targetingType=r,d[e].partners[t].returnedDemand=n)}function s(t){if(d.hasOwnProperty(t)){var r={};r.s=e,r.u=encodeURIComponent(document.location.href),r.type="RT",r.r=t.replace("_",""),r.t0=d[t].startTime,r.t1=d[t].stopTime||-1;var a=d[t].partners;for(var i in a)if(a.hasOwnProperty(i)){var o=-1,s=1;a[i].startTime&&a[i].stopTime&&(o=a[i].stopTime-a[i].startTime,s=0),r[i+".t"]=o,r[i+".to"]=s,r[i+".ts"]=a[i].timeout||-1;var p=null;if(a[i].hasOwnProperty("returnedDemand"))if("page"===a[i].targetingType)for(p in a[i].returnedDemand.page)a[i].returnedDemand.page.hasOwnProperty(p)&&(r[i+".p.pl."+p]=a[i].returnedDemand.page[p].toString||"");else for(var l in a[i].returnedDemand.slot)if(a[i].returnedDemand.slot.hasOwnProperty(l))for(p in a[i].returnedDemand.slot[l].demand)a[i].returnedDemand.slot[l].demand.hasOwnProperty(p)&&(r[i+".p."+l+"."+p]=a[i].returnedDemand.slot[l].demand[p].toString()||"")}var u=n.objToQueryString(r),c=("https:"===document.location.protocol?"https://as-sec.":"http://as.")+"casalemedia.com/headerstats"+u,f=new XMLHttpRequest;f.open("GET",c,!0),f.send(),delete d[t]}}var d={};this.startSessionTimer=t,this.stopSessionTimer=r,this.startPartnerTimer=a,this.stopPartnerTimer=i,this.recordReturnedDemand=o,this.sendReport=s}function t(t){function a(e,r){function a(r,a){if((!r||a)&&(q[e]=a,A[e]=t.partners[e].disabled,N[e]=t.partners[e].timeout,a.getSupportedOptions().hasOwnProperty("prefetch")&&a.getSupportedOptions().prefetch&&t.partners[e].hasOwnProperty("prefetch")&&t.partners[e].prefetch.enabled)){
var i=n.generateCorrelator();C.startSessionTimer(i),C.startPartnerTimer(i,e,N[e]);var o=function(){C.stopPartnerTimer(i,e),C.stopSessionTimer(i),C.sendReport(i)},s=a.getPartnerTargetingType();"page"===s?a.prefetchDemand(i,H,o):t.partners[e].prefetch.hasOwnProperty("info")&&window.headertag.pagetype&&t.partners[e].prefetch.info.hasOwnProperty(window.headertag.pagetype)&&a.prefetchDemand(i,t.partners[e].prefetch.info[window.headertag.pagetype],o)}}var i=[];return n.validateNonEmptyString(e)||i.push("partnerId must be a non-empty string."),q.hasOwnProperty(e)&&i.push("partnerId already registered."),n.validateFunction(r)||i.push("init must be a function."),i.length?!1:(t.partners.hasOwnProperty(e)&&r(t.partners[e],a),!0)}function i(e,t){var r=[];if(n.validateNonEmptyArray(e)||r.push("partnerIds must be a non-empty array."),n.validateBoolean(t)||r.push("toggle must be a boolean."),r.length)return!1;for(var a=!1,i=0,o=e.length;o>i;i++)if(q.hasOwnProperty(e[i])){if("INDX"===e[i])continue;A[e[i]]=t,a=!0}return a}function o(e){var t=[];return n.validateInteger(e,1)||t.push("timeout must be an interger and greater than 0."),t.length?!1:(E=e,!0)}function s(e){return i(e,!1)}function d(e){return i(e,!0)}function p(e,t){var r=[];return n.validateInteger(t,0)||r.push("timeout must be an interger and greater than or equal to 0."),N.hasOwnProperty(e)||r.push("partnerId not registered and instantiated."),r.length?!1:(N[e]=t,!0)}function l(e,t){var r=[];return n.validateNonEmptyString(e)||r.push("partnerId must be a non-empty string."),q.hasOwnProperty(e)||r.push("partnerId is not registered."),n.validateNonEmptyString(t)||r.push("targetingType must be a non-empty string."),r.length?!1:q[e].setPartnerTargetingType(t)}function u(e,t){if(n.validateNonEmptyObject(e)){var r=n.getDivIdToSlotMap(t),a=null,i=null;for(var o in e)if(e.hasOwnProperty(o))if(e[o].hasOwnProperty("page"))for(i in e[o].page.demand)e[o].page.demand.hasOwnProperty(i)&&(googletag.pubads().setTargeting(i,e[o].page.demand[i]),K.page[i]=!0);else if(e[o].hasOwnProperty("slot"))for(a in r)if(r.hasOwnProperty(a)&&e[o].slot.hasOwnProperty(a))for(i in e[o].slot[a].demand)e[o].slot[a].demand.hasOwnProperty(i)&&(r[a].setTargeting(i,e[o].slot[a].demand[i]),K.slot[a]=K.slot[a]||{},K.slot[a][i]=!0)}}function c(e){var t=null;for(t in K.page)K.page.hasOwnProperty(t)&&(googletag.pubads().clearTargeting(t),delete K.page[t]);for(var r=0;r<e.length;r++){var n=e[r];if(K.slot.hasOwnProperty(n)){var a=e[r].getTargetingMap();e[r].clearTargeting();for(t in a)a.hasOwnProperty(t)&&(K.slot[n].hasOwnProperty(t)||e[r].setTargeting(t,a[t]));delete K.slot[n]}}}function f(e){if(e&&G.push(e),!L&&G.length){L=!0,X++,e=G.shift(),c(e.slots),u(e.demand,e.slots);var t=X,r=n.getDivIds(e.slots);F[r]=t,setTimeout(function(){t===X&&(L=!1,f())},Y),e.divId?googletag.display(e.divId):googletag.pubads().refresh(e.slots,e.opt)}}function h(e,t,a,i){var o=[];if(n.validateNonEmptyString(e)||o.push("correlator must be a non-empty string."),n.validateNonEmptyString(a)||o.push("partnerId must be a non-empty string."),q.hasOwnProperty(a)||o.push("partnerId not registered and instantiated."),n.validateNonEmptyArray(i)||o.push("slots must be a non-empty array."),o.length)return null;var s=r.defer(),d=null,p=!1,l=q[a].getPartnerTargetingType(),u=function(t,r){if(!p){if(clearTimeout(d),q[a].getSupportedAnalytics().time&&C.stopPartnerTimer(e,a),t)return void s.reject();if(!n.validateNonEmptyObject(r))return void s.reject();q[a].getSupportedAnalytics().demand&&C.recordReturnedDemand(e,a,l,r);var i={};i[a]=r,s.resolve(i)}};return N[a]&&(d=setTimeout(function(){p=!0,s.reject()},N[a])),q[a].getSupportedAnalytics().time&&C.startPartnerTimer(e,a,N[a]),"page"===l?setTimeout(q[a].getDemand.bind(D,e,t,u),0):setTimeout(q[a].getDemand.bind(D,e,i,u),0),s.promise}function g(e){for(var t={},r=0,n=e.length;n>r;r++)if("fulfilled"===e[r].state){var a=e[r].value;for(var i in a)if(a.hasOwnProperty(i))if(t.hasOwnProperty(i)){if(a[i].hasOwnProperty("page"))t[i].page.timestamp<a[i].page.timestamp&&(t[i]=a[i]);else if(a[i].hasOwnProperty("slot"))for(var o in a[i].slot)a[i].slot.hasOwnProperty(o)&&(t[i].slot.hasOwnProperty(o)?t[i].slot[o].timestamp<a[i].slot[o].timestamp&&(t[i].slot[o]=a[i].slot[o]):t[i].slot[o]=a[i].slot[o])}else t[i]=a[i]}return t}function m(e,t,a,i){var o=r.defer();a=a.sizes;var s=[];if(n.validateNonEmptyString(e)||s.push("correlator must be a non-empty string."),n.validateNonEmptyArray(a)||s.push("slots must be a non-empty array."),n.validateNonEmptyString(i)||s.push("action must be a non-empty string."),s.length)return o.resolve(),o.promise;a=a.slice();var d=[],p={};for(var l in q)q.hasOwnProperty(l)&&(p[l]=a.slice());for(var u=a.length-1;u>=0;u--){var c=a[u];if(_.hasOwnProperty(c)){d.indexOf(_[c])<0&&d.push(_[c]);var f=n.now(),m=_[c].inspect();if("fulfilled"===m.state){var y=m.value;for(var v in y)if(y.hasOwnProperty(v))if(q[v].getPartnerDemandExpiry()<0)p[v].splice(p[v].indexOf(a[u]),1);else if(y[v].hasOwnProperty("page")){if(y[v].page.gCorrelator!==t)continue;if(f-y[v].page.timestamp>q[v].getPartnerDemandExpiry())continue;p[v].splice(p[v].indexOf(a[u]),1)}else if(y[v].hasOwnProperty("slot")){if(!y[v].slot.hasOwnProperty(c))continue;if(f-y[v].slot[c].timestamp>q[v].getPartnerDemandExpiry())continue;p[v].splice(p[v].indexOf(a[u]),1)}}else for(var w in q)q.hasOwnProperty(w)&&p[w].splice(p[w].indexOf(a[u]),1)}else _[c]=o.promise}("display"!==i||a.length)&&C.startSessionTimer(e);for(var b in q)if(q.hasOwnProperty(b)&&!A[b]&&p[b].length){var x=h(e,t,b,p[b]);d.push(x)}var I=null,T=!1;return E&&(I=setTimeout(function(){T=!0;for(var e=[],t=0,r=d.length;r>t;t++)e.push(d[t].inspect());var n=g(e);if("display"!==i||!M)for(var t=0;t<a.length;t++){var s=a[t];_.hasOwnProperty(s)&&delete _[s]}o.resolve(n)},E)),r.allSettled(d).then(function(t){if(!T){clearTimeout(I),("display"!==i||a.length)&&C.stopSessionTimer(e);var r=g(t);if("display"!==i||!M)for(var n=0;n<a.length;n++){var s=a[n];_.hasOwnProperty(s)&&delete _[s]}o.resolve(r)}}),o.promise}function y(e){var t=[];if(n.validateNonEmptyString(e)||t.push("Invalid divId."),!t.length){var r=null;if(B?z?r=[n.divIdToSlot(e)]:(z=!0,r=n.getSlots()):r=[n.divIdToSlot(e)],!W.hasOwnProperty(e)){for(var a=n.getDivIds(r),i=0,o=a.length;o>i;i++)W[a[i]]=!0;var s=n.generateCorrelator();m(s,H,r,"display").then(function(t){if(M)return void googletag.display(e);var n={demand:t,slots:r,divId:e,correlator:s};return f(n)}).then(function(){C.sendReport(s)})["catch"](function(e){})}}}function v(e){var t=n.generateCorrelator();e.addTargeting("IOM",[""]),e.addTargeting("IPM",[""]),m(t,H,e.getMeta(),"refresh").then(function(t){w(t,e),e.process.done()}).then(function(){C.sendReport(t)})["catch"](function(t){e.process.failed()})}function w(e,t){var r,n,a,i=t.getMeta().sizes;for(n in e)if(e.hasOwnProperty(n))if("INDX"===n)x(e.INDX,t);else if("AOL"===n)b(e.AOL,t);else for(r=0;r<i.length;r++)if(a=e[n].slot,a.hasOwnProperty(i[r]))for(var o in a[i[r]].demand)t.addTargeting(o,a[i[r]].demand[o])}function b(e,t){var r,n,a,i=t.getMeta().sizes,o=0,s="";for(r=0;r<i.length;r++)if(n=e.slot,n.hasOwnProperty(i[r]))for(var d in n[i[r]].demand)a=parseInt(n[i[r]].demand[d].split("_")[1],10),(a>o||a===o&&Math.random()>.5)&&(o=a,s=n[i[r]].demand[d]);o&&t.addTargeting("aolbid",[s])}function x(e,t){var r,n,a,i=t.getMeta().sizes,o=0,s="",d=[];for(r=0;r<i.length;r++)if(n=e.slot,n.hasOwnProperty(i[r]))for(var p in n[i[r]].demand)"IPM"===p?d.push(n[i[r]].demand[p]):(a=parseInt(n[i[r]].demand[p][0].split("_")[1],10),(a>o||a===o&&Math.random()>.5)&&(o=a,s=n[i[r]].demand[p]));o&&t.addTargeting("IOM",[s]),d.length>0&&t.addTargeting("IPM",d)}function I(e,t,r,a){var i=[];if(n.validateNonEmptyString(e)||i.push("adUnitPath must be a non-empty string."),n.validateNonEmptyArray(t)||i.push("size must be a non-empty array."),n.validateNonEmptyString(r,!0)||i.push("Optional. divId must be a non-empty string."),n.validateNonEmptyString(a,!0)||i.push("Optional. clickUrl must be a non-empty string."),!i.length){var o=googletag.defineSlot(e,t,r).addService(googletag.pubads());a&&o.setClickUrl(a),y(r)}}function T(e,t){var r=[];if(n.validateNonEmptyArray(e,!0)||r.push("Optional. slots must be a non-empty array."),n.validateNonEmptyObject(t,!0)||r.push("Optional. options must be a non-empty object."),!r.length){e&&e.length||(e=n.getSlots());var a=n.generateCorrelator();M&&!U?U=!0:H=googletag.pubads().getCorrelator(),m(a,H,e,"refresh").then(function(r){if(B){var n={demand:r,slots:e,opt:t,correlator:a};f(n)}else for(var i=0,o=e.length;o>i;i++)f({demand:r,slots:[e[i]],opt:t,correlator:a})}).then(function(){C.sendReport(a)})["catch"](function(e){})}}function S(){return{display:I.bind(D),refresh:T.bind(D)}}var D=this,O=[],P=[];n.validateNonEmptyObject(t)||P.push("Config not provided."),t.hasOwnProperty("siteId")&&n.validateInteger(t.siteId,0)||(t.siteId=0,O.push("Invalid siteId, using default value of 0.")),t.hasOwnProperty("timeout")&&n.validateInteger(t.timeout,1)||(t.timeout=1e3,O.push("Invalid timeout, using default value of 1000ms.")),t.hasOwnProperty("networkCallBuffer")?n.validateInteger(t.networkCallBuffer,1)||(t.networkCallBuffer=500,O.push("Invalid networkCallBuffer, using default value of 500.")):t.networkCallBuffer=500,t.hasOwnProperty("disableInitialLoad")?n.validateBoolean(t.disableInitialLoad)||(t.disableInitialLoad=!1,O.push("Invalid disableInitialLoad, using default value of false.")):t.disableInitialLoad=!1,t.hasOwnProperty("enableSingleRequest")?n.validateBoolean(t.enableSingleRequest)||(t.enableSingleRequest=!0,O.push("Invalid enableSingleRequest, using default value of true.")):(t.enableSingleRequest=!0,O.push("enableSingleRequest not provided, using default value of true.")),t.partners&&t.partners.hasOwnProperty("INDX")||(t.partners=t.partners||{},t.partners.INDX={});for(var R in t.partners)t.partners.hasOwnProperty(R)&&(t.partners[R].hasOwnProperty("disabled")?(n.validateBoolean(t.partners[R].disabled)||(O.push("Invalid disabled set for "+R+", using default value true."),t.partners[R].disabled=!0),"INDX"===R&&t.partners[R].disabled===!0&&(t.partners[R].disabled=!1,O.push("Cannot disable partner INDX."))):t.partners[R].disabled=!1,t.partners[R].hasOwnProperty("timeout")?n.validateInteger(t.partners[R].timeout,0)||(O.push("Invalid partner timeout set for "+R+", using default value 0 (i.e. not set)."),t.partners[R].timeout=0):t.partners[R].timeout=0);if(O.length,!P.length){var k=t.siteId,E=t.timeout,q={},A={},N={},_={},z=!1,U=!1,M=t.disableInitialLoad,B=t.enableSingleRequest,C=new e(k),L=!1,G=[],K={page:{},slot:{}},X=0,F={},W={},Y=t.networkCallBuffer,H=-1;this.apiReady=!0,this.registerPartner=a,this.setGlobalTimeout=o,this.enablePartners=s,this.disablePartners=d,this.setPartnerTimeout=p,this.setPartnerTargetingType=l,window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){for(var t in F)if(F.hasOwnProperty(t)&&-1!==t.indexOf(e.slot.getSlotElementId())){var r=F[t];delete F[t],j,r===X&&(L=!1,f())}})}),this.display=y,this.pubads=S,this.condeFetchDemand=v,this.condeAddTargeting=w}}var r=window.headertag.Q,n=window.headertag.Utils;if(window.headertag){var a=window.headertag;window.headertag=new t(window.headertag.headertagconfig);for(var i in a)a.hasOwnProperty(i)&&(window.headertag[i]=a[i])}}(),/.*/.test(location.href)&&(window.headertag.cygnus_index_args={name:"cygnus",embedMode:1,siteID:175689,slots:[{id:"1",width:728,height:90,siteID:175689},{id:"2",width:970,height:250,siteID:175690},{id:"3",width:970,height:90,siteID:175691},{id:"4",width:728,height:90,siteID:175692},{id:"5",width:970,height:250,siteID:175693},{id:"6",width:970,height:90,siteID:175694},{id:"7",width:728,height:90,siteID:175695},{id:"8",width:970,height:250,siteID:175696},{id:"9",width:970,height:90,siteID:175697},{id:"10",width:300,height:250,siteID:175698},{id:"11",width:300,height:600,siteID:175699},{id:"12",width:300,height:1050,siteID:175700},{id:"13",width:300,height:250,siteID:175701},{id:"14",width:300,height:600,siteID:175702},{id:"15",width:300,height:1050,siteID:175703},{id:"16",width:300,height:250,siteID:175704},{id:"17",width:300,height:600,siteID:175705},{id:"18",width:300,height:1050,siteID:175706}],gpt_map:{1:"728x90",2:"970x250",3:"970x90",4:"728x91",5:"970x251",6:"970x91",7:"728x92",8:"970x252",9:"970x92",10:"300x250",11:"300x600",12:"300x1050",13:"300x251",14:"300x601",15:"300x1051",16:"300x252",17:"300x602",18:"300x1052"}}),window.headertag.isMobile()&&(window.headertag.cygnus_index_args={name:"cygnus",embedMode:1,siteID:175689,slots:[{id:"19",width:300,height:50,siteID:175707},{id:"20",width:320,height:50,siteID:175708},{id:"21",width:300,height:250,siteID:175709},{id:"22",width:300,height:50,siteID:175710},{id:"23",width:320,height:50,siteID:175711},{id:"24",width:300,height:250,siteID:175712},{id:"25",width:300,height:50,siteID:175713},{id:"26",width:320,height:50,siteID:175714},{id:"27",width:300,height:250,siteID:175715},{id:"28",width:300,height:50,siteID:175716},{id:"29",width:320,height:50,siteID:175717},{id:"30",width:300,height:250,siteID:175718}],gpt_map:{19:"300x50",20:"320x50",21:"300x250",22:"300x51",23:"320x51",24:"300x251",25:"300x58",26:"320x58",27:"300x258",28:"300x59",29:"320x59",30:"300x259"},sizeMapping:{"300x51":"300x58","320x51":"320x58","300x251":"300x258"}}),function(){"use strict";function validateTargetingType(e){return"string"==typeof e&&SUPPORTED_TARGETING_TYPES[e]}function getKeys(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function arrayCompare(e,t){var r,n,a={matched:0,success:!1};if(!e||!t)return a;for(r=e.length,n=0;r>n;n++){if(-1===t.indexOf(e[n]))return a;a.matched++}return a.success=!0,a}function retrieveIndexSlot(e,t,r){var n,a,i,o,s,d,p,l={};for(s in t)if(!r[s]){o=t[s],n=0,i=0,a=0;for(d in o)n++,p=arrayCompare(o[d],e[d]),p.success&&(a++,i+=p.matched);n===a&&(l.indexId||(l={matched:i,indexId:s}),i>l.matched&&(l.matched=i,l.indexId=s))}return l.indexId}function mapSlots(e){var t,r,n,a=headerTagArgs.gptDivs,i=headerTagArgs.gptMap,o=e.length,s={};if(a)for(n=0;o>n;n++){r=e[n];for(t in a)-1!==a[t].indexOf(r)&&(s[t]||(s[t]=[]),s[t].push(r))}if(!a&&i)for(n=0;o>n;n++){r=e[n];for(t in i)i[t]===r&&(s[t]||(s[t]=[]),s[t].push(r))}return s}function convertSlotDemandObject(e){if("slot"===targetingType)return e;var t,r,n={page:{slotIds:[],demand:{}}};for(t in e.slot){n.page.slotIds.push(t),n.page.timestamp?n.page.timestamp=Math.min(n.page.timestamp,e.slot[t].timestamp):n.page.timestamp=e.slot[t].timestamp;for(r in e.slot[t].demand)n.page.demand[r]=n.page.demand[r]||[],n.page.demand[r]=n.page.demand[r].concat(e.slot[t].demand[r])}return n}function parseResults(e,t,r){var n,a,i,o,s,d,p=[],l={slot:{}};if(t){prefetch.demand=JSON.parse(JSON.stringify(headerTagSlots)),prefetch.state=prefetchState.READY,prefetch.analyticsCallback(prefetch.correlator);for(var u=0,c=prefetch.callbacks.length;c>u;u++)setTimeout(prefetch.callbacks[u],0);return void(prefetch.timestamp=Utils.now())}if(r?(n=prefetch.correlator,o=prefetch.demand,d=mapSlots(r)):(n=correlatorTracker[e],o=headerTagSlots,d=ixSlots[n]),(r||dSlots[n]).map(function(e){for(i=e,a=0;a<o.length;a++)s=o[a].split("_"),"undefined"!=typeof d[s[1]]&&-1!==d[s[1]].indexOf(i)&&(r&&p.push(prefetch.demand[a]),l.slot[i]||(l.slot[i]={timestamp:prefetch.timestamp||Utils.now(),demand:{}}),l.slot[i].demand[s[0]]||(l.slot[i].demand[s[0]]=[]),l.slot[i].demand[s[0]].push(s[1]+"_"+s[2]))}),r){var f;for(var h in d)if(d.hasOwnProperty(h)&&-1!==prefetch.slotIds.indexOf(h)){for(a=0;a<d[h].length;a++)l.slot[d[h][a]]||(l.slot[d[h][a]]={timestamp:prefetch.timestamp,demand:{}});f=prefetch.slotIds.indexOf(h),-1!==f&&prefetch.slotIds.splice(f,1)}for(demandStore=l,a=prefetch.demand.length-1;a>=0;a--)-1!==p.indexOf(prefetch.demand[a])&&prefetch.demand.splice(a,1)}else"function"==typeof cb[n]&&(cb[n](null,l),delete cb[n]),delete correlatorTracker[e],delete ixSlots[n],delete dSlots[n]}function escapeCharacter(e){var t=META[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function quote(e){return ESCAPABLE.lastIndex=0,ESCAPABLE.test(e)?e.replace(ESCAPABLE,escapeCharacter):e}function pad(e,t){for(var r=e.toString();r.length<t;)r="0"+r;return r}function getBestTopics(e,t){var r,n=e.slice(),a=[];for(n.sort(function(e,t){return e.score<t.score?1:e.score>t.score?-1:0}),r=0;r<n.length&&r!==t;r++)(!t||t>r)&&a.push(n[r]);return a}function processData(e,t,r){var n,a,i=[];for(n=0;n<e.length;n++)a=e[n].name.split("_"),a[1]&&i.push(t+pad(a[1],r));return i}function getTopics(e,t,r,n,a){for(var i=[],o=0;o<e.length;o++)e[o].score>=t&&i.push(e[o]);return processData(getBestTopics(i,n),r,a)}function OpenRTBRequest(e,t,r){if("number"!=typeof e||e%1!==0||0>e)throw"Invalid Site ID";this.siteID=e,this.impressions=[],top===self?(this.sitePage=location.href,this.topframe=1):(this.sitePage=document.referrer,this.topframe=0),"undefined"==typeof indexRequestData.requestCounter?indexRequestData.requestCounter=Math.floor(256*Math.random()):indexRequestData.requestCounter=(indexRequestData.requestCounter+1)%256,this.requestID=String((new Date).getTime()%2592e3*256+indexRequestData.requestCounter+256),correlatorTracker[this.requestID]=r}function cygnus_index_judge(e){headerTagSlots=[];var t,r={},n="^(?:"+headerTagPublicKey+"|"+headerTagPrivateKey+")_(?:T([0-9])_)?(.*)_.*$",a=new RegExp(n),i=[];for(t=0;t<e.length;t++)if(e[t].split("_")[0]!==headerTagPrivateKey){var o=a.exec(e[t]);if("undefined"!=typeof o&&null!==o){var s,d;if(s=o[1],d=o[2],"undefined"!=typeof s&&null!==s||(s=0),r[d]=r[d]||{},"undefined"==typeof r[d].tier||r[d].tier<s){r[d].tier=s;var p=e[t];if(s>0){var l=e[t].split("_"),u=l.shift(),c=l.join("_");l.shift();var f=l.join("_");p=u+"_"+f,indexRequestData.targetIDToBid[f]=indexRequestData.targetIDToBid[c]}r[d].target=p}}}else i.push(e[t]);var h,g=[];for(h in r)r.hasOwnProperty(h)&&g.push(r[h].target);return g.concat(i)}function getSlotInfo(e){for(var t=0;t<headerTagArgs.slots.length;t++){var r=headerTagArgs.slots[t];if(r.id==e)return r}}function Partner(e){function t(e,t){if(Utils.isEmpty(e))return t;if(Utils.isEmpty(t))return e;var r,n;for(r in t.slot)if("undefined"==typeof e.slot[r])e.slot[r]=t.slot[r];else{e.slot[r].timestamp=Math.min(e.slot[r].timestamp,t.slot[r].timestamp);for(n in t.slot[r].demand){switch(typeof e.slot[r].demand[n]){case"undefined":e.slot[r].demand[n]=[];break;case"string":e.slot[r].demand[n]=[e.slot[r].demand[n]]}e.slot[r].demand[n]=e.slot[r].demand[n].concat(t.slot[r].demand[n])}}return e}function r(e,t,r){var n,a,i,o;headerTagArgs.parseFn=r?window.headertag.headertag_parse_prefetch:window.headertag.headertag_parse_res;try{if("undefined"==typeof headerTagArgs||"undefined"==typeof headerTagArgs.siteID||"undefined"==typeof headerTagArgs.slots)return;for("undefined"==typeof indexRequestData&&(indexRequestData={},indexRequestData.impIDToSlotID={},indexRequestData.reqOptions={}),i=new OpenRTBRequest(headerTagArgs.siteID,headerTagArgs.parseFn,e),headerTagArgs.url&&"string"==typeof headerTagArgs.url&&i.setPageOverride(headerTagArgs.url),indexRequestData.impIDToSlotID[i.requestID]={},indexRequestData.reqOptions[i.requestID]={},n=0;n<headerTagArgs.slots.length;n++)o=headerTagArgs.slots[n],-1!==t.indexOf(o.id.toString())&&(a=i.addImpression(o.width,o.height,o.bidfloor,o.bidfloorcur,o.id,o.siteID),a&&(indexRequestData.impIDToSlotID[i.requestID][a]=String(o.id)));return"number"==typeof headerTagArgs.targetMode&&(indexRequestData.reqOptions[i.requestID].targetMode=headerTagArgs.targetMode),"function"==typeof headerTagArgs.callback&&(indexRequestData.reqOptions[i.requestID].callback=headerTagArgs.callback),i.sendRequestAsync(e,r)}catch(s){}}var n=this;targetingType=e.targetingType||"slot",headerTagArgs={gptMap:window.headertag.cygnus_index_args.gpt_map,gptDivs:window.headertag.cygnus_index_args.gpt_divs,siteID:window.headertag.cygnus_index_args.siteID,slots:window.headertag.cygnus_index_args.slots,url:window.headertag.cygnus_index_args.url,targetMode:window.headertag.cygnus_index_args.targetMode,callback:window.headertag.cygnus_index_args.callback};var a=e.targetingType,i=SUPPORTED_ANALYTICS,o=SUPPORTED_OPTIONS,s=SUPPORTED_OPTIONS.demandExpiry?SUPPORTED_OPTIONS.demandExpiry:-1;this.publicKey=e.publicKey||"IOM",this.privateKey=e.privateKey||"IPM",headerTagPrivateKey=this.privateKey,headerTagPublicKey=this.publicKey,this.getPartnerTargetingType=function(){return a},this.getSupportedAnalytics=function(){return i},this.getSupportedOptions=function(){return o},this.getPartnerDemandExpiry=function(){return s},this.setPartnerTargetingType=function(e){return validateTargetingType(e)?(a=e,targetingType=a,!0):!1},this.prefetchDemand=function(e,t,n){prefetch.state=prefetchState.IN_PROGRESS,prefetch.correlator=e,prefetch.slotIds=t.requiredIndexSlots.slice(),prefetch.slotIdsInPrefetch=t.requiredIndexSlots.slice(),prefetch.analyticsCallback=n,r(e,t.requiredIndexSlots,!0)},this.getDemand=function d(e,a,i){if(prefetch.state===prefetchState.IN_PROGRESS){for(var s=getKeys(mapSlots(a)),p=!1,l=0,u=s.length;u>l;l++){var c=prefetch.slotIdsInPrefetch.indexOf(s[l]);-1!==c&&(prefetch.slotIdsInPrefetch.splice(c,1),p=!0)}if(p)return void prefetch.callbacks.push(d.bind(n,e,a,i))}var f={};if(prefetch.state===prefetchState.READY&&(prefetch.demand&&prefetch.slotIds.length&&parseResults(null,!1,a),demandStore.slot)){f.slot=f.slot||{};for(var h=a.length-1;h>=0;h--){var g=a[h];demandStore.slot.hasOwnProperty(g)&&((o.demandExpiry<0||Utils.now()-demandStore.slot[g].timestamp<=o.demandExpiry)&&(f.slot[g]=demandStore.slot[g],a.splice(h,1)),delete demandStore.slot[g])}if(prefetch.timestamp&&Utils.now()-prefetch.timestamp>o.demandExpiry&&(prefetch.slotIds=[],prefetch.demand=[],delete prefetch.timestamp),Utils.validateNonEmptyObject(demandStore.slot)||prefetch.slotIds.length||(prefetch.state=prefetchState.USED,delete prefetch.timestamp),!a.length)return void i(null,convertSlotDemandObject(f))}cb[e]=function(e,r){return e?void i(e):void i(null,convertSlotDemandObject(t(f,r)))},dSlots[e]=a,ixSlots[e]=mapSlots(a);var m=getKeys(ixSlots[e]);return m.length?void r(e,m):i(null,convertSlotDemandObject(f))}}function init(e,t){var r=[];return Utils=window.headertag.Utils,e.hasOwnProperty("targetingType")&&!validateTargetingType(e.targetingType)&&(r.push("targetingType either not set or invalid. Defaulting to using slot level targeting."),e.targetingType="slot"),e.hasOwnProperty("publicKey")&&!Utils.validateNonEmptyString(e.publicKey)&&(r.push("Private key is not a string. Defaulting value to IOM"),e.publicKey="IOM"),e.hasOwnProperty("privateKey")&&!Utils.validateNonEmptyString(e.privateKey)&&(r.push("Private key is not a string. Defaulting value to IPM"),e.privateKey="IPM"),r.length?t(r,new Partner(e)):void t(null,new Partner(e))}var PARTNER_ID="INDX",SUPPORTED_TARGETING_TYPES={page:!0,slot:!0},SUPPORTED_ANALYTICS={time:!0,demand:!0},SUPPORTED_OPTIONS={prefetch:!0,demandExpiry:57e3},prefetchState={NEW:1,IN_PROGRESS:2,READY:3,USED:4},prefetch={state:prefetchState.NEW,demand:null,correlator:null,slotIds:[],callbacks:[]},demandStore={},headerTagArgs,headerTagSlots,headerTagPublicKey,headerTagPrivateKey,cb={},correlatorTracker={},ESCAPABLE=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,META={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},indexRequestData,dSlots={},ixSlots={},targetingType,Utils,demandExpiry=57e3;OpenRTBRequest.prototype.serialize=function(){var e,t,r,n,a=[],i=window.headertag.headertagconfig.partners.INDX.contextualTargeting;for("undefined"!=typeof _4d&&_4d.context&&_4d.context.topics&&(a=getTopics(_4d.context.topics,i.confidence,i.segmentKeyword,i.count,i.paddingSize)),e=a.length?'{"id":'+this.requestID+',"site":{"page":"'+quote(this.sitePage)+"?"+i.queryKeyword+"="+a.join(",")+'"':'{"id":'+this.requestID+',"site":{"page":"'+quote(this.sitePage)+'"',"string"==typeof document.referrer&&(e+=',"ref":"'+quote(document.referrer)+'"'),e+='},"imp":[',n=0;n<this.impressions.length;n++)t=this.impressions[n],r=[],e+='{"id":"'+t.id+'", "banner":{"w":'+t.w+',"h":'+t.h+',"topframe":'+String(this.topframe)+"}","number"==typeof t.bidfloor&&(e+=',"bidfloor":'+t.bidfloor,"string"==typeof t.bidfloorcur&&(e+=',"bidfloorcur":"'+quote(t.bidfloorcur)+'"')),"string"!=typeof t.slotID||t.slotID.match(/^\s*$/)||r.push('"sid":"'+quote(t.slotID)+'"'),"number"==typeof t.siteID&&r.push('"siteID":'+t.siteID),r.length>0&&(e+=',"ext": {'+r.join()+"}"),e+=n+1==this.impressions.length?"}":"},";return e+="]}"},OpenRTBRequest.prototype.addImpression=function(e,t,r,n,a,i){var o={id:String(this.impressions.length+1)};if("number"!=typeof e||1>=e)return null;if("number"!=typeof t||1>=t)return null;if(("string"==typeof a||"number"==typeof a)&&String(a).length<=50&&(o.slotID=String(a)),o.w=e,o.h=t,void 0!==r&&"number"!=typeof r)return null;if("number"==typeof r){if(0>r)return null;if(o.bidfloor=r,void 0!==n&&"string"!=typeof n)return null;o.bidfloorcur=n}if("undefined"!=typeof i){if(!("number"==typeof i&&i%1===0&&i>=0))return null;o.siteID=i}return this.impressions.push(o),o.id},OpenRTBRequest.prototype.sendRequestAsync=function(correlator,isPrefetch){if(0===this.impressions.length)return void(cb.hasOwnProperty(correlator)&&(cb[correlator](null,{}),delete cb[correlator]));var jsonURI=encodeURIComponent(this.serialize()),scriptSrc="https:"===window.location.protocol?"https://as-sec.casalemedia.com":"http://as.casalemedia.com";scriptSrc+=isPrefetch?"/cygnus?v=7&fn=window.headertag.headertag_parse_prefetch&s="+this.siteID+"&r="+jsonURI:"/cygnus?v=7&fn=window.headertag.headertag_parse_res&s="+this.siteID+"&r="+jsonURI;var xhttp=new XMLHttpRequest;xhttp.withCredentials=!0,xhttp.onreadystatechange=function(){if(4===xhttp.readyState&&200===xhttp.status)try{eval(xhttp.responseText)}catch(e){cb.hasOwnProperty(correlator)&&(cb[correlator]([e.toString()]),delete cb[correlator])}},xhttp.open("GET",scriptSrc,!0),xhttp.send()},window.headertag.headertag_parse_res=function(e){var t;try{if(headerTagSlots=[],e){if("object"!=typeof indexRequestData||"object"!=typeof indexRequestData.impIDToSlotID||"undefined"==typeof indexRequestData.impIDToSlotID[e.id])return;var r,n=0;"object"==typeof indexRequestData.reqOptions&&"object"==typeof indexRequestData.reqOptions[e.id]&&("function"==typeof indexRequestData.reqOptions[e.id].callback&&(r=indexRequestData.reqOptions[e.id].callback),"number"==typeof indexRequestData.reqOptions[e.id].targetMode&&(n=indexRequestData.reqOptions[e.id].targetMode)),indexRequestData.lastRequestID=e.id,t=correlatorTracker[e.id];var a,i,o,s,d,p,l,u=[],c="undefined"==typeof e.seatbid?0:e.seatbid.length;for(p=0;c>p;p++)for(l=0;l<e.seatbid[p].bid.length;l++)a=e.seatbid[p].bid[l],"object"==typeof a.ext&&"string"==typeof a.ext.pricelevel&&"undefined"!=typeof indexRequestData.impIDToSlotID[e.id][a.impid]&&(i=indexRequestData.impIDToSlotID[e.id][a.impid],"undefined"==typeof headerTagSlots&&(headerTagSlots=[]),"undefined"==typeof indexRequestData.targetIDToBid&&(indexRequestData.targetIDToBid={}),"undefined"==typeof indexRequestData.correlator&&(indexRequestData.correlator={}),"string"==typeof a.ext.dealid?(o=1===n?i+a.ext.pricelevel:i+"_"+a.ext.dealid,s=headerTagPrivateKey+"_"):(o=i+a.ext.pricelevel,s=headerTagPublicKey+"_"),headerTagSlots.push(s+o),void 0===indexRequestData.targetIDToBid[o]?(indexRequestData.targetIDToBid[o]=[a.adm],indexRequestData.correlator[o]=[t]):(indexRequestData.targetIDToBid[o].push(a.adm),indexRequestData.correlator[o].push(t)),d={},d.impressionID=a.impid,"undefined"!=typeof a.ext.dealid&&(d.dealID=a.ext.dealid),d.bid=a.price,d.slotID=i,d.priceLevel=a.ext.pricelevel,d.target=s+o,u.push(d));"function"==typeof r&&(0===u.length?r(e.id):r(e.id,u)),headerTagSlots=cygnus_index_judge(headerTagSlots.slice(0))}}catch(f){}"undefined"==typeof headerTagSlots&&(headerTagSlots=[]),parseResults(e.id)},window.headertag.headertag_parse_prefetch=function(e){var t;try{if(headerTagSlots=[],e){if("object"!=typeof indexRequestData||"object"!=typeof indexRequestData.impIDToSlotID||"undefined"==typeof indexRequestData.impIDToSlotID[e.id])return;var r,n=0;"object"==typeof indexRequestData.reqOptions&&"object"==typeof indexRequestData.reqOptions[e.id]&&("function"==typeof indexRequestData.reqOptions[e.id].callback&&(r=indexRequestData.reqOptions[e.id].callback),"number"==typeof indexRequestData.reqOptions[e.id].targetMode&&(n=indexRequestData.reqOptions[e.id].targetMode)),indexRequestData.lastRequestID=e.id,t=correlatorTracker[e.id];var a,i,o,s,d,p,l,u=[],c="undefined"==typeof e.seatbid?0:e.seatbid.length;for(p=0;c>p;p++)for(l=0;l<e.seatbid[p].bid.length;l++)a=e.seatbid[p].bid[l],"object"==typeof a.ext&&"string"==typeof a.ext.pricelevel&&"undefined"!=typeof indexRequestData.impIDToSlotID[e.id][a.impid]&&(i=indexRequestData.impIDToSlotID[e.id][a.impid],"undefined"==typeof headerTagSlots&&(headerTagSlots=[]),"undefined"==typeof indexRequestData.targetIDToBid&&(indexRequestData.targetIDToBid={}),"undefined"==typeof indexRequestData.correlator&&(indexRequestData.correlator={}),"string"==typeof a.ext.dealid?(o=1===n?i+a.ext.pricelevel:i+"_"+a.ext.dealid,s=headerTagPrivateKey+"_"):(o=i+a.ext.pricelevel,s=headerTagPublicKey+"_"),headerTagSlots.push(s+o),void 0===indexRequestData.targetIDToBid[o]?(indexRequestData.targetIDToBid[o]=[a.adm],indexRequestData.correlator[o]=[t]):(indexRequestData.targetIDToBid[o].push(a.adm),indexRequestData.correlator[o].push(t)),d={},d.impressionID=a.impid,"undefined"!=typeof a.ext.dealid&&(d.dealID=a.ext.dealid),d.bid=a.price,d.slotID=i,d.priceLevel=a.ext.pricelevel,d.target=s+o,u.push(d));"function"==typeof r&&(0===u.length?r(e.id):r(e.id,u)),headerTagSlots=cygnus_index_judge(headerTagSlots.slice(0))}}catch(f){}"undefined"==typeof headerTagSlots&&(headerTagSlots=[]),parseResults(e.id,!0)},window.headertag.index_render=function(e,t){var r,n,a,i,o,s,d;"undefined"==typeof window.headertag.index_demand&&(window.headertag.index_demand={}),d=t.split("_"),r=d[0];try{if(n=indexRequestData.targetIDToBid[t].pop(),null!==n)e.write(n),window.headertag.index_demand[r]=1,delete index_no_demand[r];else{for(a={},j=0;j<headerTagArgs.slots.length;j++)if(headerTagArgs.slot[j].id===r){a.s=headerTagArgs.slot[j].siteID;break}a.hasOwnProperty("s")||(a.s=0),a.u=encodeURIComponent(location.href),a.type="RT",a.r=correlator,a.blank="["+t+"]",i=Utils.objToQueryString(a),o=("https:"===location.protocol?"https://as-sec.":"http://as.")+"casalemedia.com/headerstats"+i,s=new XMLHttpRequest,s.open("GET",o,!0),s.send()}}catch(p){}},window.headertag.headertag_render=function(e,t,r,n){var a,i,o=r,s=n.split(",");for(a=0;a<s.length;a++)i=s[a].split("_"),i[0]==o&&window.headertag.index_render(e,s[a])},window.headertag.headertag_render_ad=function(e,t,r){var n=r,a=r.split("_")[0],i=getSlotInfo(a);e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=i.width,e.defaultView.frameElement.height=i.height);var o;"undefined"==typeof window.headertag.index_demand&&(window.headertag.index_demand={});try{var o=indexRequestData.targetIDToBid[n].pop();null!=o?(e.write(o),window.headertag.index_demand[a]=1,delete index_no_demand[a]):(queryObj={},queryObj.s=i.siteID,queryObj.u=encodeURIComponent(location.href),queryObj.type="RT",queryObj.r=correlator,queryObj.blank="["+n+"]",queryString=Utils.objToQueryString(queryObj),url=("https:"===location.protocol?"https://as-sec.":"http://as.")+"casalemedia.com/headerstats"+queryString,xhttp=new XMLHttpRequest,xhttp.open("GET",url,!0),xhttp.send())}catch(s){}},window.headertag.registerPartner(PARTNER_ID,init)}(),function(){"use strict";function e(e){return"string"==typeof e&&a[e]}function t(t){function r(e){var t=D;if(e.hasOwnProperty("id")&&(t+="/"+e.id),e.hasOwnProperty("pageId")&&(t+="/"+e.pageId),t+="/"+e.sizeId,t+="/ADTECH;",e.parameters)for(var r in e.parameters)e.parameters.hasOwnProperty(r)&&(t+=r+"="+e.parameters[r]+";");
return t}function n(e){if("test"===e)return e;for(var t=Number(e)*w,r=1,n=0,a=f.buckets.length;a>n;n++){var i=f.buckets[n];if(t>=i.range[0]&&t<i.range[1]){r=1/i.granularity;break}n===a-1&&(t=i.range[1],r=1/i.granularity)}return t=100*Math.floor(t*r)/r}function a(e){e="string"==typeof e?[e]:e;var t=[];for(var r in T)if(T.hasOwnProperty(r))for(var n=T[r],a=0;a<e.length;a++)n.indexOf(e[a])>-1&&t.push(r);return t}function l(e,t,r){var a={};try{var i=JSON.parse(t);if(i&&i.hasOwnProperty("nbr"))return null;a.id=e.id;var o=i.seatbid[0].bid[0];a.cpm=n(o.price),a.adm=o.adm,a.divId=r,a.demand={},a.demand[b]=a.id+"_"+a.cpm}catch(s){return null}return a}function u(e,t,n){e="prefetch"===e?t:e;var a={};a.id=t,a.pageId=0,a.sizeId=-1,a.parameters={cmd:"bid",cors:"yes",v:"2"};var i=r(a),o=new XMLHttpRequest;o.withCredentials=!0,o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var t=l(a,o.responseText,e);!t||t.hasOwnProperty("nbr")?n("No demand response."):n(null,t)}else n("No demand response.")},o.open("GET",i,!0),o.send()}var c=this,f=t.roundingBuckets?t.roundingBuckets:{buckets:[{range:[0,20],granularity:.05}]},h=t.targetingType,g=i,m=o,y={state:s.NEW,correlator:null,gcorrelator:null,slotIds:[],callbacks:[]},v={},w=t.revshare?t.revshare:1,b=t.targetingKey?t.targetingKey:"aolbid",x=t.apiVersion,I=t.networkId,T=t.placements,S=d[t.region],D=p.getProtocol()+S+"/pubapi/"+x+"/"+I,O={};this.getPartnerTargetingType=function(){return h},this.getSupportedAnalytics=function(){return g},this.getSupportedOptions=function(){return m},this.getPartnerDemandExpiry=function(){return m.demandExpiry},this.setPartnerTargetingType=function(t){return e(t)?(h=t,!0):!1},this.prefetchDemand=function(e,t,r){function n(t,n){if(a++,n&&(O[n.id]={cpm:n.cpm,adm:n.adm},v[e].slot[n.divId]={},v[e].slot[n.divId].timestamp=p.now(),v[e].slot[n.divId].demand=v[e].slot[n.divId].demand||{},v[e].slot[n.divId].demand[b]=n.demand[b]),i===a){y.state=s.READY,r(e);for(var o=0,d=y.callbacks.length;d>o;o++)setTimeout(y.callbacks[o],0)}}y.state=s.IN_PROGRESS,y.correlator=e,y.slotIds=t.divIds,v[e]={slot:{}};for(var a=0,i=y.slotIds.length,o=0,d=y.slotIds.length;d>o;o++)u("prefetch",y.slotIds[o],n)},this.getDemand=function P(e,t,r){function n(e,t){S++,e||(t&&(O[t.id]={cpm:t.cpm,adm:t.adm},w.slot[t.divId]=w.slot[t.divId]||{},w.slot[t.divId].timestamp=p.now(),w.slot[t.divId].demand=w.slot[t.divId].demand||{},w.slot[t.divId].demand[b]=w.slot[t.divId].demand[b]?w.slot[t.divId].demand[b]+","+t.demand[b]:t.demand[b]),D===S&&r(null,w))}if(y.state===s.IN_PROGRESS){for(var i=p.getDivIds(t),o=!1,d=0,l=i.length;l>d;d++){for(var f=-1,h=a(i[d]),g=0;g<h.length;g++)f=y.slotIds.indexOf(parseInt(h[g]));-1!==f&&(y.slotIds.splice(f,1),o=!0)}if(o)return void y.callbacks.push(P.bind(c,e,t,r))}var w={slot:{}};if(y.state===s.READY){for(var x=t.length-1;x>=0;x--)for(var I=t[x].getSlotElementId(),h=a(I),g=0;g<h.length;g++)v[y.correlator].slot.hasOwnProperty(h[g])&&((m.demandExpiry<0||p.now()-v[y.correlator].slot[h[g]].timestamp<=m.demandExpiry)&&(w.slot[I]?w.slot[I].demand[b]=w.slot[I].demand[b]+","+v[y.correlator].slot[h[g]].demand[b]:w.slot[I]=v[y.correlator].slot[h[g]],t.splice(x,1)),delete v[y.correlator].slot[h[g]]);if(p.validateNonEmptyObject(v[y.correlator].slot)||(y.state=s.USED),!t.length)return void r(null,w)}var T=t;if(T.length)for(var S=0,D=a(T).length,x=0,R=T.length;R>x;x++)for(var k=a(T[x]),E=0;E<k.length;E++){var q=k[E];setTimeout(u.bind(c,T[x],q,n))}else r(null,w)},this.render=function(e,t){var r=t.split("_")[0];O.hasOwnProperty(r)&&O[r].hasOwnProperty("adm")&&(e.write(O[r].adm),delete O[r])}}function r(r,n){var a=[];if(r.hasOwnProperty("targetingType")&&e(r.targetingType)||a.push("targetingType either not provided or invalid."),r.hasOwnProperty("namespace")&&!p.validateNonEmptyString(r.namespace)&&a.push("namespace either not a string."),r.hasOwnProperty("region")&&d.hasOwnProperty(r.region)||a.push("region either not provided or invalid."),r.hasOwnProperty("apiVersion")&&p.validateNonEmptyString(r.apiVersion)||a.push("apiVersion either not provided or not a string."),r.hasOwnProperty("networkId")&&p.validateNonEmptyString(r.networkId)||a.push("networkId either not provided or not a string."),r.hasOwnProperty("placements"))for(var i=0,o=r.placements.length;o>i;i++){var s=r.placements[i];if(!p.validateNonEmptyObject(s)){a.push("placement not an array of objects");break}s.hasOwnProperty("id")||s.hasOwnProperty("alias")||a.push("either placement.id or placement.alias must exist."),s.hasOwnProperty("id")&&!p.validateNonEmptyString(s.id)&&a.push("placement.id invalid."),s.hasOwnProperty("alias")&&!p.validateNonEmptyString(s.alias)&&a.push("placement.alias invalid."),s.hasOwnProperty("pageId")&&!p.validateNonEmptyString(s.pageId)&&a.push("placement.pageId invalid."),s.hasOwnProperty("sizeId")&&p.validateNonEmptyString(s.sizeId)||a.push("placement.sizeId invalid.")}else a.push("placements either not provided or not an array.");if(a.length)return void n(a);var l=new t(r);r.namespace=r.namespace||"adtech",window[r.namespace]={render:l.render},n(null,l)}var n="AOL",a={page:!1,slot:!0},i={time:!0,demand:!0},o={prefetch:!0,demandExpiry:3e4},s={NEW:1,IN_PROGRESS:2,READY:3,USED:4},d={eu:"//adserver-eu.adtech.advertising.com",na:"//adserver-us.adtech.advertising.com",asia:"//adserver-as.adtech.advertising.com"},p=window.headertag.Utils;window.headertag.registerPartner(n,r)}(),function(){"use strict";function validateTargetingType(e){return"string"==typeof e&&SUPPORTED_TARGETING_TYPES[e]}function Partner(config){function getRequiredAdUnits(e){for(var t=[],r=0,n=e.length;n>r;r++)adUnits.hasOwnProperty(e[r])&&t.push(adUnits[e[r]]);return t}function parseAdUnits(e){for(var t={},r=0,n=e.length;n>r;r++){var a=e[r];t[a.code]={},t[a.code].code=a.code,t[a.code].sizes=[];for(var i=0,o=a.sizes.length;o>i;i++){var s=a.sizes[i];t[a.code].sizes.push(s[0]+"x"+s[1])}t[a.code].placementIds=[];for(var d=0,p=a.bids.length;p>d;d++){var l=a.bids[d];t[a.code].placementIds.push(l.params.placementId)}}return t}function generateRequestUrl(e){var t={};if(t.id=e.placementIds,t.size=e.sizes[0],e.sizes.length>1){for(var r="",n=1,a=e.sizes.length;a>n;n++){var i=e.sizes[n];r+=i+","}r=r.slice(0,-1),t.promo_sizes=r}return t.referrer=window.location.href,t.callback="pbjs.parseApnxDemand",t.callback_uid=e.code,t.psa=0,Utils.getProtocol()+"//secure.adnxs.com/jpt"+Utils.objToQueryString(t)}function sendDemandRequest(adUnit,callback){var url=generateRequestUrl(adUnit),xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){4===xhttp.readyState&&(200===xhttp.status?callback(null,eval(xhttp.responseText)):callback("No demand response."))},xhttp.withCredentials=!0,xhttp.open("GET",url,!0),xhttp.send()}function round(e){for(var t=Number(e)/1e4,r=1,n=0,a=roundingBuckets.buckets.length;a>n;n++){var i=roundingBuckets.buckets[n];if(t>=i.range[0]&&t<i.range[1]){r=i.granularity;break}n===a-1&&(t=i.range[1],r=i.granularity)}return t=100*t/(100*r),roundingBuckets.type===roundingTypes.FLOOR?t=Math.floor(t):roundingBuckets.type===roundingTypes.ROUND?t=Math.round(t):roundingBuckets.type===roundingTypes.CIEL&&(t=Math.ceil(t)),(t*r).toFixed(2)}var _this=this,targetingType=config.targetingType,supportedAnalytics=SUPPORTED_ANALYTICS,supportedOptions=SUPPORTED_OPTIONS,prefetch={state:prefetchState.NEW,correlator:null,slotIds:[],callbacks:[]},roundingBuckets=config.roundingBuckets?config.roundingBuckets:{type:roundingTypes.FLOOR,buckets:[{range:[0,20],granularity:.5}]},adUnits=parseAdUnits(config.adUnits),demandStore={},ads={},getAdId=function(){var e=0;return function(){return"_"+e++}}();this.parseResponse=function(e){try{var t=round(e.result.cpm),r=getAdId();return{id:r,divId:e.callback_uid,demand:{hb_adid:r,hb_bidder:"appnexus",hb_pb:t,hb_size:e.result.width+"x"+e.result.height},ad:{creative_id:e.result.creative_id,adUrl:e.result.ad,width:e.result.width,height:e.result.height}}}catch(n){return{}}},this.apnxRenderAd=function(e,t){if(e&&t)try{var r=ads[t];if(r){var n=r.height,a=r.width,i=r.adUrl,o=r.ad;o?(e.write(o),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=a,e.defaultView.frameElement.height=n)):i&&(e.write('<IFRAME SRC="'+i+'" FRAMEBORDER="0" SCROLLING="no" MARGINHEIGHT="0" MARGINWIDTH="0" TOPMARGIN="0" LEFTMARGIN="0" ALLOWTRANSPARENCY="true" WIDTH="'+a+'" HEIGHT="'+n+'"></IFRAME>'),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=a,e.defaultView.frameElement.height=n))}}catch(s){}},this.getPartnerTargetingType=function(){return targetingType},this.getSupportedAnalytics=function(){return supportedAnalytics},this.getSupportedOptions=function(){return supportedOptions},this.getPartnerDemandExpiry=function(){return supportedOptions.demandExpiry},this.setPartnerTargetingType=function(e){return validateTargetingType(e)?(targetingType=e,!0):!1},this.prefetchDemand=function(e,t,r){function n(t,n){if(i++,n&&(t||(ads[n.id]=n.ad||{},demandStore[e].slot[n.divId]={},demandStore[e].slot[n.divId].timestamp=Utils.now(),demandStore[e].slot[n.divId].demand=n.demand||{}),i===a.length)){prefetch.state=prefetchState.READY,r(e);for(var o=0,s=prefetch.callbacks.length;s>o;o++)setTimeout(prefetch.callbacks[o],0)}}prefetch.state=prefetchState.IN_PROGRESS,prefetch.correlator=e,prefetch.slotIds=t.divIds.slice(),demandStore[e]={},demandStore[e].slot={};for(var a=getRequiredAdUnits(t.divIds),i=0,o=0,s=a.length;s>o;o++)setTimeout(sendDemandRequest.bind(_this,a[o],n))},this.getDemand=function e(t,r,n){function a(e,t){h++,t&&(e||(ads[t.id]=t.ad||{},l.slot[t.divId]={},l.slot[t.divId].timestamp=Utils.now(),l.slot[t.divId].demand=t.demand||{}),h===f.length&&n(null,l))}if(prefetch.state===prefetchState.IN_PROGRESS){for(var i=Utils.getDivIds(r),o=!1,s=0,d=i.length;d>s;s++){var p=prefetch.slotIds.indexOf(i[s]);-1!==p&&(prefetch.slotIds.splice(p,1),o=!0)}if(o)return void prefetch.callbacks.push(e.bind(_this,t,r,n))}var l={slot:{}};if(prefetch.state===prefetchState.READY){for(var u=r.length-1;u>=0;u--){var c=r[u].getSlotElementId();demandStore[prefetch.correlator].slot.hasOwnProperty(c)&&((supportedOptions.demandExpiry<0||Utils.now()-demandStore[prefetch.correlator].slot[c].timestamp<=supportedOptions.demandExpiry)&&(l.slot[c]=demandStore[prefetch.correlator].slot[c],r.splice(u,1)),delete demandStore[prefetch.correlator].slot[c])}if(Utils.validateNonEmptyObject(demandStore[prefetch.correlator].slot)||(prefetch.state=prefetchState.USED),!r.length)return void n(null,l)}var f=getRequiredAdUnits(r);if(f.length)for(var h=0,u=0,g=f.length;g>u;u++)setTimeout(sendDemandRequest.bind(_this,f[u],a));else n(null,l)}}function init(e,t){var r=[];if(e.hasOwnProperty("targetingType")&&validateTargetingType(e.targetingType)||r.push("targetingType either not provided or invalid."),e.hasOwnProperty("adUnits")&&Utils.isArray(e.adUnits))for(var n=0,a=e.adUnits.length;a>n;n++){var i=e.adUnits[n];if(i.hasOwnProperty("code")&&Utils.validateNonEmptyString(i.code)||r.push("code not provided or invalid."),i.hasOwnProperty("sizes")&&Utils.isArray(i.sizes)&&i.sizes.length)for(var o=0,s=i.sizes.length;s>o;o++){var d=i.sizes[o];Utils.isArray(d)&&2===d.length?Utils.isInteger(d[0])&&Utils.isInteger(d[1])||r.push("size not provided or invalid."):r.push("size not provided or invalid.")}else r.push("sizes not provided or invalid.");if(i.hasOwnProperty("bids")&&Utils.isArray(i.bids)&&i.bids.length)for(var p=0,l=i.bids.length;l>p;p++){var u=i.bids[p];u.hasOwnProperty("bidder")&&"appnexus"===u.bidder||r.push("bidder not provided or invalid."),u.hasOwnProperty("params")&&Utils.validateNonEmptyObject(u.params)?u.params.hasOwnProperty("placementId")&&Utils.validateNonEmptyString(u.params.placementId)||r.push("placementId not provided or invalid."):r.push("params not provided or invalid.")}else r.push("bids not provided or invalid.")}else r.push("adUnits either not provided or invalid.");if(e.hasOwnProperty("roundingBuckets")){var c=e.roundingBuckets;if((!c.hasOwnProperty("type")||!Utils.isInteger(c.type)||c.type>3||c.type<0)&&r.push("roundingBuckets type either not provided or invalid."),c.hasOwnProperty("buckets")&&Utils.isArray(c.buckets))for(var n=0,f=c.buckets.length;f>n;n++){var h=c.buckets[n];Utils.isArray(h.range)&&2===h.range.length?Utils.isInteger(h.range[0])&&Utils.isInteger(h.range[1])||r.push("range not provided or invalid."):r.push("range not provided or invalid."),h.hasOwnProperty("granularity")&&!isNaN(h.granularity)||r.push("granularity not provided or invalid.")}else r.push("buckets either not provided or invalid.")}if(r.length)return void t(r);window.pbjs=window.pbjs||{};var g=new Partner(e);window.pbjs.parseApnxDemand=g.parseResponse,window.pbjs.renderAd=g.apnxRenderAd,t(null,g)}var PARTNER_ID="APNX",SUPPORTED_TARGETING_TYPES={page:!1,slot:!0},SUPPORTED_ANALYTICS={time:!0,demand:!1},SUPPORTED_OPTIONS={prefetch:!0,demandExpiry:-1},prefetchState={NEW:1,IN_PROGRESS:2,READY:3,USED:4},roundingTypes={FLOOR:1,ROUND:2,CIEL:3},Utils=window.headertag.Utils;window.headertag.registerPartner(PARTNER_ID,init)}(),function(){"use strict";function e(e){return"string"==typeof e&&a[e]}function t(t,n){var a=[];if(t.hasOwnProperty("targetingType")&&e(t.targetingType)||a.push("targetingType either not provided or invalid."),t.hasOwnProperty("dynamicMapping")&&!p.validateBoolean(t.dynamicMapping)&&a.push("dynamicMapping invalid."),t.hasOwnProperty("uniqueTargeting")&&!p.validateNonEmptyString(t.uniqueTargeting)&&a.push("uniqueTargeting invalid."),t.hasOwnProperty("slotSizes"))if(p.validateNonEmptyArray(t.slotSizes))for(var i=0;i<t.slotSizes.length;i++){var o=t.slotSizes[i];2===o.length&&p.isInteger(o[0])&&p.isInteger(o[1])||a.push("slotSizes invalid.")}else a.push("slotSizes invalid.");if(t.hasOwnProperty("appId")&&p.validateNonEmptyString(t.appId)||a.push("appId either not provided or invalid."),t.hasOwnProperty("adUnits")&&p.validateNonEmptyObject(t.adUnits))for(var s in t.adUnits)if("mobile"===s||"desktop"===s)for(var d=0,l=t.adUnits[s].length;l>d;d++){var u=t.adUnits[s][d];if(u.hasOwnProperty("code")&&p.validateNonEmptyString(u.code)||a.push("code not provided or invalid."),u.hasOwnProperty("placementId")&&p.validateNonEmptyString(u.placementId)||a.push("placementId not provided or invalid."),u.hasOwnProperty("sizes")&&p.isArray(u.sizes)&&u.sizes.length)for(var c=0,f=u.sizes.length;f>c;c++){var h=u.sizes[c];p.isArray(h)&&2===h.length&&p.isInteger(h[0])&&p.isInteger(h[1])||a.push("size not provided or invalid.")}else a.push("sizes not provided or invalid.")}else a.push("adUnits device invalid.");else a.push("adUnits either not provided or invalid.");if(t.hasOwnProperty("roundingBuckets")){var g=t.roundingBuckets;if((!g.hasOwnProperty("type")||!p.isInteger(g.type)||g.type>3||g.type<0)&&a.push("roundingBuckets type either not provided or invalid."),g.hasOwnProperty("buckets")&&p.isArray(g.buckets))for(var m=0,y=g.buckets.length;y>m;m++){var v=g.buckets[m];p.isArray(v.range)&&2===v.range.length?p.isInteger(v.range[0])&&p.isInteger(v.range[1])||a.push("range not provided or invalid."):a.push("range not provided or invalid."),v.hasOwnProperty("granularity")&&!isNaN(v.granularity)||a.push("granularity not provided or invalid.")}else a.push("buckets either not provided or invalid.")}if(a.length)return void n(a);var w=new r(t);window.top.renderFacebookAd=w.fbRenderAd,n(null,w)}function r(t){function r(e,t){for(var r=0;r<N.length;r++)if(N[r][0]===parseInt(e)&&N[r][1]===parseInt(t))return!0;return!1}function n(e){return e}function a(e){for(var t=n(e),r=0;r<k.length;r++){var a=k[r].code;if(-1!==t.indexOf(a))return a}return t}function l(e){var t=e.getSizes();if(0!==e.getTargeting(A).length)for(var n=0;n<t.length;n++){var a=t[n];if(r(a.getWidth(),a.getHeight()))return a.getWidth()+"x"+a.getHeight()+"_"+e.getTargeting(A)[0]}return""}function u(e){for(var t=q?l:a,r=[],n=0;n<e.length;n++)r.push(t(e[n]));return r}function c(e){for(var t=[],r=0;r<k.length;r++){var n=k[r];e===n.placementId&&t.push(n.code)}return t}function f(e){for(var t=0;t<k.length;t++){var r=k[t];if(e===r.code)return r.placementId}return""}function h(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r][0]+"x"+e[r][1]);return t[0]}function g(e){for(var t=0;t<k.length;t++){var r=k[t];if(e===r.placementId)return h(r.sizes)}return""}function m(e){for(var t=[],r=0,n=e.length;n>r;r++)for(var a=0;a<k.length;a++)e[r]===k[a].code&&t.push(k[a]);return t}function y(e){var t=m(e);if(!t.length)return"";for(var r="https://an.facebook.com/v2/placementbid.json",n="?sdk=5.3.web&",a=0;a<t.length;a++){var i=t[a],o=encodeURIComponent(i.placementId),s=encodeURIComponent(h(i.sizes));n+="placementids[]="+o+"&adformats[]="+s+"&"}n=n.slice(0,-1);var d=encodeURIComponent(p.getPageUrl());n+="&pageurl="+d;var l=E?"&testmode=true":"",u=r+n+l;return u}function v(e){for(var t=Number(e)/100,r=1,n=0,a=R.buckets.length;a>n;n++){var i=R.buckets[n];if(t>=i.range[0]&&t<i.range[1]){r=i.granularity;break}n===a-1&&(t=i.range[1],r=i.granularity)}return t=100*t/(100*r),R.type===d.FLOOR?t=Math.floor(t):R.type===d.ROUND?t=Math.round(t):R.type===d.CEIL&&(t=Math.ceil(t)),(t*r).toFixed(2)}function w(e){var t=v(e.bid_price_cents);return 0===Number(t)?{}:{fb_bid_id:e.bid_id,fb_cpm:t}}function b(e,t){var r=y(e);if(!r)return void t(null,{});var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(200!==n.status)return void t("No demand response");t(null,JSON.parse(n.responseText))}},n.open("GET",r,!0),n.withCredentials=!0,n.send()}var x=this,I=t.targetingType,T=i,S=o,D={state:s.NEW,correlator:null,gCorrelator:null,slotIds:[],callbacks:[]},O={},P={},R=t.roundingBuckets?t.roundingBuckets:{type:d.FLOOR,buckets:[{range:[0,20],granularity:.5}]},k=p.isMobile()?t.adUnits.mobile:t.adUnits.desktop,E=t.debug,q=(t.appId,t.dynamicMapping||!1),A=t.uniqueTargeting||"pos",N=t.slotSizes||[[300,250],[320,50]];this.getPartnerTargetingType=function(){return I},this.getSupportedAnalytics=function(){return T},this.getSupportedOptions=function(){return S},this.getPartnerDemandExpiry=function(){return S.demandExpiry},this.setPartnerTargetingType=function(t){return e(t)?(I=t,!0):!1},this.fbRenderAd=function(e,t){if(e&&t)try{var r=P[t];if(r){var n=r.adSize,a=r.placementId;e.write('<html><body><div style="display:none; position: relative;"><iframe style="display:none;"></iframe><script type="text/javascript">var data = {placementid: "'+a+'",format: "'+n+'",bidid: "'+t+'",testmode: false,onAdLoaded: function(element) {element.style.display = "block";},onAdError: function(errorCode, errorMessage) {}};(function(w, l, d, t) {var a = t();var b = d.currentScript || (function() {var c = d.getElementsByTagName("script");return c[c.length - 1];})();var e = b.parentElement;e.dataset.placementid = data.placementid;var f = function(v) {    try {        return v.document.referrer;    } catch (e) {}    return "";};var g = function(h) {    var i = h.indexOf("/", h.indexOf("://") + 3);    if (i === -1) {        return h;    }    return h.substring(0, i);};var j = [l.href];var k = false;var m = false;if (w !== w.parent) {    var n;    var o = w;    while (o !== n) {        var h;        try {            m = m || (o.$sf && o.$sf.ext);            h = o.location.href;        } catch (e) {            k = true;        }        j.push(h || f(n));        n = o;        o = o.parent;    }}var p = l.ancestorOrigins;if (p) {    if (p.length > 0) {        data.domain = p[p.length - 1];    } else {        data.domain = g(j[j.length - 1]);    }}data.url = j[j.length - 1];data.channel = g(j[0]);data.width = screen.width;data.height = screen.height;data.pixelratio = w.devicePixelRatio;data.placementindex = w.ADNW && w.ADNW.Ads ? w.ADNW.Ads.length : 0;data.crossdomain = k;data.safeframe = !!m;var q = {};q.iframe = e.firstElementChild;var r = "https://www.facebook.com/audiencenetwork/web/?sdk=5.3";for (var s in data) {    q[s] = data[s];    if (typeof(data[s]) !== "function") {        r += "&" + s + "=" + encodeURIComponent(data[s]);    }}q.iframe.src = r;q.tagJsInitTime = a;q.rootElement = e;q.events = [];w.addEventListener("message", function(u) {    if (u.source !== q.iframe.contentWindow) {        return;    }    u.data.receivedTimestamp = t();    if (this.sdkEventHandler) {        this.sdkEventHandler(u.data);    } else {        this.events.push(u.data);    }}.bind(q), false);q.tagJsIframeAppendedTime = t();w.ADNW = w.ADNW || {};w.ADNW.Ads = w.ADNW.Ads || [];w.ADNW.Ads.push(q);w.ADNW.init && w.ADNW.init(q);})(window, location, document, Date.now || function() {return +new Date;});</script><script type="text/javascript" src="https://connect.facebook.net/en_US/fbadnw.js" async></script></div></body></html>'),e.close()}}catch(i){}},this.prefetchDemand=function(e,t,r){D.state=s.IN_PROGRESS,D.correlator=e,D.slotIds=t.divIds.slice(),O[e]={slot:{}},b(t.divIds,function(n,a){if(!n&&a.hasOwnProperty("bids")){for(var i=a.bids,o=0;o<t.divIds.length;o++){var d=f(t.divIds[o]);i.hasOwnProperty(d)&&i[d].length?(P[i[d][0].bid_id]={adSize:g(d),placementId:d},O[e].slot[t.divIds[o]]={timestamp:p.now(),demand:w(i[d][0])},i[d].splice(0,1)):(O[e].slot[t.divIds[o]]={},O[e].slot[t.divIds[o]].timestamp=p.now(),O[e].slot[t.divIds[o]].demand={})}D.state=s.READY}else{D.state=s.READY;for(var l=0;l<t.divIds.length;l++)O[e].slot[t.divIds[l]]={},O[e].slot[t.divIds[l]].timestamp=p.now(),O[e].slot[t.divIds[l]].demand={}}r(e);for(var u=0,c=D.callbacks.length;c>u;u++)setTimeout(D.callbacks[u],0)})},this.getDemand=function _(e,t,r){if(D.state===s.IN_PROGRESS){for(var i=u(t),o=!1,d=0,f=i.length;f>d;d++){var h=D.slotIds.indexOf(i[d]);-1!==h&&(D.slotIds.splice(h,1),o=!0)}if(o)return void D.callbacks.push(_.bind(x,e,t,r))}var m={slot:{}};if(D.state===s.READY){for(var y=t.length-1;y>=0;y--){var v=q?l(t[y]):a(t[y]);O[D.correlator].slot.hasOwnProperty(v)&&((S.demandExpiry<0||p.now()-O[D.correlator].slot[v].timestamp<=S.demandExpiry)&&(m.slot[n(t[y])]=O[D.correlator].slot[v],t.splice(y,1)),delete O[D.correlator].slot[v])}if(p.validateNonEmptyObject(O[D.correlator].slot)||(D.state=s.USED),!t.length)return void r(null,m)}b(u(t),function(e,t){if(e)return void r(e);var n=t.bids;for(var a in n)if(n.hasOwnProperty(a))for(var i=c(a),o=0;o<i.length,n[a].length;o++)P[n[a][0].bid_id]={adSize:g(a),placementId:a},m.slot[i[o]]={timestamp:p.now(),demand:w(n[a][0])},n[a].splice(0,1);r(null,m)})}}var n="FB",a={page:!1,slot:!0},i={time:!0,demand:!1},o={prefetch:!0,demandExpiry:-1},s={NEW:1,IN_PROGRESS:2,READY:3,USED:4},d={FLOOR:1,ROUND:2,CEIL:3},p=window.headertag.Utils;window.headertag.registerPartner(n,t)}();