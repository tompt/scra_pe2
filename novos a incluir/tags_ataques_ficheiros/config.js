var sas=sas||{};sas.utils=sas.utils||{},sas.events=sas.events||{},function(){sas.utils.getIEVersion=function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):void 0},sas.events.addEvent=function(a,e,t){return a&&e&&t?(a.attachEvent?a.attachEvent("on"+e,t):a.addEventListener&&a.addEventListener(e,t,!1),{removeEvent:function(){a.detachEvent?a.detachEvent("on"+e,t):a.removeEventListener&&a.removeEventListener(e,t,!1)}}):void 0},sas.events.addLoadEvent=function(a,e){if(a&&e){var t="load",n=function(){return!0},r=sas.utils.getIEVersion();(11>r||a==document)&&(t="readystatechange",n=function(){return a.readyState&&"complete"!=a.readyState&&"loaded"!=a.readyState?void 0:!0});var s=sas.events.addEvent(a,t,function(){n()&&(s.removeEvent(),e.apply(this,arguments))})}}}(),function(a,e){function t(a){var n;if("script"==a.tagName.toLowerCase())n=e.createElement("script"),a.type&&(n.type=a.type),a.src&&(n.src=a.src),a.text&&(n.text=a.text);else{n=a.cloneNode(!1);for(var r=a.childNodes,s=0;s<r.length;s++)n.appendChild(t(r[s]))}return n}function n(){var e=a;try{for(;e.parent.document;){if(e.parent.document===e.document)return e.location.origin+e.location.pathname;e=e.parent}}catch(t){}try{try{if(a.top.location.href)return a.top.location.origin+a.top.location.pathname}catch(t){}var n=a.location.ancestorOrigins;return 1==n.length?e.document.referrer:n[n.length-1]}catch(t){return e.document.referrer}}function r(a){var t,n=e.createElement("a"),r=/(?:^\?|&)([^=&]+)=?([^&]*)(?=&|$)/g;n.href=a;for(var s=n.search,i=[];null!==(t=r.exec(s));){var o={n:u(t[1]),v:u(t[2])};"extuid-"===o.n.substr(0,7)&&w[o.n.substr(7)]||i.push(o)}for(var d in w)i.push({n:"extuid-"+d,v:w[d]});s="";for(var c=0;c<i.length;c++){var o=i[c];s+=(0===c?"?":"&")+p(o.n),""!==o.v&&(s+="="+p(o.v))}return n.search=s,n.href}if(!sas.__smartLoaded){sas.__smartLoaded=!0;var s=function(){},i=!1,o=function(){return Math.round(1e10*Math.random())},d="http://www.smartadserver.com",c=d,l=o(),f=!0,p=encodeURIComponent,u=decodeURIComponent,g=0,m=!1,v=0,h=!1,I=null,y={},E={},_=[],T={},A=!0,L={},w={},C={};sas._networks=sas._networks||{},sas._pendingCommands=sas._pendingCommands||{},sas.callType={STD:"std",IFRAME:"iframe",ONECALL:"onecall",XML:"xml",PASSBACK:"passback"},sas.renderMode={DEFAULT:0,READY:1,ON_DEMAND:2};var N=!1,R=[],M=function(a){var e=function(){if(R.length>0){N=!0;var a=R.shift(),t=a.options.onLoad;a.options.onLoad=function(a){e(),t(a)},b[a.type](a.ad,a.options)}else N=!1};R.push(a),N||e()},b={},x={onLoad:s,onError:s,onClean:s,beforeRender:s};b[sas.callType.STD]=function(a,e){D(a.tagId,{ad:a,callType:sas.callType.STD,options:e,url:Y(sas.callType.STD,a,e),type:"script"}),K(a.tagId)},b[sas.callType.IFRAME]=function(a,e){D(a.tagId,{ad:a,callType:sas.callType.IFRAME,options:e,url:Y(sas.callType.IFRAME,a,e),type:"iframe",width:a.width||0,height:a.height||0}),K(a.tagId)},b[sas.callType.ONECALL]=function(a,t){for(var n=(""+a.formatId).replace(/\s/g,"").split(","),r=0;r<n.length;r++){var s=n[r],i="sas_"+s;D(i,{ad:a,callType:sas.callType.ONECALL,options:t}),D(i,{ad:{tagId:i,formatId:s,originalFormatId:s}})}var o=Y(sas.callType.ONECALL,a,t)();P(e.getElementsByTagName("head")[0],o,t.async,function(){if(A){for(var a in L)K(a);L={}}},t.onError)};var S={ERR_SITE:"invalid site id",ERR_PAGE:"invalid page id or name",ERR_FORMAT:"invalid format id",ERR_CONFIG:"invalid configuration",ERR_CALL:"invalid call option"},k=function(a){throw new Error(a)};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var O=function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t&&"object"==typeof t)for(var n in t)void 0!==t[n]&&(Array.isArray(t[n])?a[n]=t[n]:"object"==typeof t[n]?a[n]=O({},a[n],t[n]):a[n]=t[n])}return a},F=function(a){a=""+a;var e=y[a]||y["sas_"+a]||y[E[a]];if(e)return e;var t=a.split("_"),n=t.slice(0,t.length-1).join("");if(t.length>1&&!isNaN(t[t.length-1])&&(e=y[n]||y["sas_"+n])){var r="sas_"+a;return D(r,e,{ad:{tagId:r,instance:parseInt(t[t.length-1])}})}return null},D=function(a){var e=Array.prototype.slice.call(arguments,1);return y[a]=O.apply(this,[{},y[a]].concat(e)),y[a]},U=function(a){var t=e.createElement("div");return t.id=a,t},B=function(a,t,n,r){var s=e.createElement("iframe");s.id="sas_i"+t.ad.formatId+(t.ad.instance?"_"+t.ad.instance:""),s.scrolling="no",s.frameBorder=0,s.width=t.width,s.height=t.height,s.style.margin=0,s.style.padding=0,s.style.width=t.width+"px",s.style.height=t.height+"px",s.src=t.url(),sas.events.addLoadEvent(s,n),sas.events.addEvent(s,"error",r),t.options.async?a.appendChild(s):e.write(s.outerHTML)},H=1,j=function(a,t,n){var r=e.createElement("script");r.id="sas_script"+H++,r.type="text/javascript",r.text=t,n?a.appendChild(r):e.write(r.outerHTML)},P=function(a,t,n,r,s){var i=e.createElement("script");i.id="sas_script"+H++,i.type="text/javascript",i.src=t,i.async=n,sas.events.addLoadEvent(i,r),sas.events.addEvent(i,"error",s),n?a.appendChild(i):e.write(i.outerHTML)},G=function(a){var e=navigator.userAgent.indexOf("iPad")>0,t=""+navigator.userAgent.indexOf("iPhone")>0;return e||t?e?"ipad":"iphone":navigator.userAgent.indexOf("Android")>0?"android":""},Y=function(e,t,r){r=O({forceMasterFlag:!1},r),f=r.forceMasterFlag?!0:f,l=r.resetTimestamp?o():l,e==sas.callType.ONECALL&&W();var s=V(),i=G(),d=n()||a.location.origin+a.location.pathname;return function(){return sas.utils.buildUrl(r.domain,e,t,s,l,r.async,r.networkId,i,I,d,w,C[t.tagId],r.clickTrackingUrl,r.clickTrackingEncodingLevel)}},V=function(){return W()?"m":"s"},W=function(){return f?(f=!1,!0):!1},q=function(a){var t=e.getElementById(a);return t||(e.write(U(a).outerHTML),t=e.getElementById(a)),t},K=function(a){var t=F(a);if(t){var n=t.ad.tagId,r=t.ad.formatId+(t.ad.instance>1?"_"+t.ad.instance:"");if(t.options.async&&(!A||t.callType==sas.callType.ONECALL&&!sas_manager))return void(L[n]=!0);sas.clean(n),t.options.beforeRender({formatId:r,tagId:n}),t.callType===sas.callType.ONECALL&&(t=ra(n));var s=function(){t.options.onLoad({formatId:r,tagId:n})},i=function(){t.options.onError({formatId:r,tagId:n}),sas.noad(n)};if(t.callType==sas.callType.ONECALL&&!sas_manager.exists(r))return sas.noad(n),void s();var o=e.getElementById(n);if(o)switch(t.type){case"iframe":B(o,t,s,i);break;case"script":P(o,t.url(),t.options.async,s,i);break;case"passback":sas.passback({formatId:t.ad.formatId,chain:t.chain});break;default:throw new Error("Unsupported script type "+t.type)}}},X=[],$=function(a){null!=a&&X.push(a)};sas.events.addLoadEvent(e,function(){i=!0,X.push=function(a){a()};for(var a=0;a<X.length;a++)X[a]()});var z=!1,J=function(){z||(z=!0,$(function(){sas.render()}))},Q=function(a){return Math.random()<a},Z=function(a,e){if(!a)return!1;if(!e)return!1;var t=sas._networks[e.networkId];return t&&t.f&&t.f[a.formatId]&&Q(t.f[a.formatId])?!0:!1},aa=!1;sas.setup=function(e){if(aa)throw new Error("sas.setup can only be called once");aa=!0,e=e||{},c=e.domain||d,m=e.async||m,sas_ajax=m,g=e.networkid||g,v=e.renderMode||v,A=v==sas.renderMode.DEFAULT,h=e.inSequence||h,I=e.uid,w=O(w,e.partnerIds),a.sas_renderMode=v,sas.configure({id:g})},sas.call=function(t,n,r){if("string"!=typeof t&&(r=O({},n,{async:!0}),n=t,t="std"),n.siteId=n.siteId||n.siteid,n.pageId=n.pageId||n.pageid,n.pageName=n.pageName||n.pagename,n.formatId=n.formatId||n.formatid,n.siteId||k(S.ERR_SITE),n.pageId||n.pageName||k(S.ERR_PAGE),n.formatId||k(S.ERR_FORMAT),r=O({},x,{async:m,domain:c,networkId:g},r),r&&r.networkId){var i=parseInt(r.networkId);if(i>0&&!sas._networks[i])return sas._pendingCommands[i]=sas._pendingCommands[i]||[],void sas._pendingCommands[i].push(function(){sas.call(t,n,r)})}if(!Z(n,r)){if(!b[t])throw new Error("Unsupported call type "+t);if(!n||!n.siteId||!n.pageId&&!n.pageName||!n.formatId)throw new Error("Missing parameter(s)");n.passback||_.push({callType:t,ad:n,options:r}),t!=sas.callType.ONECALL&&(n.tagId=n.tagId||"sas_"+n.formatId,n.originalFormatId=n.originalFormatId||n.formatId,q(n.tagId),E[n.formatId]||(E[n.formatId]=n.tagId)),r.async&&v==sas.renderMode.READY&&J();var o=r.onLoad;r.onLoad=function(t){var n=F(t.tagId),r=e.getElementById(n.ad.tagId);if(r){var i=r.childNodes.length>1;(a.sas_loadHandler||s)({id:n.ad.formatId,hasAd:i}),o({formatId:n.ad.formatId,tagId:n.ad.tagId,hasAd:i})}},r.async&&h?M({type:t,ad:n,options:r}):b[t](n,r)}},sas.passback=function(a){T[a.formatId]={current:-1,ad:a},sas.next(a.formatId)},sas.next=function(a){var t=F(a),n=T[t.ad.formatId];if(t&&n){var r=e.getElementById(t.ad.tagId);r&&(r.innerHTML=""),n.current>=0&&((new Image).src=n.ad.chain[n.current].noadUrl),n.current++,n.current<n.ad.chain.length&&(n.ad.chain[n.current].countUrl&&((new Image).src=n.ad.chain[n.current].countUrl),n.ad.chain[n.current].script?j(r,n.ad.chain[n.current].script,t.options.async):P(r,n.ad.chain[n.current].scriptUrl,t.options.async))}};var ea={forceMasterFlag:!1,resetTimestamp:!0,target:void 0};sas.refresh=function(a,e){if(A){e=O({},ea,a,e);var t=s;if(arguments.length<=1&&"string"!=typeof a&&isNaN(a)){L={};for(var n in y)L[n]=!0;t=function(a){for(var e=0;e<_.length;e++)_[e].options.async&&(void 0!==a&&null!==a&&(_[e].ad.target=a),b[_[e].callType](_[e].ad,_[e].options))}}else{var n=F(a);if(!n||!n.options.async)return;t=function(a){void 0!==a&&null!==a&&(n.ad.target=a),b[sas.callType.STD](n.ad,n.options)}}f=e.forceMasterFlag?!0:f,l=e.resetTimestamp?o():l,t(e.target)}},sas.getTag=function(a){var t=F(a);return t?e.getElementById(t.ad.tagId):null},sas.clean=function(a){var t=[];if(0==arguments.length)for(var n in y)t.push(n);else{var n=F(a);n&&t.push(n.ad.tagId)}for(var r=0;r<t.length;r++){var a=t[r],n=F(a),s=e.getElementById(n.ad.tagId);n.options.onClean(n.ad.formatId,s),sa[a]&&sa[a](),s&&(s.innerHTML="")}},sas.noad=function(a){var e=F(a);e.callType==sas.callType.ONECALL&&sas_manager&&sas_manager.noad(e.ad.formatId),e.options.onNoad&&e.options.onNoad({formatId:e.ad.formatId,tagId:e.ad.tagId})},sas.render=function(a){var e=[];if(0==arguments.length){if(!A&&(v==sas.renderMode.READY&&i||v==sas.renderMode.ON_DEMAND)){A=!0;for(var t in L){var n=F(t);(n&&n.options.async||!i)&&e.push(t)}L={}}}else{var n=F(a);!n||!n.options.async&&i||(e.push(n.ad.tagId),q(n.ad.tagId))}for(var r=0;r<e.length;r++)K(e[r])},sas.setPartnerId=function(a,e){w[a]=e},sas.appendHtml=function(a,n){var r=e.getElementById(a);if(Range&&Range.prototype.createContextualFragment)r.appendChild(e.createRange().createContextualFragment(n));else{var s=e.createElement("div");s.innerHTML=n;for(var i=s.childNodes,o=0;o<i.length;o++)r.appendChild(t(i[o]))}},sas.configure=function(a){if(a&&a.id&&!(parseInt(a.id)<=0)&&!sas._networks[a.id]&&(sas._networks[a.id]=a,sas._pendingCommands[a.id]))for(var e;e=sas._pendingCommands[a.id].shift();)e()},sas.setHeaderBiddingWinner=function(a,e){C[a]=e},sas.utils.buildUrl=function(a,e,t,n,r,s,i,o,d,c,l,f,u,g){var m={};if(null!=i&&(m.nwid=i),m.siteid=t.siteId,m.pgid=t.pageId,m.pgname=t.pageName,m.fmtid=t.formatId,e==sas.callType.IFRAME&&(m.out="iframe"),s&&(m.async=1),e!=sas.callType.ONECALL){var v=n.split("=");m.visit=v.length>1?v[1]:n}else m.oc=1;m.tmstp=r,o.length>0&&(t.target&&t.target.length>0&&(t.target+=";"),t.target+="platform="+o),t.target&&(m.tgt=p(t.target)),e!=sas.callType.ONECALL&&(m.orgfmtid=t.originalFormatId,m.tag=t.tagId),d&&(m.uid=d),c&&(m.pgDomain=p(c)),f&&e!=sas.callType.ONECALL&&(m.hb_bid=f.bidder,m.hb_cpm=f.cpm,m.hb_ccy=f.currency,m.hb_dealid=f.dealId),u&&(m.clcturl=p(u)),g&&(m.clctenc=clickTrackingEncoding);for(var h in l)m[encodeURIComponent("extuid-"+h)]=encodeURIComponent(l[h]);m.noadcbk="sas.noad";var I=[];for(var y in m)null!=m[y]&&I.push(y+"="+m[y]);return a+"/ac?"+I.join("&")};var ta=function(a,e,t){var n=a.indexOf("/");if(0>n)throw new Error("Invalid argument : sas_pageid");this.siteId=a.substring(0,n);var r=a.substring(n+1);0==r.indexOf("(")&&r.indexOf(")")==r.length-1&&(r=r.slice(1,r.length-1));var s=parseInt(r);s+""==r?this.pageId=s:this.pageName=r,this.formatId=e,this.target=t};a.sas_ads=sas,a.sas_ajax=!1,a.sas_manager=null,a.sas_unrenderedFormats=[],a.sas_callAd=sas.callAd,a.sas_callAds=sas.callAds,sas.callAd=sas.refresh,sas.callAds=function(){A?sas.refresh():sas.render()},sas.cleanAd=sas.clean,sas.cleanAds=sas.clean;var na=function(a){var t=e.createElement("div");t.innerHTML="_"+a;var n=t.childNodes[1];return{type:n.tagName.toLowerCase(),url:n.src,width:n.width||0,height:n.height||0}},ra=function(a){var e=F(a);if(!e)return null;var t=e.ad.formatId+(e.ad.instance>1?"_"+e.ad.instance:"");if(sas_manager&&sas_manager.exists(t)){var n,s=sas_manager.formats["f"+t];n=e.options.async||s.chain?{type:s.scriptType(),url:s.scriptSrc(),chain:s.chain,width:"iframe"==s.scriptType()?s.scriptWidth():0,height:"iframe"==s.scriptType()?s.scriptHeight():0}:na(s.scriptURL());var i=n.url;n.url=function(){return r(i)},e=D(e.ad.tagId,n)}return e};a.sas_render=function(a,e,t,n,r){ra(a),sas.render(a)},a.SmartAdServerAjaxOneCall=function(a,e){ra(e),sas.render(e)},a.SmartAdServer_iframe=function(a,e,t,n,r){var s=new ta(a,e,t);s.width=n,s.height=r,sas.call("iframe",s)},a.SmartAdServer=function(a,e,t){var n=new ta(a,e,t);sas.call(sas.callType.STD,n)},a.SmartAdServerAjax=SmartAdServer,a.sas_gcf=function(a){return e.getElementById("sas_"+a)},a.sas_appendToContainer=function(a,t){var n=e.getElementById("sas_"+a);if(n){if("string"==typeof t){var r=e.createElement("div");r.innerHTML=t,t=r}n.appendChild(t)}},a.sascc=function(a,e){var t=new Image;t.src=c+"/h/mcp?imgid="+a+"&pgid="+e+"&uid=[uid]&tmstp="+l+"&tgt=[targeting]"},a.sasmobile=function(a,e,t){var n=new ta(a,e,t);sas.call(sas.callType.STD,n)};var sa={};a.sas_addCleanListener=function(a,e){sa[a]=e},a.sas_cleanAds=sas.clean,a.sas_cleanAd=sas.clean,sas.cmd=sas.cmd||[],sas.cmd.push=function(a){a()};for(var ia=0;ia<sas.cmd.length;ia++)sas.cmd[ia]()}}(window,document);