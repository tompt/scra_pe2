!function(){function e(e,t){return t=t||q,t.querySelector(e)}function t(e,t){return t=t||q,t.querySelectorAll(e)}function n(e,n){var o=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||function(e){for(var n=t(e,this.document||this.ownerDocument),o=n.length;--o>=0&&n.item(o)!==this;);return o>-1};return o.call(e,n)}function o(e,t){if(e=e.target||e.srcElement||e,!t)return e;for(;;){if(n(e,t))return e;if(e=e.parentNode,!e)return!1}}function i(e,t,n){e.addEventListener(t,n,!0)}function r(e,t,n){e.removeEventListener(t,n,!0)}function a(e,t){function n(){var r=+new Date,a=r-i,l=arguments,c=this;return t>a?(o&&clearTimeout(o),void(o=setTimeout(function(){return o=null,n.apply(c,l)},t-a))):(i=r,e.apply(this,arguments))}t=t||0;var o,i=0;return n}function l(e){var t=e.button;return 2===t?"right":e.shiftKey||e.ctrlKey||e.metaKey?"middle":X.addEventListener?0===t&&"left"||1===t&&"middle":1===t&&"left"||4===t&&"middle"}function c(e,t){for(var n in t)e[n]=t[n];return e}function s(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function u(e){return e?e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()}):e}function d(e){if("object"==typeof e){e=c({},e);for(var t in e)e[t]=d(e[t]);return e}return"null"===e?null:"Infinity"===e?1/0:/^true|false$/i.test(e)?"true"===e.toLowerCase():/^[1-9][\d-.]+$/.test(e)?parseFloat(e):e}function p(e){return decodeURIComponent(q.cookie.replace(RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function f(e,t,n,o,i,r){return!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e)?!1:(q.cookie=encodeURIComponent(e)+"="+(t?encodeURIComponent(t):"")+(n?"; max-age="+n:"; expires="+(t?"Fri, 31 Dec 9999 23:59:59":"Thu, 01 Jan 1970 00:00:00")+" GMT")+(o?"; domain="+o:"")+(i?"; path="+i:"")+(r?"; secure":""),!0)}function m(){return{l:X.pageXOffset,t:X.pageYOffset,w:F.scrollWidth||J.scrollWidth,h:F.scrollHeight||J.scrollHeight}}function h(){return{w:X.innerWidth||F.clientWidth,h:X.innerHeight||F.clientHeight}}function g(e){var t=e.getBoundingClientRect(),n=h();return t.bottom>0&&t.left<n.w&&t.top<n.h&&t.right>0}function b(e){for(var t="",n=0,o=Z.length;o>n;n++)Z[n]+s(e)in document&&(t=Z[n]);return{prop:t?t+s(e):e,vendor:t}}function v(e){if(e.dataset)return d(e.dataset);for(var t=e.attributes||[],n={},o=0,i=t.length;i>o;o++)t[o].name.indexOf("data-")>-1&&(n[u(t[o].name.replace("data-",""))]=d(t[o].value));return n}function y(){j=1}function x(e,t){if(navigator.onLine){if(!e&&K.length)for(e=[];key=K.shift();)e.push(JSON.parse(localStorage.getItem(key))),localStorage.removeItem(key);if(e)if(G&&console.log("send",e),e=JSON.stringify(e),navigator.sendBeacon)navigator.sendBeacon(et.endpoint,e);else{var n="XMLHttpRequest"in X&&new XMLHttpRequest;if(n&&!("withCredentials"in n)&&"XDomainRequest"in X&&(n=new XDomainRequest,et.endpoint=et.endpoint.replace("https:",W.protocol)),!n)return;n.open("POST",et.endpoint,!t),n.send(e)}}}function w(e){if(G&&console.log("store",e),!P)return void x([e]);var t="brpx_"+e.ts+"_"+K.length;localStorage.setItem(t,JSON.stringify(e)),K.push(t),K.length>=et.maxEvents&&x()}function k(e){var t={r:W.protocol+"//"+W.hostname,ts:+new Date,i:H,ev:e,el:[],u:W.href,t:q.title,d:{ic:j,vp:h(),sc:m()}};return N&&(t.d.bt={c:N.charging,l:N.level}),Y.length&&(t.d.mt=Y),et.cookies&&(t.c=et.cookies),_&&(t.d.ar=c({},_.getBoundingClientRect())),t}function S(t,n){if(t){var i,r=t.tagName.toLowerCase(),a=o(t,"article, li, form");switch(n){case"href":"a"===r?i=t.href:"button"===r&&(i=a&&a.getAttribute("action")||W.href);break;case"title":i=t.textContent||t.innerText,i||(t=e("[alt]",t),t&&(i=t.getAttribute("alt"))),i=i.replace(/\t|\n/gm,"").replace(/\s+/g," ")}return i.trim()}}function C(e){e.setAttribute(Q,"");var t={t:S(e,"title"),u:S(e,"href"),r:c({},e.getBoundingClientRect())},n=o(e,"[data-brpx-zone]");return n&&(t.z=n.getAttribute("data-brpx-zone")),t}function R(){for(var e=t(V),n=0,o=e.length,i=[];o>n;n++)g(e[n])&&i.push(C(e[n]));return i}function L(){if(location.search||/[\d._-]/.test(location.pathname.replace(/^\/|\/$/g,"").split("/").pop())){var e,o={unlikely:/wrapper|nav|banner|combx|comment|community|disqus|extra|foot|header|menu|modal|related|remark|rss|share|shoutbox|sidebar|skyscraper|sponsor|ad-break|agegate|pagination|pager|popup|byline|author|dateline|writtenby|p-author|print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,likely:/and|article|body|entry|column|main|shadow/i,positive:/description|article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/paywall|recommendation|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|masthead|media|meta|modal|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|widget/i,normalize:/\s{2,}/g},i=t("p",J),r=[],a=0;return i.forEach(function(e){var t=0,i=e.parentNode,a=i.className+" "+i.id,l=e.textContent?e.textContent.replace(o.normalize,"").trim():"";n(i,"body, a, aside")||l.length<50||o.negative.test(a)||o.unlikely.test(a)&&!o.likely.test(a)||(l.split(",").length&&(t+=5),t+=5*Math.floor(l.length/100),o.positive.test(a)&&(t+=25),t&&r.push({score:t,elm:i}))}),r.forEach(function(t){G&&console.log(t),t.score>a&&(e=t.elm,a=t.score)}),G&&console.log(a,e),e}}function M(e){var t={z:e.alpha,x:e.beta,y:e.gamma,a:e.absolute,ts:+new Date};3===Y.length&&Y.shift(),Y.push(t)}function E(e,t){t=o(e,"a, button"),t&&(data=k(l(e)+"-click"),data.d.pt={x:e.screenX,y:e.screenY},data.el.push(C(t)),w(data))}function I(e){var t=e.type.toLowerCase().replace(/^(webkit|moz|ms|o)/,""),n=k(t);t.indexOf("load")>-1&&window.performance&&(n.d.pf=performance.timing),"visibilitychange"===t&&(n.d.vs=q[b("visibilityState").prop]),-1===t.indexOf("click")&&(n.el=R()),w(n),"domcontentloaded,load,online".indexOf(t)>-1&&x(),"unload"===t&&x(null,!0)}function O(){r(X,"DOMContentLoaded",I),r(X,"load",I),r(X,"unload",I),r(X,"online",I),r(X,"mousedown",E),r(X,"orientationchange",I),A&&(r(X,"scroll",A),r(X,"resize",A)),U&&r(X,"deviceorientation",U),r(q,b("visibilityState").vendor+"visibilitychange",I),clearInterval(B)}function z(){O(),i(X,"DOMContentLoaded",I),i(X,"load",I),i(X,"unload",I),i(X,"online",I),i(X,"mousedown",E),i(X,"orientationchange",I),A=a(I,1e3),i(X,"scroll",A),i(X,"resize",A),et.motion&&i(X,"deviceorientation",U=a(M,1e3)),i(q,b("visibilityState").vendor+"visibilitychange",I),B=setInterval(function(){x()},1e3*et.maxTime)}function T(e,t){t=c(k(e),t),w(t)}function $(){G=1,console.log(et,_)}var q=document,D=q.createElement("div");if(D.innerHTML="<!--[if lt IE 9]>1<![endif]-->","1"!==D.innerHTML){var H,B,N,_,A,U,X=window,F=q.documentElement,J=q.body,W=location,K=[],Y=[],P=0,j=0,G=0,Q="data-brpx-seen",V="a:not(["+Q+"]), button:not(["+Q+"])",Z=["webkit","moz","ms","o"],et={endpoint:"https://a.brpx.io/ub",maxEvents:10,maxTime:30,article:!0,motion:"https:"===W.protocol,battery:!0,incognito:!0,debug:!1},tt=e("[data-brpx-ub]");if(et=c(et,tt?v(tt):{debug:!0}),G=et.debug,et.article&&(_=L()),et.cookies&&function(){var e=et.cookies;e=e.split(","),et.cookies=[];for(var t,n=0,o=e.length;o>n;n++)t=e[n].trim(),et.cookies.push({k:t,v:p(t)})}(),X.localStorage)try{localStorage.setItem("brpx_test","1"),localStorage.removeItem("brpx_test"),P=1}catch(nt){y()}et.incognito&&function(){try{var e=X.RequestFileSystem||X.webkitRequestFileSystem;e(X.TEMPORARY,0,function(){},y)}catch(t){}}(),et.battery&&navigator.getBattery&&navigator.getBattery().then(function(e){N=e}),H=p("brpx_uid"),!H&&(H=Math.random().toString(36).slice(2),f("brpx_uid",H)),z(),!X.brpx&&(X.brpx={}),!brpx.ub&&(brpx.ub={send:x,track:T,start:z,stop:O,debug:$})}}();